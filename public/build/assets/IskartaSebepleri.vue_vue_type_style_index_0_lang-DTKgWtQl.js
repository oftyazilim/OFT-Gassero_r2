import{a as r,f as R,g as P,h as O,i as _,j as C,c as A,k as F,l as N,m as T,n as B,o as Y,D as z}from"./data-grid-bcHRWDWG.js";import{a as l}from"./axios-CCb-kr4I.js";import{D as M,n as U,e as $,a as q,s as j}from"./FileSaver-DOHanaSG.js";import{d as G,r as m,E as L,o as W,c as H,b as t,n as a,f as c}from"./main-C8N3ebfR.js";const K={class:"grid mb-2"},d="/api/iskartasebepleri",ee=G({__name:"IskartaSebepleri",setup(V){const p=m([]),g=e=>{E(e)},w=e=>{I(e)},f=e=>{y(e)},h={allowUpdating:!0,allowAdding:!0,allowDeleting:!0,mode:"form",useIcons:!0},x={placeholder:"Sütun ara"},S=e=>{e.forEach(o=>{o.dataField==="ISTASYONID"&&(o.alignment="center")})},b={items:[{dataField:"SEBEP",editorOptions:{placeholder:"Sebep giriniz..."}},{dataField:"PROSES",editorOptions:{placeholder:"Proses giriniz..."}},{dataField:"ISTASYONID",editorOptions:{placeholder:"İstasyon seçiniz...",min:0,max:120}}]},u=m([]),s=async()=>{try{const e=await l.get(d);p.value=e.data.data,u.value=e.data.istasyonlar}catch(e){console.error("Error fetching data:",e),U("Iskarta Sebepleri verisi alınamadı","error",1500)}finally{}},E=e=>{e.promise=new Promise(async(o,n)=>{try{const i={...e.oldData,...e.newData};await l.put(`${d}/${e.key}`,i),await s(),e.component.cancelEditData(),o()}catch(i){console.error("Error updating data:",i),n()}})},I=e=>{e.promise=new Promise(async(o,n)=>{try{await l.post(d,e.data),await s(),e.component.cancelEditData(),o()}catch(i){console.error("Error adding data:",i),n()}})},y=e=>{e.promise=new Promise(async(o,n)=>{try{await l.delete(`${d}/${e.key}`),await s(),e.component.cancelEditData(),o()}catch(i){console.error("Error deleting data:",i),n()}})};L(s);const v=[{text:"Yenile"}];function D({itemData:e}){if(!(e!=null&&e.items))switch(e==null?void 0:e.text){case"Yenile":s();break}}const k=e=>{const o=new $.Workbook,n=o.addWorksheet("IskartaSebepleri");q({component:e.component,worksheet:n,autoFilterEnabled:!0}).then(()=>{o.xlsx.writeBuffer().then(i=>{j(new Blob([i],{type:"application/octet-stream"}),"IskartaSebepleri.xlsx")})}),e.cancel=!0};return(e,o)=>(W(),H("div",K,[t(a(M),{"data-source":v,width:200,target:"#grid-mydatagrid",onItemClick:D}),t(a(z),{id:"grid-mydatagrid","data-source":a(p),"key-expr":"ID","show-borders":!0,"editing-options":h,onRowUpdating:g,onRowInserting:w,onRowRemoving:f,"customize-columns":S,"form-options":b,"row-alternation-enabled":!0,onExporting:k,height:"100%"},{default:c(()=>[t(a(r),{"data-field":"ID",caption:"ID","allow-editing":!1,visible:!1}),t(a(r),{"data-field":"SEBEP",caption:"SEBEP","allow-editing":!0,visible:!0,"validation-rules":[{type:"required"}]}),t(a(r),{"data-field":"TIP",caption:"TİP","allow-editing":!1,visible:!1}),t(a(r),{"data-field":"SINIF",caption:"SINIF","allow-editing":!1,visible:!1}),t(a(r),{"data-field":"TUR",caption:"TÜR","allow-editing":!1,visible:!1}),t(a(r),{"data-field":"PERFORMANS",caption:"PERFORMANS","allow-editing":!1,visible:!1}),t(a(r),{"data-field":"PROSES",caption:"PROSES","allow-editing":!0,visible:!0,"validation-rules":[{type:"required"}]}),t(a(r),{"data-field":"ISTASYONID",caption:"İSTASYON","allow-editing":!0,visible:!0,"validation-rules":[{type:"required"}]},{default:c(()=>[t(a(R),{"data-source":a(u),"display-expr":"KISATANIM","value-expr":"ID"},null,8,["data-source"])]),_:1}),t(a(P),{"allow-updating":!0,"allow-adding":!0,"allow-deleting":!0,mode:"row","use-icons":!0}),t(a(O),{visible:!0}),t(a(_),{visible:!0,width:240,placeholder:"Ara..."}),t(a(C),{enabled:!0}),t(a(A),{mode:"virtual"}),t(a(F),{enabled:!0,"allow-export-selected-data":!1}),t(a(N),{height:"540px",enabled:!0,mode:"select",title:"Sütun Seçici"},{default:c(()=>[t(a(T),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),t(a(B),{enabled:!0,"editor-options":x}),t(a(Y),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1})]),_:1},8,["data-source"])]))}});export{ee as _};
