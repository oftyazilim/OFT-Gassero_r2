import{a as N,h as F,i as Z,f as T,e as U,j as M,k as P,l as S,m as A,n as _,D as O}from"./data-grid-BLmUHH6D.js";import{a as m}from"./axios-CCb-kr4I.js";import{n as $}from"./m_notify-Cb9wpp58.js";import{D as G}from"./context-menu-Cov5ypH3.js";import{e as V,a as B,s as j}from"./FileSaver-kGUWF2pl.js";import{d as q,r as v,E as z,w as W,o as Y,c as H,b as o,f as s,ai as d,x as c,t as u,e as J,n as r,F as Q}from"./main-CXefX_qh.js";import"./index-xGAhBz7B.js";import{V as X}from"./VCardText-BW9gFSa-.js";const ee={class:"grid m-2"},p="/api/mamultanimlari",ce=q({__name:"MamulOzellikTanimlari",setup(ae){const w=v([]),a=v(""),f=e=>{D(e)},x=e=>{I(e)},g=e=>{k(e)},b=e=>{e.data.TANIM=a.value},E={allowUpdating:!0,allowAdding:!0,allowDeleting:!0,mode:"form",useIcons:!0},L={placeholder:"Sütun ara"},h=[{dataField:"ID",caption:"ID",allowEditing:!1,visible:!1},{dataField:"TANIM",caption:"TANIM",validationRules:[{type:"required"}]},{dataField:"DEGER",caption:"DEĞER",validationRules:[{type:"required"}]}],i=async e=>{try{const t=await m.get(p,{params:{filter:e}});w.value=t.data}catch(t){console.error("Error fetching data:",t),$("Veriler Alınamadı","error",1500)}finally{}},D=e=>{e.promise=new Promise(async(t,n)=>{try{e.newData.TANIM||(e.newData.TANIM=a.value);const l={...e.oldData,...e.newData};await m.put(`${p}/${e.key}`,l),await i(a.value),e.component.cancelEditData(),t()}catch(l){console.error("Error updating data:",l),n()}})},I=e=>{e.promise=new Promise(async(t,n)=>{try{await m.post(p,e.data),await i(a.value),e.component.cancelEditData(),t()}catch(l){console.error("Error adding data:",l),n()}})},k=e=>{e.promise=new Promise(async(t,n)=>{try{await m.delete(`${p}/${e.key}`),await i(a.value),e.component.cancelEditData(),t()}catch(l){console.error("Error deleting data:",l),n()}})};z(async()=>{a.value="ÖZELLİK 1"});const y=[{text:"Yenile"}];function C({itemData:e}){if(!(e!=null&&e.items))switch(e==null?void 0:e.text){case"Yenile":i(a.value);break}}const R=e=>{const t=new V.Workbook,n=t.addWorksheet("MamulTanimlari");B({component:e.component,worksheet:n,autoFilterEnabled:!0}).then(()=>{t.xlsx.writeBuffer().then(l=>{j(new Blob([l],{type:"application/octet-stream"}),"MamulTanimlari.xlsx")})}),e.cancel=!0};W(a,async(e,t)=>{await i(e)});const K=e=>{e.dataField==="TANIM"&&e.parentType==="dataRow"&&(e.editorOptions.disabled=!0,e.editorOptions.value=a.value)};return(e,t)=>(Y(),H(Q,null,[o(X,{class:"text-center d-flex items-center gap-y-2 flex-wrap"},{default:s(()=>[o(d,{class:c(["me-4",{"active-button":a.value==="ÖZELLİK 1"}]),disabled:a.value==="ÖZELLİK 1",onClick:t[0]||(t[0]=n=>a.value="ÖZELLİK 1")},{default:s(()=>[u(" ÖZELLİK 1 ")]),_:1},8,["disabled","class"]),o(d,{class:c(["me-4",{"active-button":a.value==="ÖZELLİK 2"}]),disabled:a.value==="ÖZELLİK 2",onClick:t[1]||(t[1]=n=>a.value="ÖZELLİK 2")},{default:s(()=>[u(" ÖZELLİK 2 ")]),_:1},8,["disabled","class"]),o(d,{class:c(["me-4",{"active-button":a.value==="ÖZELLİK 3"}]),disabled:a.value==="ÖZELLİK 3",onClick:t[2]||(t[2]=n=>a.value="ÖZELLİK 3")},{default:s(()=>[u(" ÖZELLİK 3 ")]),_:1},8,["disabled","class"]),o(d,{class:c(["me-4",{"active-button":a.value==="GRUP KODU"}]),disabled:a.value==="GRUP KODU",onClick:t[3]||(t[3]=n=>a.value="GRUP KODU")},{default:s(()=>[u(" GRUP KODU ")]),_:1},8,["disabled","class"]),o(d,{class:c(["me-4",{"active-button":a.value==="SINIF"}]),disabled:a.value==="SINIF",onClick:t[4]||(t[4]=n=>a.value="SINIF")},{default:s(()=>[u(" SINIF ")]),_:1},8,["disabled","class"])]),_:1}),J("div",ee,[o(r(G),{"data-source":y,width:200,target:"#grid-container",onItemClick:C}),o(r(O),{id:"grid-container","data-source":w.value,columns:h,"key-expr":"ID","show-borders":!0,"editing-options":E,onRowUpdating:f,onRowInserting:x,onRowRemoving:g,"row-alternation-enabled":!0,onExporting:R,onEditorPreparing:K,onInitNewRow:b,height:"100%"},{default:s(()=>[o(r(N),{"allow-updating":!0,"allow-adding":!0,"allow-deleting":!0,mode:"row","use-icons":!0}),o(r(F),{visible:!0}),o(r(Z),{visible:!0,width:240,placeholder:"Ara..."}),o(r(T),{enabled:!0}),o(r(U),{mode:"virtual"}),o(r(M),{enabled:!0,"allow-export-selected-data":!1}),o(r(P),{height:"540px",enabled:!0,mode:"select",title:"Sütun Seçici"},{default:s(()=>[o(r(S),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),o(r(A),{enabled:!0,"editor-options":L}),o(r(_),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1})]),_:1},8,["data-source"])])],64))}});export{ce as _};
