import{a as u}from"./axios-CCb-kr4I.js";import{e as B,a as Y,s as j}from"./FileSaver-kGUWF2pl.js";import{d as W,b2 as H,r as n,E as q,o as f,g as x,f as o,b as e,n as a,V as K}from"./main-CXefX_qh.js";import"./index-xGAhBz7B.js";import{a as J,U as Q,Q as $,O as l,b as r,c as O,g as d,F as X,G as ee,q as ae,f as te,e as oe,r as le,s as re,h as ie,i as ne,j as de,H as se,I as ue,k as ce,l as pe,m as me,n as fe,J as xe,M as he,K as De,D as ge}from"./data-grid-BLmUHH6D.js";import{D as we}from"./context-menu-Cov5ypH3.js";import{n as h}from"./m_notify-Cb9wpp58.js";import{u as ye}from"./pageTitle-BB4Xy5Fv.js";import{V as ve}from"./VCard-pJfFDOSH.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-a73hCTk3.js";import"./VImg-Db788kHt.js";import"./index-DT3SyRRd.js";import"./VCardText-BW9gFSa-.js";const Ae=W({__name:"mamulkartlari",setup(Ee){const D=ye(),p=H("userData"),g=n([]),m=n([]),w=n([]),y=n([]),v=n([]),E=n([]),b=n([]),I=n(null);var k="Mamul Kartları: ";document.title="OFT - Mamul Kartları",q(()=>{T(),s()});const s=()=>{u.get("/api/dataMamuller").then(t=>{g.value=t.data.data,D.setTitle(k),D.setToplam(L(t.data.toplam).toString())}).catch(t=>{console.error("Veri çekilirken hata oluştu: ",t)})},T=()=>{u.get("/api/veriMamuller").then(t=>{E.value=t.data.istasyon,m.value=t.data.mamulGrup,b.value=t.data.mamulSinif,w.value=t.data.mamulOz1,y.value=t.data.mamulOz2,v.value=t.data.mamulOz3,m.value.push({MMLGRPKOD:"YEDEK PARÇA"})}).catch(t=>{console.error("Mamul verileri çekilirken hata oluştu: ",t)})},S=t=>{t.parentType==="dataRow"&&t.dataField==="MEVCUT"&&(t.editorOptions.disabled=!0)},G=t=>{u.put(`/api/mamulsil/${t.key}`,{headers:{userID:p.value.id}}).then(i=>{s()}).catch(i=>{console.error("Veri silinirken hata oluştu: ",i)})},R=t=>{u.post("/api/mamul",t.data,{headers:{userID:p.value.id}}).then(i=>{s()}).catch(i=>{console.error("Veri güncellenirken hata oluştu: ",i)})},M=t=>{u.post("/api/mamul",t.data,{headers:{userID:p.value.id}}).then(i=>{s()}).catch(i=>{console.error("Veri eklenirken hata oluştu: ",i)})},C=t=>{t.data.MEVCUT=0,t.data.AKTIF=!0},_=t=>{t.rowType==="data"&&t.column.dataField==="MEVCUT"&&t.data.MEVCUT>0&&(t.cellElement.style.fontWeight="bold")},L=t=>new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0}).format(t),P={of:window,at:"top",my:"top",offset:{y:10}},A={placeholder:"Sütun ara"},F=t=>{t.component.option("loadPanel.enabled",!1)},N=t=>{const i=new B.Workbook,c=i.addWorksheet("MamulKartlari");Y({component:t.component,worksheet:c,autoFilterEnabled:!0}).then(()=>{i.xlsx.writeBuffer().then(Z=>{j(new Blob([Z],{type:"application/octet-stream"}),"MamulKartlari.xlsx")})}),t.cancel=!0},V=[{text:"Yenile"},{text:"Grid Düzenini Sıfırla"},{text:"Günün Sözü"}];function z({itemData:t}){if(!(t!=null&&t.items))switch(t==null?void 0:t.text){case"Yenile":s(),h("Veriler Yenilendi","success",1500);break;case"Grid Düzenini Sıfırla":U(),h("Düzen Sıfırlandı","success",1500);break;case"Günün Sözü":h("İşini düzgün yap. Dalga geçme :)","success",1500);break}}const U=()=>{I.value.instance.state(null)};return(t,i)=>(f(),x(ve,null,{default:o(()=>[e(a(we),{"data-source":V,width:200,target:"#gridContainer",onItemClick:z}),e(a(ge),{id:"gridContainer",ref_key:"dataGridRef",ref:I,onContentReady:F,"data-source":g.value,"show-borders":!0,"key-expr":"ID",onEditorPreparing:S,"show-column-lines":!1,"show-row-lines":!0,"row-alternation-enabled":!0,"allow-column-reordering":!0,onRowRemoved:G,"allow-column-resizing":!0,onExporting:N,"column-width":100,"show-indicator":!1,onRowUpdated:R,onRowInserted:M,onInitNewRow:C,onCellPrepared:_,"repaint-changes-only":!0},{aktifTemplate:o(({data:c})=>[c.value==="0"||c.value===0?(f(),x(K,{key:0,size:"24",icon:"tabler-x"})):(f(),x(K,{key:1,size:"24",icon:"tabler-check"}))]),default:o(()=>[e(a(J),{"allow-updating":!0,"allow-adding":!0,"allow-deleting":!0,"use-icons":!0,mode:"popup"},{default:o(()=>[e(a(Q),{"show-title":!0,shading:!0,width:800,height:480,title:"Mamul Kartı"}),e(a($),null,{default:o(()=>[e(a(l),{"col-count":2,"col-span":2,"item-type":"group"},{default:o(()=>[e(a(l),{"data-field":"ID",visible:!1}),e(a(l),{"data-field":"ISTASYONID",visible:!1}),e(a(l),{"data-field":"STGRPKOD"}),e(a(l),{"data-field":"SINIF"}),e(a(l),{"data-field":"OZELLIKKOD1"}),e(a(l),{"data-field":"MMLGRPKOD"}),e(a(l),{"data-field":"OZELLIKKOD2"}),e(a(l),{"data-field":"OZELLIKKOD3"}),e(a(l),{"data-field":"KOD"}),e(a(l),{"data-field":"TANIM","col-span":2}),e(a(l),{"data-field":"MEVCUT"}),e(a(l),{"data-field":"AKTIF","editor-type":"dxCheckBox"})]),_:1})]),_:1})]),_:1}),e(a(r),{type:"buttons",fixed:!0,width:80},{default:o(()=>[e(a(O),{name:"edit",icon:"edit"}),e(a(O),{name:"delete",icon:"trash"})]),_:1}),e(a(r),{"data-field":"AKTIF",caption:"AKTİF","data-type":"boolean",visible:!1,width:60}),e(a(r),{"data-field":"ID","data-type":"number",caption:"İE NO",visible:!0,"sort-order":"desc",width:80}),e(a(r),{"data-field":"KOD",caption:"STOK KODU","data-type":"string","min-width":150}),e(a(r),{"data-field":"TANIM",caption:"STOK ADI","data-type":"string","min-width":600}),e(a(r),{"data-field":"STGRPKOD","min-width":200,caption:"İSTASYON","data-type":"string"},{default:o(()=>[e(a(d),{"data-source":E.value,"display-expr":"TANIM","value-expr":"TANIM"},null,8,["data-source"])]),_:1}),e(a(r),{"data-field":"MMLGRPKOD",width:250,caption:"GRUP KODU","data-type":"string"},{default:o(()=>[e(a(d),{"data-source":m.value,"display-expr":"DEGER","value-expr":"DEGER"},null,8,["data-source"])]),_:1}),e(a(r),{"data-field":"MEVCUT","data-type":"number",visible:!0,width:110}),e(a(r),{"data-field":"SINIF","data-type":"string"},{default:o(()=>[e(a(d),{"data-source":b.value,"display-expr":"DEGER","value-expr":"DEGER"},null,8,["data-source"])]),_:1}),e(a(r),{"data-field":"OZELLIKKOD1",caption:"ÖZELLİK 1","data-type":"string","min-width":110},{default:o(()=>[e(a(d),{"data-source":w.value,"display-expr":"DEGER","value-expr":"DEGER"},null,8,["data-source"])]),_:1}),e(a(r),{"data-field":"OZELLIKKOD2",caption:"ÖZELLİK 2","data-type":"string","min-width":110},{default:o(()=>[e(a(d),{"data-source":y.value,"display-expr":"DEGER","value-expr":"DEGER"},null,8,["data-source"])]),_:1}),e(a(r),{"data-field":"OZELLIKKOD3",caption:"ÖZELLİK 3","data-type":"string","min-width":210},{default:o(()=>[e(a(d),{"data-source":v.value,"display-expr":"DEGER","value-expr":"DEGER"},null,8,["data-source"])]),_:1}),e(a(r),{"data-field":"ISTASYONID","data-type":"number",visible:!1}),e(a(X),{visible:!0,emptyPanelText:"Gruplanacak sütunlar buraya..."}),e(a(ee),{"auto-expand-all":!0}),e(a(ae),{visible:!0}),e(a(te),{enabled:!0}),e(a(oe),{mode:"virtual","column-rendering-mode":"virtual"}),e(a(le),{visible:!0}),e(a(re),{position:P}),e(a(ie),{visible:!0}),e(a(ne),{visible:!0,width:240,placeholder:"Ara..."}),e(a(de),{enabled:!0,"allow-export-selected-data":!0}),e(a(se),{mode:"single"}),e(a(ue),{enabled:!0}),e(a(ce),{height:"540px",enabled:!0,mode:"dragAndDrop",title:"Sütun Seçici"},{default:o(()=>[e(a(pe),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),e(a(me),{enabled:!0,"editor-options":A}),e(a(fe),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1}),e(a(xe),null,{default:o(()=>[e(a(he),{column:"TANIM","summary-type":"count","display-format":"{0} adet"}),e(a(De),{"show-in-group-footer":!1,"align-by-column":!0,column:"TANIM","summary-type":"count","display-format":"{0} adet"})]),_:1})]),_:1},8,["data-source"])]),_:1}))}});export{Ae as default};
