import{b as n,g as O,a as N,h as U,i as $,f as M,e as B,j as F,k as I,l as L,m as q,n as z,D as V}from"./data-grid-BLmUHH6D.js";import{a as m}from"./axios-CCb-kr4I.js";import{n as Y}from"./m_notify-Cb9wpp58.js";import{D as j}from"./context-menu-Cov5ypH3.js";import{_ as G}from"./AddNewUserDrawer.vue_vue_type_script_setup_true_lang-CaheMLNz.js";import{e as H,a as W,s as J}from"./FileSaver-kGUWF2pl.js";import{d as Q,r as d,E as X,w as Z,$ as ee,o as te,c as ae,b as a,n as t,f as u}from"./main-CXefX_qh.js";import"./index-xGAhBz7B.js";import{u as oe}from"./pageTitle-BB4Xy5Fv.js";import"./validators-BJEf8OaU.js";import"./helpers-BGv4x_9E.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-UIB--c0H.js";import"./form-ClP579eF.js";import"./VSelect-BSocyXX7.js";import"./VTextField-CN3aek7z.js";/* empty css                   */import"./VCounter-Cxc0KNa-.js";import"./index-DT3SyRRd.js";import"./VField-CeCYSswt.js";import"./easing-CjukEv2V.js";import"./VInput-BI9uJ0Ce.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-5j6JHPeN.js";import"./ssrBoot-BBXTmuIy.js";import"./VAvatar-a73hCTk3.js";import"./VImg-Db788kHt.js";import"./VDivider-B8BIZrEP.js";import"./dialog-transition-DjZpsU5U.js";import"./VMenu-DAf6uba2.js";import"./VOverlay-E84Zkpn-.js";import"./delay-RGhQcOZ6.js";import"./lazy-CAMkS5e7.js";import"./scopeId-BgBx1Ex_.js";import"./VCheckboxBtn-CLjc42-a.js";import"./VSelectionControl-BoOcbjQs.js";import"./VChip-Dx4QNr20.js";import"./VSlideGroup-CNPi0L39.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-B67lS2wl.js";import"./VCard-pJfFDOSH.js";import"./VCardText-BW9gFSa-.js";import"./VForm-CD_GLPlO.js";import"./VRow-qTTVFZ4i.js";/* empty css              */import"./VCol-Dzvr-cnK.js";import"./VDialog-Cm1FNAkS.js";import"./_commonjsHelpers-BosuxZz1.js";const re={class:"mb-4"},f="/api/kullanicilar",Xe=Q({__name:"kullanicilar copy",setup(ie){const w=oe();w.setTitle("Kullanıcılar"),w.setToplam(""),document.title="OFT - Kullanıcılar";const x=d([]),h=d([]),c=d(!1),p=d(null),v=d({id:0,name:"",email:"",unvan:"",proses:"",tip:"",roles:""}),g=()=>{c.value=!0},y=e=>{S(e)},k=e=>{R(e)},E={placeholder:"Sütun ara"},s=async()=>{try{const e=await m.get(f);x.value=e.data.data,h.value=e.data.kademeler}catch(e){console.error("Error fetching data:",e),Y("Kullanıcılar verisi alınamadı","error",1500)}finally{}},_=(e,o)=>{const i=(o.data.roles||"").split("|");e.className="d-flex gap-2",i.forEach(r=>{const D=r.trim(),b=C[D]||{},l=document.createElement("span");l.textContent=b.text||D,l.style.display="inline-block",l.style.padding="2px 8px",l.style.borderRadius="8px",l.style.backgroundColor=b.color||"#ccc",l.style.color="#fff",l.style.fontSize="12px",e.appendChild(l)})},C={SuperAdmin:{color:"red",text:"SuperAdmin"},AclDemo:{color:"#28a745",text:"AclDemo"},admin:{color:"#ffc107",text:"admin"},writer:{color:"#ffc107",text:"writer"},Dashboard:{color:"#007bff",text:"Dashboard"},all:{color:"#ac3545",text:"all"}},S=e=>{e.promise=new Promise(async(o,i)=>{try{const r={...e.oldData,...e.newData};await m.put(`${f}/${e.key}`,r),await s(),e.component.cancelEditData(),o()}catch(r){console.error("Error updating data:",r),i()}})},R=e=>{e.promise=new Promise(async(o,i)=>{try{await m.delete(`${f}/${e.key}`),await s(),e.component.cancelEditData(),o()}catch(r){console.error("Error deleting data:",r),i()}})};X(s),Z(c,(e,o)=>{!e&&o&&(c.value||s())});function A(e){p.value={id:e.row.data.id,name:e.row.data.name,email:e.row.data.email,unvan:e.row.data.unvan,proses:e.row.data.proses,tip:e.row.data.tip,roles:e.row.data.roles}}ee(()=>{const e=p.value||{};return{id:e.id||0,name:e.name||"",email:e.email||"",unvan:e.unvan||"",proses:e.proses||"",tip:e.tip||"",roles:e.roles||""}});const K=[{text:"Yenile"},{text:"Kullanıcı Ekle"},{text:"Kullanıcı Düzenle"}];function T({itemData:e}){if(!(e!=null&&e.items))switch(e==null?void 0:e.text){case"Yenile":s();break;case"Kullanıcı Ekle":p.value="{ id: 0, name: '', email: '', roles: '', proses: '', tip: '', unvan: '' }",g();break;case"Kullanıcı Düzenle":g();break}}const P=e=>{const o=new H.Workbook,i=o.addWorksheet("Kullanicilar");W({component:e.component,worksheet:i,autoFilterEnabled:!0}).then(()=>{o.xlsx.writeBuffer().then(r=>{J(new Blob([r],{type:"application/octet-stream"}),"Kullanicilar.xlsx")})}),e.cancel=!0};return(e,o)=>(te(),ae("div",re,[a(t(j),{"data-source":K,width:200,target:"#grid-users",onItemClick:T}),a(t(V),{id:"grid-users","data-source":t(x),"key-expr":"id","show-borders":!0,onRowUpdating:y,onRowRemoving:k,"focused-row-enabled":!0,"row-alternation-enabled":!0,onExporting:P,onContextMenuPreparing:A},{default:u(()=>[a(t(n),{"data-field":"id",caption:"ID","allow-editing":!1,visible:!0,width:"70"}),a(t(n),{"data-field":"name",caption:"İSİM","allow-editing":!0,visible:!0,"validation-rules":[{type:"required"}],width:"170"}),a(t(n),{"data-field":"email",caption:"E-POSTA","allow-editing":!1,visible:!0,width:"150"}),a(t(n),{"data-field":"email_verified_at",caption:"ONAY TARİHİ","data-type":"date","allow-editing":!1,width:150,visible:!0,alignment:"center",format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")}},null,8,["format"]),a(t(n),{"data-field":"unvan",caption:"ÜNVAN","validation-rules":[{type:"required"}],width:"150"}),a(t(n),{"data-field":"roles",caption:"ROLLER","cell-template":_}),a(t(n),{"data-field":"proses",caption:"PROSES",width:"200"}),a(t(n),{"data-field":"tip",caption:"KADEME","validation-rules":[{type:"required"}]},{default:u(()=>[a(t(O),{"data-source":t(h),"display-expr":"tip","value-expr":"tip",width:"150"},null,8,["data-source"])]),_:1}),a(t(N),{"allow-updating":!0,"allow-adding":!1,"allow-deleting":!0,mode:"row","use-icons":!0}),a(t(U),{visible:!0}),a(t($),{visible:!0,width:240,placeholder:"Ara..."}),a(t(M),{enabled:!0}),a(t(B),{mode:"virtual"}),a(t(F),{enabled:!0,"allow-export-selected-data":!1}),a(t(I),{height:"540px",enabled:!0,mode:"select",title:"Sütun Seçici"},{default:u(()=>[a(t(L),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),a(t(q),{enabled:!0,"editor-options":E}),a(t(z),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1})]),_:1},8,["data-source"]),a(G,{isDrawerOpen:t(c),userData:t(v)},null,8,["isDrawerOpen","userData"])]))}});export{Xe as default};
