import{_ as be}from"./AppSelect.vue_vue_type_script_setup_true_lang-UIB--c0H.js";import{u as _e}from"./pageTitle-BB4Xy5Fv.js";import{a as C}from"./axios-CCb-kr4I.js";import{a3 as we,D as K,b as d,H as xe,F as H,G as M,f as G,e as z,h as F,i as W,k as De,l as ye,n as Oe,J as L,M as j,K as Y,N as X,O as h,j as Se,a4 as J}from"./data-grid-BLmUHH6D.js";import{D as N}from"./button-BaNt2cEz.js";import{a as Ie}from"./popup-B5ms74O_.js";import{as as Ae,m as q,$ as b,I as Ee,z as Re,b as Te,C as ke,e as Q,ay as E,aV as Ce,y as Ne,c as Be}from"./index-xGAhBz7B.js";import{cW as Z,d1 as ee,d3 as Ve,d as $e,r as p,b2 as Ue,E as Pe,ba as Ke,o as B,c as He,b as e,f as l,t as te,n as t,g as ae,e as V,F as Me,V as ne}from"./main-CXefX_qh.js";import{e as Ge,a as ze,s as Fe}from"./FileSaver-kGUWF2pl.js";import{n as ie}from"./m_notify-Cb9wpp58.js";import{a as We,V as oe}from"./VTabs-Dk-IGiF8.js";import{V as Le,a as se}from"./VWindowItem-Csa_1waa.js";import{V as le}from"./VCardText-BW9gFSa-.js";import{V as je}from"./VCard-pJfFDOSH.js";import{V as re}from"./VCol-Dzvr-cnK.js";import"./form-ClP579eF.js";import"./VSelect-BSocyXX7.js";import"./VTextField-CN3aek7z.js";/* empty css                   */import"./VCounter-Cxc0KNa-.js";import"./index-DT3SyRRd.js";import"./VField-CeCYSswt.js";import"./easing-CjukEv2V.js";import"./VInput-BI9uJ0Ce.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-5j6JHPeN.js";import"./ssrBoot-BBXTmuIy.js";import"./VAvatar-a73hCTk3.js";import"./VImg-Db788kHt.js";import"./VDivider-B8BIZrEP.js";import"./dialog-transition-DjZpsU5U.js";import"./VMenu-DAf6uba2.js";import"./VOverlay-E84Zkpn-.js";import"./delay-RGhQcOZ6.js";import"./lazy-CAMkS5e7.js";import"./scopeId-BgBx1Ex_.js";import"./VCheckboxBtn-CLjc42-a.js";import"./VSelectionControl-BoOcbjQs.js";import"./VChip-Dx4QNr20.js";import"./VSlideGroup-CNPi0L39.js";import"./_commonjsHelpers-BosuxZz1.js";/* empty css              */const de=Ae.inherit({_supportedKeys(){const a=this.option("rtlEnabled"),n=function(u){u.preventDefault(),this._clickAction({event:u})},r=function(u,c){c.preventDefault(),c.stopPropagation(),this._saveValueChangeEvent(c),this._animateValue(u)};return Z(this.callBase(),{space:n,enter:n,leftArrow:r.bind(this,!!a),rightArrow:r.bind(this,!a)})},_useTemplates:()=>!1,_getDefaultOptions(){return Z(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,switchedOnText:ee.format("dxSwitch-switchedOnText"),switchedOffText:ee.format("dxSwitch-switchedOffText"),value:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>q.real().deviceType==="desktop"&&!q.isSimulator(),options:{focusStateEnabled:!0}}])},_feedbackHideTimeout:0,_animating:!1,_initMarkup(){this._renderContainers(),this.$element().addClass("dx-switch").append(this._$switchWrapper),this._renderSubmitElement(),this._renderClick(),this.setAria("role","switch"),this._renderSwipeable(),this.callBase(),this._renderSwitchInner(),this._renderLabels(),this._renderValue()},_getInnerOffset(a,n){return 100*((n-this._offsetDirection()*+!a)/2)+"%"},_getHandleOffset(a,n){return this.option("rtlEnabled")&&(a=!a),a?`${100*-n-100}%`:100*-n+"%"},_renderSwitchInner(){this._$switchInner=b("<div>").addClass("dx-switch-inner").appendTo(this._$switchContainer),this._$handle=b("<div>").addClass("dx-switch-handle").appendTo(this._$switchInner)},_renderLabels(){this._$labelOn=b("<div>").addClass("dx-switch-on").prependTo(this._$switchInner),this._$labelOff=b("<div>").addClass("dx-switch-off").appendTo(this._$switchInner),this._setLabelsText()},_renderContainers(){this._$switchContainer=b("<div>").addClass("dx-switch-container"),this._$switchWrapper=b("<div>").addClass("dx-switch-wrapper").append(this._$switchContainer)},_renderSwipeable(){this._createComponent(this.$element(),we,{elastic:!1,immediate:!0,onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._getItemSizeFunc.bind(this)})},_getItemSizeFunc(){return Ee(this._$switchContainer,!0)-Re(this._$handle.get(0)).width},_renderSubmitElement(){this._$submitElement=b("<input>").attr("type","hidden").appendTo(this.$element())},_getSubmitElement(){return this._$submitElement},_offsetDirection(){return this.option("rtlEnabled")?-1:1},_renderPosition(a,n){const r=this._getInnerOffset(a,n),u=this._getHandleOffset(a,n);this._$switchInner.css("transform",` translateX(${r})`),this._$handle.css("transform",` translateX(${u})`)},_validateValue(){const a=this.option("value");typeof a!="boolean"&&this._options.silent("value",!!a)},_renderClick(){const a=Te(ke,this.NAME),n=this.$element();this._clickAction=this._createAction(this._clickHandler.bind(this)),Q.off(n,a),Q.on(n,a,r=>{this._clickAction({event:r})})},_clickHandler(a){const n=a.event;this._saveValueChangeEvent(n),!(this._animating||this._swiping)&&this._animateValue(!this.option("value"))},_animateValue(a){const n=this.option("value"),r=a;if(n===r)return;this._animating=!0;const u=this._getInnerOffset(n,0),c=this._getInnerOffset(r,0),_=this._getHandleOffset(n,0),w=this._getHandleOffset(r,0),x=this,g={},S={},f={},D={};g.transform=` translateX(${u})`,S.transform=` translateX(${c})`,f.transform=` translateX(${_})`,D.transform=` translateX(${w})`,this.$element().toggleClass("dx-switch-on-value",r),E.animate(this._$handle,{from:f,to:D,duration:100}),E.animate(this._$switchInner,{from:g,to:S,duration:100,complete(){x._animating=!1,x.option("value",r)}})},_swipeStartHandler(a){const n=this.option("value"),r=this.option("rtlEnabled"),u=r?0:1,c=r?1:0;a.event.maxLeftOffset=n?u:c,a.event.maxRightOffset=n?c:u,this._swiping=!0,this._feedbackDeferred=Ve(),Ce(this._feedbackDeferred),this._toggleActiveState(this.$element(),this.option("activeStateEnabled"))},_swipeUpdateHandler(a){this._renderPosition(this.option("value"),a.event.offset)},_swipeEndHandler(a){const n=this,r=this._offsetDirection(),u={},c={},_=this._getInnerOffset(n.option("value"),a.event.targetOffset),w=this._getHandleOffset(n.option("value"),a.event.targetOffset);u.transform=` translateX(${_})`,c.transform=` translateX(${w})`,E.animate(this._$handle,{to:c,duration:100}),E.animate(this._$switchInner,{to:u,duration:100,complete(){n._swiping=!1;const x=n.option("value")+r*a.event.targetOffset;n._saveValueChangeEvent(a.event),n.option("value",!!x),n._feedbackDeferred.resolve(),n._toggleActiveState(n.$element(),!1)}})},_renderValue(){this._validateValue();const a=this.option("value");this._renderPosition(a,0),this.$element().toggleClass("dx-switch-on-value",a),this._getSubmitElement().val(a),this.setAria({checked:a,label:a?this.option("switchedOnText"):this.option("switchedOffText")})},_setLabelsText(){this._$labelOn&&this._$labelOn.text(this.option("switchedOnText")),this._$labelOff&&this._$labelOff.text(this.option("switchedOffText"))},_visibilityChanged(a){a&&this.repaint()},_optionChanged(a){switch(a.name){case"width":delete this._marginBound,this._refresh();break;case"switchedOnText":case"switchedOffText":this._setLabelsText();break;case"value":this._renderValue(),this.callBase(a);break;default:this.callBase(a)}}});Ne("dxSwitch",de);/*!
 * devextreme-vue
 * Version: 24.1.6
 * Build date: Sat Sep 14 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const Ye=Be({props:{accessKey:String,activeStateEnabled:Boolean,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,isDirty:Boolean,isValid:Boolean,name:String,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,onValueChanged:Function,readOnly:Boolean,rtlEnabled:Boolean,switchedOffText:String,switchedOnText:String,tabIndex:Number,validationError:{},validationErrors:Array,validationMessageMode:String,validationMessagePosition:String,validationStatus:String,value:Boolean,visible:Boolean,width:[Function,Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:isDirty":null,"update:isValid":null,"update:name":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onValueChanged":null,"update:readOnly":null,"update:rtlEnabled":null,"update:switchedOffText":null,"update:switchedOnText":null,"update:tabIndex":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationMessagePosition":null,"update:validationStatus":null,"update:value":null,"update:visible":null,"update:width":null},model:{prop:"value",event:"update:value"},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=de,this.$_hasAsyncTemplate=!0}}),Xe={class:"popup-center"},Je=V("h2",{class:"mr-4"},"Hurda",-1),qe=V("h2",{class:"ml-4"},"Üretime İade",-1),Mt=$e({__name:"rework",setup(a){const n=p(!1),r=_e(),u=Ue("userData"),c=p([]),_=p([]),w=p(null),x=p(null),g=p([]);var S="Bekleyen Eşanjör: ";const f=p(!0),D=p(!0),O=p(!0),R=p(""),I=p("tab-1"),A=p(""),$=p([]),T=p(null);Pe(()=>{r.setTitle(S),k(),T.value=setInterval(()=>{k()},5e3)}),Ke(()=>{T.value&&clearInterval(T.value)});const ue=async()=>{if(g.value.length===0){ie("Önce iş emrini seçmelisiniz...","warning",1500);return}try{const o=await C.get("/api/sebep-list",{params:{tur:"h"}});$.value=o.data.map(i=>i.SEBEP)}catch(o){console.error("Sebep listesi yüklenirken hata oluştu:",o)}A.value="",O.value=!0,n.value=!0},ce={width:100,type:"success",text:"Kaydet",stylingMode:"contained"},pe={width:100,type:"normal",text:"Vazgeç",stylingMode:"contained",onClick:()=>{n.value=!1}},me=o=>{g.value=o.selectedRowsData},he=async()=>{O.value?R.value="u":R.value="h";const o=g.value.map(i=>({tur:R.value,id:Number(i.ID),esanjorID:i.ESANJORID,urunID:Number(i.URUNID),isemriID:Number(i.ISEMRIID),barkod:String(i.BARKOD),sebep:A.value,operasyon:i.OPERASYON,userID:u.value.id}));try{const i=await C.post("/api/reworksSonuc",{updateData:o});k(),g.value=[],fe(),n.value=!1,ie("Kayıt başarıyla güncellendi...","success",1500)}catch(i){console.error("Güncelleme sırasında hata oluştu:",i)}},fe=()=>{w.value.instance.clearSelection()},k=()=>{C.get("/api/getReworks").then(o=>{c.value=o.data.reworks,_.value=o.data.ciktilar;const i=ve(o.data.toplamGirdi).toString();r.setToplam(i),D.value=!1}).catch(o=>{console.error("Veri çekilirken hata oluştu: ",o)})},U=(o,i)=>{const y=i.data.DURUM,s=(m,Qe)=>{const v=document.createElement("span");return v.className="dx-icon dx-icon-isnotblank",v.style.marginRight="8px",v.style.marginTop="8px",v.style.color=m,v.style.fontSize="16",v.style.display="inline-flex",v};if(o.innerText=i.text,y==="Beklemede"){const m=s("orange");o.insertBefore(m,o.firstChild)}else if(y==="Uygun"){const m=s("limegreen");o.insertBefore(m,o.firstChild)}else{const m=s("red");o.insertBefore(m,o.firstChild)}},ge=o=>{const i=new Ge.Workbook,y=i.addWorksheet("EsanjorReworks");ze({component:o.component,worksheet:y,autoFilterEnabled:!0}).then(()=>{i.xlsx.writeBuffer().then(s=>{Fe(new Blob([s],{type:"application/octet-stream"}),"EsanjorReworks.xlsx")})}),o.cancel=!0},P=()=>{f.value=!f.value};function ve(o){return new Intl.NumberFormat("tr-TR").format(o)}return(o,i)=>{const y=be;return B(),He(Me,null,[e(je,{class:"pa-1 ps-0 ma-0"},{default:l(()=>[e(We,{modelValue:I.value,"onUpdate:modelValue":i[0]||(i[0]=s=>I.value=s),class:"v-tabs-pill","fixed-tabs":""},{default:l(()=>[e(oe,null,{default:l(()=>[te(" Girdiler ")]),_:1}),e(oe,null,{default:l(()=>[te(" Çıktılar ")]),_:1})]),_:1},8,["modelValue"]),e(Le,{modelValue:I.value,"onUpdate:modelValue":i[1]||(i[1]=s=>I.value=s)},{default:l(()=>[e(se,{value:"tab-1"},{default:l(()=>[e(le,{class:"tab pa-0"},{default:l(()=>[e(t(K),{class:"grid",ref_key:"dataGridRef",ref:w,"data-source":c.value,"key-expr":"ID","show-borders":!0,"focused-row-enabled":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget","selected-rows-keys":g.value,onSelectionChanged:me},{aktifTemplate:l(({data:s})=>[s.value==="0"||s.value===0?(B(),ae(ne,{key:0,size:"24",icon:"tabler-x"})):(B(),ae(ne,{key:1,size:"24",icon:"tabler-check"}))]),sonuclandirTemplate:l(()=>[e(t(N),{icon:"optionsgear",hint:"sonuçlandır",width:"150",text:"Sonuçlandır",height:"40","styling-mode":"text",onClick:ue})]),collapseTemplate:l(()=>[e(t(N),{icon:f.value?"collapse":"expand",hint:"expandAll ? 'Daralt' : 'Genişlet'",width:"40",height:"40","styling-mode":"text",onClick:P},null,8,["icon"])]),default:l(()=>[e(t(d),{"data-field":"DURUM",caption:"DURUM","data-type":"string",visible:!1,width:300,"cell-template":U,"sort-order":"asc"}),e(t(d),{"data-field":"ID","data-type":"number",caption:"ID",visible:!1,"sort-order":"desc",width:80}),e(t(d),{"data-field":"OPERASYON",caption:"OPERASYON ADI","data-type":"string",visible:!1,"min-width":130}),e(t(d),{"data-field":"OPERASYON_TANIMI",caption:"OPERASYON","data-type":"string",visible:!0,"min-width":200,"group-index":0}),e(t(d),{"data-field":"URUNID",caption:"ÜRÜN ID",visible:!0,"data-type":"number",width:110}),e(t(d),{"data-field":"URUNKODU",caption:"ÜRÜN KODU",visible:!0,"data-type":"number",width:150}),e(t(d),{"data-field":"URUNADI",caption:"ÜRÜN ADI",visible:!0,"data-type":"string",width:200}),e(t(d),{"data-field":"ESANJORID",caption:"EŞJ ID","data-type":"number",visible:!1,width:120}),e(t(d),{"data-field":"BARKOD",caption:"BARKOD","data-type":"string",width:120}),e(t(d),{"data-field":"KARANTINASEBEP",caption:"KARANTİNA SEBEP","data-type":"string","min-width":150}),e(t(d),{"data-field":"KARANTINATARIH",caption:"KARANTİNA TARİH","data-type":"date",width:180,visible:!0,format:{formatter:s=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(s)).replace(/\//g,".")}},null,8,["format"]),e(t(xe),{mode:"multiple","select-all-mode":"page","show-check-boxes-mode":"onClick"}),e(t(H),{visible:!0}),e(t(M),{"auto-expand-all":f.value},null,8,["auto-expand-all"]),e(t(G),{enabled:D.value},null,8,["enabled"]),e(t(z),{mode:"virtual","column-rendering-mode":"virtual"}),e(t(F),{visible:!0}),e(t(W),{visible:!0,width:240,placeholder:"Ara..."}),e(t(De),{height:"540px",enabled:!0},{default:l(()=>[e(t(ye),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),e(t(Oe),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1}),e(t(L),null,{default:l(()=>[e(t(j),{column:"BARKOD","summary-type":"count","display-format":"{0} adet"}),e(t(Y),{"show-in-group-footer":!1,"align-by-column":!0,column:"BARKOD","summary-type":"count","display-format":"{0} adet"})]),_:1}),e(t(X),null,{default:l(()=>[e(t(h),{name:"groupPanel"}),e(t(h),{location:"before","locate-in-menu":"auto",template:"collapseTemplate"}),e(t(h),{location:"before","locate-in-menu":"auto",template:"sonuclandirTemplate"}),e(t(h),{name:"columnChooserButton"}),e(t(h),{name:"searchPanel"})]),_:1})]),_:1},8,["data-source","selected-rows-keys"])]),_:1})]),_:1}),e(se,{value:"tab-2"},{default:l(()=>[e(le,{class:"tab pa-0"},{default:l(()=>[e(t(K),{class:"grid",ref_key:"dataGridRef1",ref:x,"data-source":_.value,"key-expr":"ID","show-borders":!0,"focused-row-enabled":!0,"allow-column-resizing":!0,onExporting:ge,"column-resizing-mode":"widget"},{collapseTemplate1:l(()=>[e(t(N),{icon:f.value?"collapse":"expand",hint:"expandAll ? 'Daralt' : 'Genişlet'",width:"40",height:"40","styling-mode":"text",onClick:P},null,8,["icon"])]),default:l(()=>[e(t(d),{"data-field":"DURUM",caption:"DURUM","data-type":"string",visible:!0,width:130,"cell-template":U,"sort-order":"asc"}),e(t(d),{"data-field":"ID","data-type":"number",caption:"ID",visible:!1,"sort-order":"desc",width:80}),e(t(d),{"data-field":"OPERASYON",caption:"OPERASYON ADI","data-type":"string",visible:!1,"min-width":130}),e(t(d),{"data-field":"OPERASYON_TANIMI",caption:"OPERASYON","data-type":"string",visible:!0,"min-width":130}),e(t(d),{"data-field":"URUNID",caption:"URUN ID",visible:!1,"data-type":"number",width:110}),e(t(d),{"data-field":"ESANJORID",caption:"EŞJ ID","data-type":"number",visible:!1,width:120}),e(t(d),{"data-field":"BARKOD",caption:"BARKOD","data-type":"string",width:120}),e(t(d),{"data-field":"KARANTINASEBEP",caption:"KARANTİNA SEBEP","data-type":"string","min-width":150}),e(t(d),{"data-field":"KARANTINATARIH",caption:"KRNTNA TARİH","data-type":"date",width:150,visible:!0,format:{formatter:s=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(s)).replace(/\//g,".")}},null,8,["format"]),e(t(d),{"data-field":"REWORKTARIH",caption:"REWORK TARİH","data-type":"date",width:150,"sort-order":"desc",visible:!0,format:{formatter:s=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(s)).replace(/\//g,".")}},null,8,["format"]),e(t(d),{"data-field":"ISKARTASEBEP",caption:"ISKARTA SEBEP","data-type":"string","min-width":150}),e(t(H),{visible:!0}),e(t(M),{"auto-expand-all":f.value},null,8,["auto-expand-all"]),e(t(G),{enabled:D.value},null,8,["enabled"]),e(t(z),{mode:"virtual","column-rendering-mode":"virtual"}),e(t(F),{visible:!0}),e(t(W),{visible:!0,width:240,placeholder:"Ara..."}),e(t(Se),{enabled:!0}),e(t(L),null,{default:l(()=>[e(t(j),{column:"BARKOD","summary-type":"count","display-format":"{0} adet"}),e(t(Y),{"show-in-group-footer":!1,"align-by-column":!0,column:"BARKOD","summary-type":"count","display-format":"{0} adet"})]),_:1}),e(t(X),null,{default:l(()=>[e(t(h),{name:"groupPanel"}),e(t(h),{location:"before","locate-in-menu":"auto",template:"collapseTemplate1"}),e(t(h),{name:"columnChooserButton"}),e(t(h),{name:"exportButton"}),e(t(h),{name:"searchPanel"})]),_:1})]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(t(Ie),{visible:n.value,"onUpdate:visible":i[5]||(i[5]=s=>n.value=s),width:450,height:300,"hide-on-outside-click":!1,"show-close-button":!1,title:"Sonucu Giriniz"},{content:l(()=>[e(re,{cols:"12"},{default:l(()=>[V("div",Xe,[Je,e(t(Ye),{value:O.value,"onUpdate:value":i[2]||(i[2]=s=>O.value=s)},null,8,["value"]),qe])]),_:1}),e(re,{cols:"12",class:"mt-2"},{default:l(()=>[e(y,{modelValue:A.value,"onUpdate:modelValue":i[3]||(i[3]=s=>A.value=s),disabled:O.value,placeholder:"Sebep Giriniz...",items:$.value},null,8,["modelValue","disabled","items"])]),_:1})]),default:l(()=>[e(t(J),{widget:"dxButton",toolbar:"bottom",location:"center",options:ce,onClick:i[4]||(i[4]=s=>he())}),e(t(J),{widget:"dxButton",toolbar:"bottom",location:"center",options:pe})]),_:1},8,["visible"])],64)}}});export{Mt as default};
