import{a as b}from"./axios-CCb-kr4I.js";import{d as Ze,S as $e,e as p,D as je,J as U,g as Ye,K as He,M as We,N as r,a as d,f as E,P as Je,Q as Qe,G as Xe,j as qe,c as et,H as tt,I as lt,h as at,i as nt,k as it,T as ot,U as ut,l as rt,m as dt,n as st,o as pt,V as ct,W as mt,X as ft,Y as gt}from"./data-grid-bcHRWDWG.js";import{D as bt,n as h,e as ht,a as It,s as Ot}from"./FileSaver-DOHanaSG.js";import{d as J,ba as Dt,w as P,r as c,o as x,g as N,f as i,b as t,e as _,v as St,a$ as vt,ai as j,t as Y,a_ as yt,b2 as H,E as xt,$ as Kt,c as Tt,n as l,F as Et,V as L}from"./main-C8N3ebfR.js";import{u as Nt}from"./pageTitle-DZX-JdGE.js";import{S as k}from"./sweetalert2.esm.all-D3pEHXw3.js";import{_ as At}from"./AppTextField.vue_vue_type_script_setup_true_lang-CCQlRy82.js";import{_ as Ct}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-FsMzl0xv.js";import{a as Lt,b as kt,V as Q}from"./VCard-BdrtuRPD.js";import{V as Rt}from"./VCardText-ARgIvpol.js";import{V as wt}from"./VForm-fzztflmy.js";import{V as Mt,a as z}from"./VRow-Z9fbV_da.js";import{V as Bt}from"./VDialog-NnKSe6Uq.js";import"./extends-CF3RwP-h.js";import"./_commonjsHelpers-BosuxZz1.js";import"./form-5pC8GpCN.js";import"./VTextField-Bg92Kq3L.js";/* empty css                   */import"./VCounter-D0vsA7b8.js";import"./VImg-BEBs2K_P.js";import"./VField-Bs77dQvg.js";import"./easing-CjukEv2V.js";import"./VInput-WOzMkRuC.js";import"./forwardRefs-C-GTDzx5.js";import"./VAvatar-DY8J7Y8l.js";/* empty css              */import"./VOverlay-BeTVZ1OA.js";import"./delay-CiPbFjzB.js";import"./lazy-BQ6JzVrR.js";import"./scopeId-Cdi8TwQm.js";import"./dialog-transition-UqIsVCnT.js";/*!
 * devextreme-vue
 * Version: 24.1.6
 * Build date: Sat Sep 14 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const W=Ze({props:{acceptCustomValue:Boolean,accessKey:String,activeStateEnabled:Boolean,buttons:Array,customItemCreateEvent:String,dataSource:{},deferRendering:Boolean,disabled:Boolean,displayExpr:[Function,String],displayValue:String,dropDownButtonTemplate:{},dropDownOptions:Object,elementAttr:Object,fieldTemplate:{},focusStateEnabled:Boolean,grouped:Boolean,groupTemplate:{},height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,inputAttr:{},isDirty:Boolean,isValid:Boolean,items:Array,itemTemplate:{},label:String,labelMode:String,maxLength:[Number,String],minSearchLength:Number,name:String,noDataText:String,onChange:Function,onClosed:Function,onContentReady:Function,onCopy:Function,onCustomItemCreating:Function,onCut:Function,onDisposing:Function,onEnterKey:Function,onFocusIn:Function,onFocusOut:Function,onInitialized:Function,onInput:Function,onItemClick:Function,onKeyDown:Function,onKeyUp:Function,onOpened:Function,onOptionChanged:Function,onPaste:Function,onSelectionChanged:Function,onValueChanged:Function,opened:Boolean,openOnFieldClick:Boolean,placeholder:String,readOnly:Boolean,rtlEnabled:Boolean,searchEnabled:Boolean,searchExpr:[Array,Function,String],searchMode:String,searchTimeout:Number,selectedItem:{},showClearButton:Boolean,showDataBeforeSearch:Boolean,showDropDownButton:Boolean,showSelectionControls:Boolean,spellcheck:Boolean,stylingMode:String,tabIndex:Number,text:String,useItemTextAsTitle:Boolean,validationError:{},validationErrors:Array,validationMessageMode:String,validationMessagePosition:String,validationStatus:String,value:{},valueChangeEvent:String,valueExpr:[Function,String],visible:Boolean,width:[Function,Number,String],wrapItemText:Boolean},emits:{"update:isActive":null,"update:hoveredElement":null,"update:acceptCustomValue":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:buttons":null,"update:customItemCreateEvent":null,"update:dataSource":null,"update:deferRendering":null,"update:disabled":null,"update:displayExpr":null,"update:displayValue":null,"update:dropDownButtonTemplate":null,"update:dropDownOptions":null,"update:elementAttr":null,"update:fieldTemplate":null,"update:focusStateEnabled":null,"update:grouped":null,"update:groupTemplate":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:inputAttr":null,"update:isDirty":null,"update:isValid":null,"update:items":null,"update:itemTemplate":null,"update:label":null,"update:labelMode":null,"update:maxLength":null,"update:minSearchLength":null,"update:name":null,"update:noDataText":null,"update:onChange":null,"update:onClosed":null,"update:onContentReady":null,"update:onCopy":null,"update:onCustomItemCreating":null,"update:onCut":null,"update:onDisposing":null,"update:onEnterKey":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onInitialized":null,"update:onInput":null,"update:onItemClick":null,"update:onKeyDown":null,"update:onKeyUp":null,"update:onOpened":null,"update:onOptionChanged":null,"update:onPaste":null,"update:onSelectionChanged":null,"update:onValueChanged":null,"update:opened":null,"update:openOnFieldClick":null,"update:placeholder":null,"update:readOnly":null,"update:rtlEnabled":null,"update:searchEnabled":null,"update:searchExpr":null,"update:searchMode":null,"update:searchTimeout":null,"update:selectedItem":null,"update:showClearButton":null,"update:showDataBeforeSearch":null,"update:showDropDownButton":null,"update:showSelectionControls":null,"update:spellcheck":null,"update:stylingMode":null,"update:tabIndex":null,"update:text":null,"update:useItemTextAsTitle":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationMessagePosition":null,"update:validationStatus":null,"update:value":null,"update:valueChangeEvent":null,"update:valueExpr":null,"update:visible":null,"update:width":null,"update:wrapItemText":null},model:{prop:"value",event:"update:value"},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=$e,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={button:{isCollectionItem:!0,optionName:"buttons"},dropDownOptions:{isCollectionItem:!1,optionName:"dropDownOptions"},item:{isCollectionItem:!0,optionName:"items"}}}}),X=p({emits:{"update:isActive":null,"update:hoveredElement":null,"update:hide":null,"update:show":null},props:{hide:[Object,Number,String],show:[Object,Number,String]}});X.$_optionName="animation";X.$_expectedChildren={hide:{isCollectionItem:!1,optionName:"hide"},show:{isCollectionItem:!1,optionName:"show"}};const Ft=p({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});Ft.$_optionName="at";const _t=p({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}});_t.$_optionName="boundaryOffset";const G=p({emits:{"update:isActive":null,"update:hoveredElement":null,"update:location":null,"update:name":null,"update:options":null},props:{location:String,name:String,options:Object}});G.$_optionName="buttons";G.$_isCollectionItem=!0;G.$_expectedChildren={options:{isCollectionItem:!1,optionName:"options"}};const Vt=p({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});Vt.$_optionName="collision";const q=p({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:animation":null,"update:bindingOptions":null,"update:closeOnOutsideClick":null,"update:container":null,"update:contentTemplate":null,"update:deferRendering":null,"update:disabled":null,"update:dragAndResizeArea":null,"update:dragEnabled":null,"update:dragOutsideBoundary":null,"update:enableBodyScroll":null,"update:focusStateEnabled":null,"update:fullScreen":null,"update:height":null,"update:hideOnOutsideClick":null,"update:hideOnParentScroll":null,"update:hint":null,"update:hoverStateEnabled":null,"update:maxHeight":null,"update:maxWidth":null,"update:minHeight":null,"update:minWidth":null,"update:onContentReady":null,"update:onDisposing":null,"update:onHidden":null,"update:onHiding":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onResize":null,"update:onResizeEnd":null,"update:onResizeStart":null,"update:onShowing":null,"update:onShown":null,"update:onTitleRendered":null,"update:position":null,"update:resizeEnabled":null,"update:restorePosition":null,"update:rtlEnabled":null,"update:shading":null,"update:shadingColor":null,"update:showCloseButton":null,"update:showTitle":null,"update:tabIndex":null,"update:title":null,"update:titleTemplate":null,"update:toolbarItems":null,"update:visible":null,"update:width":null,"update:wrapperAttr":null},props:{accessKey:String,animation:Object,bindingOptions:Object,closeOnOutsideClick:[Boolean,Function],container:{},contentTemplate:{},deferRendering:Boolean,disabled:Boolean,dragAndResizeArea:{},dragEnabled:Boolean,dragOutsideBoundary:Boolean,enableBodyScroll:Boolean,focusStateEnabled:Boolean,fullScreen:Boolean,height:[Function,Number,String],hideOnOutsideClick:[Boolean,Function],hideOnParentScroll:Boolean,hint:String,hoverStateEnabled:Boolean,maxHeight:[Function,Number,String],maxWidth:[Function,Number,String],minHeight:[Function,Number,String],minWidth:[Function,Number,String],onContentReady:Function,onDisposing:Function,onHidden:Function,onHiding:Function,onInitialized:Function,onOptionChanged:Function,onResize:Function,onResizeEnd:Function,onResizeStart:Function,onShowing:Function,onShown:Function,onTitleRendered:Function,position:[Function,Object,String],resizeEnabled:Boolean,restorePosition:Boolean,rtlEnabled:Boolean,shading:Boolean,shadingColor:String,showCloseButton:Boolean,showTitle:Boolean,tabIndex:Number,title:String,titleTemplate:{},toolbarItems:Array,visible:Boolean,width:[Function,Number,String],wrapperAttr:{}}});q.$_optionName="dropDownOptions";q.$_expectedChildren={animation:{isCollectionItem:!1,optionName:"animation"},position:{isCollectionItem:!1,optionName:"position"},toolbarItem:{isCollectionItem:!0,optionName:"toolbarItems"}};const ee=p({emits:{"update:isActive":null,"update:hoveredElement":null,"update:left":null,"update:opacity":null,"update:position":null,"update:scale":null,"update:top":null},props:{left:Number,opacity:Number,position:Object,scale:Number,top:Number}});ee.$_optionName="from";ee.$_expectedChildren={position:{isCollectionItem:!1,optionName:"position"}};const te=p({emits:{"update:isActive":null,"update:hoveredElement":null,"update:complete":null,"update:delay":null,"update:direction":null,"update:duration":null,"update:easing":null,"update:from":null,"update:staggerDelay":null,"update:start":null,"update:to":null,"update:type":null},props:{complete:Function,delay:Number,direction:String,duration:Number,easing:String,from:Object,staggerDelay:Number,start:Function,to:Object,type:String}});te.$_optionName="hide";te.$_expectedChildren={from:{isCollectionItem:!1,optionName:"from"},to:{isCollectionItem:!1,optionName:"to"}};const le=p({emits:{"update:isActive":null,"update:hoveredElement":null,"update:disabled":null,"update:html":null,"update:template":null,"update:text":null,"update:visible":null},props:{disabled:Boolean,html:String,template:{},text:String,visible:Boolean}});le.$_optionName="items";le.$_isCollectionItem=!0;const Ut=p({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});Ut.$_optionName="my";const zt=p({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}});zt.$_optionName="offset";const Pt=p({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:bindingOptions":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:icon":null,"update:onClick":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:rtlEnabled":null,"update:stylingMode":null,"update:tabIndex":null,"update:template":null,"update:text":null,"update:type":null,"update:useSubmitBehavior":null,"update:validationGroup":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,bindingOptions:Object,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Function,Number,String]}});Pt.$_optionName="options";const Gt=p({emits:{"update:isActive":null,"update:hoveredElement":null,"update:at":null,"update:boundary":null,"update:boundaryOffset":null,"update:collision":null,"update:my":null,"update:of":null,"update:offset":null},props:{at:[Object,String],boundary:{},boundaryOffset:[Object,String],collision:[Object,String],my:[Object,String],of:{},offset:[Object,String]}});Gt.$_optionName="position";const Zt=p({emits:{"update:isActive":null,"update:hoveredElement":null,"update:complete":null,"update:delay":null,"update:direction":null,"update:duration":null,"update:easing":null,"update:from":null,"update:staggerDelay":null,"update:start":null,"update:to":null,"update:type":null},props:{complete:Function,delay:Number,direction:String,duration:Number,easing:String,from:Object,staggerDelay:Number,start:Function,to:Object,type:String}});Zt.$_optionName="show";const $t=p({emits:{"update:isActive":null,"update:hoveredElement":null,"update:left":null,"update:opacity":null,"update:position":null,"update:scale":null,"update:top":null},props:{left:Number,opacity:Number,position:Object,scale:Number,top:Number}});$t.$_optionName="to";const ae=p({emits:{"update:isActive":null,"update:hoveredElement":null,"update:cssClass":null,"update:disabled":null,"update:html":null,"update:locateInMenu":null,"update:location":null,"update:menuItemTemplate":null,"update:options":null,"update:showText":null,"update:template":null,"update:text":null,"update:toolbar":null,"update:visible":null,"update:widget":null},props:{cssClass:String,disabled:Boolean,html:String,locateInMenu:String,location:String,menuItemTemplate:{},options:{},showText:String,template:{},text:String,toolbar:String,visible:Boolean,widget:String}});ae.$_optionName="toolbarItems";ae.$_isCollectionItem=!0;const jt={class:"text-h4 mb-2"},Yt=_("p",{class:"text-body-1 mb-0"}," Üretim ve Iskarta miktarlarını giriniz... ",-1),Ht=_("h6",{class:"text-h6 mb-2 ms-3"}," Üretim ",-1),Wt=_("h6",{class:"text-h6 mb-2 ms-3"}," Iskarta ",-1),Jt=J({__name:"UretimGir",props:{cardDetails:{default:()=>({planMiktar:0,miktar:0,miktarTemp:0,id:0,ieId:0,userId:0,tur:"",iskarta:0})},isDialogVisible:{type:Boolean}},emits:["submit","update:isDialogVisible"],setup(Z,{emit:V}){const D=Z,K=V,o=Dt({...D.cardDetails});P(()=>D.cardDetails,m=>{Object.assign(o,m)});const S=c(null),M=c(null);P(()=>D.isDialogVisible,async m=>{var s;m&&(await yt(),(s=S.value)==null||s.focus())});const v=()=>{o.miktar===null||o.miktar===0||(o.tur!==" (düzeltme)"?B(o.miktar,o.iskarta):T(o.miktar,o.miktarTemp,o.ieId,o.iskarta),K("submit",o),K("update:isDialogVisible",!1))},B=async(m,s)=>{try{await b.put("/api/uretimekle",{userId:o.userId,kayitID:o.id,miktar:m,miktarTemp:o.miktarTemp,planMiktar:o.planMiktar,iskarta:s}),A()}catch(y){console.error("Veri eklenirken hata oluştu:",y)}},T=async(m,s,y,I)=>{try{await b.put("/api/uretimduzelt",{userID:o.userId,kayitID:o.id,ieId:y,miktar:m,miktarTemp:s,iskarta:I}),A()}catch(u){console.error("Veri güncellenirken hata oluştu:",u)}},A=()=>{Object.assign(o,{miktar:0,miktarTemp:0,iskarta:0})},C=m=>{A(),K("update:isDialogVisible",m)};return(m,s)=>{const y=Ct,I=At;return x(),N(Bt,{width:m.$vuetify.display.smAndDown?"auto":500,"model-value":D.isDialogVisible,"onUpdate:modelValue":C},{default:i(()=>[t(y,{onClick:s[0]||(s[0]=u=>C(!1))}),t(Q,{class:"pa-2 pa-sm-10"},{default:i(()=>[t(Lt,{class:"text-center"},{default:i(()=>[t(kt,null,{default:i(()=>[_("h4",jt," Üretim Girişi "+St(o.tur),1)]),_:1}),Yt]),_:1}),t(Rt,{class:"pt-6"},{default:i(()=>[t(wt,{onSubmit:vt(()=>{},["prevent"])},{default:i(()=>[t(Mt,null,{default:i(()=>[t(z,{cols:"12"},{default:i(()=>[Ht,t(I,{ref_key:"inputRef",ref:S,modelValue:o.miktar,"onUpdate:modelValue":s[1]||(s[1]=u=>o.miktar=u),type:"number",max:o.planMiktar-o.miktarTemp,min:0},null,8,["modelValue","max"])]),_:1}),t(z,{cols:"12"},{default:i(()=>[Wt,t(I,{ref_key:"inputRef1",ref:M,modelValue:o.iskarta,"onUpdate:modelValue":s[2]||(s[2]=u=>o.iskarta=u),type:"number"},null,8,["modelValue"])]),_:1}),t(z,{cols:"12",class:"text-center"},{default:i(()=>[t(j,{class:"me-4",type:"submit",onClick:v},{default:i(()=>[Y(" Kaydet ")]),_:1}),t(j,{color:"warning",variant:"tonal",onClick:s[3]||(s[3]=u=>C(!1))},{default:i(()=>[Y(" Vazgeç ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}}),Nl=J({__name:"isemirleri",setup(Z){const V=H("userAbilityRules").value||[];document.title="OFT - İş Emirleri";let D=!1,K=!1,o=!1;V.forEach((e,a)=>{e.action==="read"&&e.subject,e.action==="create"&&e.subject==="SuperAdmin"&&(D=!0),e.action==="update"&&e.subject==="SuperAdmin"&&(K=!0),e.action==="delete"&&e.subject==="SuperAdmin"&&(o=!0)});const S=c(!1),M=Nt(),v=H("userData"),B=c([]),T=c([]),A=c([]),C=c([]),m=c([]),s=c([]),y=c([]),I=c(null),u=c(null);var ne="Aktif İş Emri Sayısı: ";const F=c(!0);var $="0";const ie=[{value:"",text:"Gruplama Yok"},{value:"ISTASYONID",text:"İstasyona Göre Grupla"},{value:"MMLGRPKOD",text:"Modele Göre Grupla"}],oe=[{value:"0",text:"Açıklar"},{value:"1",text:"Kapanmışlar"},{value:"2",text:"Tümü"}],ue=e=>{I.value.instance.clearGrouping(),I.value.instance.columnOption(e.value,"groupIndex",0)},re=e=>{$=e.value,f()},de=()=>{F.value=!F.value},se=()=>{f(),h("Veriler Yenilendi","success",1500)};xt(()=>{pe(),f()});const f=()=>{b.get("/api/data",{params:{param:$}}).then(e=>{B.value=e.data.data,M.setTitle(ne),M.setToplam(ke(e.data.toplam).toString())}).catch(e=>{console.error("Veri çekilirken hata oluştu: ",e)})},pe=()=>{b.get("/api/veri").then(e=>{y.value=e.data.istasyon,A.value=e.data.mamulGrup,C.value=e.data.mamulOz1,m.value=e.data.mamulOz2,s.value=e.data.mamulOz3,T.value=e.data.kod}).catch(e=>{console.error("Mamul verileri çekilirken hata oluştu: ",e)})},ce=e=>{if(e.parentType==="dataRow"&&e.dataField==="OZELLIKKOD1"){const a=e.row.data.ISTASYONID===void 0;e.editorOptions.disabled=a}if(e.parentType==="dataRow"&&e.dataField==="MMLGRPKOD"){const a=e.row.data.OZELLIKKOD1===void 0;e.editorOptions.disabled=a}if(e.parentType==="dataRow"&&e.dataField==="OZELLIKKOD2"){const a=e.row.data.OZELLIKKOD2===void 0;e.editorOptions.disabled=a}if(e.parentType==="dataRow"&&e.dataField==="OZELLIKKOD3"){const a=e.row.data.OZELLIKKOD3===void 0;e.editorOptions.disabled=a}if(e.parentType==="dataRow"&&e.dataField==="KOD"){const a=e.row.data.KOD===void 0;e.editorOptions.disabled=a}if(e.parentType==="dataRow"&&e.dataField==="TANIM"){const a=e.row.data.TANIM===void 0;e.editorOptions.disabled=a}},me=e=>{e.data.URETIMMIKTAR>0&&(h("Üretim girilmiş iş emri silinemez!","success",1500),e.cancel=!0)},fe=e=>{b.get("/sanctum/csrf-cookie").then(()=>{b.put(`/api/datasil/${e.key}`,e.data,{headers:{userID:v.value.ID}}).then(a=>{f()}).catch(a=>{console.error("Veri silinirken hata oluştu: ",a)})})},ge=e=>{b.put(`/api/data/emir-duzelt/${e.key}`,e.data,{headers:{userID:v.value.id}}).then(a=>{f()}).catch(a=>{console.error("Veri güncellenirken hata oluştu: ",a)})},be=e=>{b.post("/api/data/emir-kaydet",e.data,{headers:{userID:v.value.id}}).then(a=>{f()}).catch(a=>{console.error("Veri eklenirken hata oluştu: ",a)})},he=e=>{e.data.PLANLANANMIKTAR=0,e.data.NOTLAR="",e.data.DURUM="Beklemede",e.data.AKTIF=!0},Ie=e=>{e.rowType==="data"&&e.column.dataField==="DURUM"&&(e.data.DURUM=="Üretildi"&&(e.cellElement.style.color="white",e.cellElement.style.fontWeight="bold",e.cellElement.style.backgroundColor="#65b687"),e.data.DURUM=="İptal"&&(e.cellElement.style.color="white",e.cellElement.style.fontWeight="bold",e.cellElement.style.backgroundColor="#c15353"),e.data.DURUM=="Üretimde"&&(e.cellElement.style.color="white",e.cellElement.style.fontWeight="bold",e.cellElement.style.backgroundColor="#7167e8"),e.data.DURUM=="Beklemede"&&(e.cellElement.style.color="white",e.cellElement.style.fontWeight="bold",e.cellElement.style.backgroundColor="#e2c044"))},Oe=e=>({store:C.value,filter:e.data?["ISTASYONID","=",e.data.ISTASYONID]:null}),De=e=>({store:A.value,filter:e.data?[["ISTASYONID","=",e.data.ISTASYONID],"and",["OZELLIKKOD1","=",e.data.OZELLIKKOD1]]:null}),Se=e=>({store:m.value,filter:e.data?[["ISTASYONID","=",e.data.ISTASYONID],"and",["OZELLIKKOD1","=",e.data.OZELLIKKOD1],"and",["MMLGRPKOD","=",e.data.MMLGRPKOD]]:null}),ve=e=>({store:s.value,filter:e.data?[["ISTASYONID","=",e.data.ISTASYONID],"and",["OZELLIKKOD1","=",e.data.OZELLIKKOD1],"and",["MMLGRPKOD","=",e.data.MMLGRPKOD],"and",["OZELLIKKOD2","=",e.data.OZELLIKKOD2]]:null}),ye=e=>({store:T.value,filter:e.data?[["ISTASYONID","=",e.data.ISTASYONID],"and",["OZELLIKKOD1","=",e.data.OZELLIKKOD1],"and",["MMLGRPKOD","=",e.data.MMLGRPKOD],"and",["OZELLIKKOD2","=",e.data.OZELLIKKOD2],"and",["OZELLIKKOD3","=",e.data.OZELLIKKOD3]]:null}),xe=e=>({store:T.value,filter:e.data?[["ISTASYONID","=",e.data.ISTASYONID],"and",["OZELLIKKOD1","=",e.data.OZELLIKKOD1],"and",["MMLGRPKOD","=",e.data.MMLGRPKOD],"and",["OZELLIKKOD2","=",e.data.OZELLIKKOD2],"and",["OZELLIKKOD3","=",e.data.OZELLIKKOD3]]:null});function Ke(e,a,n){const g=[];g.push(...T.value);const O=g.find(w=>w.KOD===a&&w.ISTASYONID===n.ISTASYONID);e.TANIM=O?O.TANIM:null,e.URUNID=O?O.ID:null,this.defaultSetCellValue(e,a,n)}function Te(e,a,n){const g=[];g.push(...T.value);const O=g.find(w=>w.TANIM===a&&w.ISTASYONID===n.ISTASYONID);e.KOD=O?O.KOD:null,e.URUNID=O?O.ID:null,this.defaultSetCellValue(e,a,n)}function Ee(e,a,n){e.OZELLIKKOD1=null,e.MMLGRPKOD=null,e.OZELLIKKOD2=null,e.OZELLIKKOD3=null,e.KOD=null,e.TANIM=null,this.defaultSetCellValue(e,a,n)}function Ne(e,a,n){e.MMLGRPKOD=null,e.OZELLIKKOD2=null,e.OZELLIKKOD3=null,e.KOD=null,e.TANIM=null,this.defaultSetCellValue(e,a,n)}function Ae(e,a,n){e.OZELLIKKOD2=null,e.OZELLIKKOD3=null,e.KOD=null,e.TANIM=null,this.defaultSetCellValue(e,a,n)}function Ce(e,a,n){e.OZELLIKKOD3=null,e.KOD=null,e.TANIM=null,this.defaultSetCellValue(e,a,n)}function Le(e,a,n){e.KOD=null,e.TANIM=null,this.defaultSetCellValue(e,a,n)}c({conn:"ddd"});const ke=e=>new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0}).format(e),Re={of:window,at:"top",my:"top",offset:{y:10}},we={placeholder:"Sütun ara"},Me=e=>{e.component.option("loadPanel.enabled",!1)},Be=e=>{const a=new ht.Workbook,n=a.addWorksheet("IsEmirleri");It({component:e.component,worksheet:n,autoFilterEnabled:!0}).then(()=>{a.xlsx.writeBuffer().then(g=>{Ot(new Blob([g],{type:"application/octet-stream"}),"IsEmirleri.xlsx")})}),e.cancel=!0};function Fe(e){u.value={ID:e.row.data.ID,URETIMMIKTAR:e.row.data.URETIMMIKTAR,ISEMRIID:e.row.data.ISEMRIID,PLANLANANMIKTAR:e.row.data.PLANLANANMIKTAR}}const _e=[{text:"Yenile"},{text:"Üretim Gir",visible:D},{text:"Sil",visible:o},{text:"Durum Değiştir",visible:K,items:[{text:"Üretimde"},{text:"Beklemede"},{text:"Tamamlandı"},{text:"İptal"}]},{text:"Grid Düzenini Sıfırla"}];function Ve({itemData:e}){if(!(e!=null&&e.items))switch(e==null?void 0:e.text){case"Yenile":f(),h("Veriler Yenilendi","success",1500);break;case"Üretim Gir":if(parseInt(u.value.PLANLANANMIKTAR)<=parseInt(u.value.URETIMMIKTAR)){k.fire({title:"Olamaz....",confirmButtonColor:"#88efb3",text:"Gereken üretim zaten yapılmış!",icon:"error"});return}Ue(u.value.ID),h("Veriler Yenilendi","success",1500);break;case"Üretimde":R(u.value.ID,"Üretimde"),f(),h("Durum değiştirildi","success",1500);break;case"Beklemede":R(u.value.ID,"Beklemede"),f(),h("Durum değiştirildi","success",1500);break;case"Tamamlandı":const a=k.mixin({customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-error"},buttonsStyling:!0});parseInt(u.value.URETIMMIKTAR)<parseInt(u.value.PLANLANANMIKTAR)?a.fire({title:"Aaaaaaa...",text:"Üretim tamamlanmamış! Emin misiniz?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#88efb3",cancelButtonColor:"#ed9595",reverseButtons:!0,confirmButtonText:"Evet, kapat gitsin!",cancelButtonText:"Hayır, şaka yaptım :)"}).then(g=>{g.isConfirmed&&(R(u.value.ID,"Tamamlandı"),f(),h("İş Emri kapatıldı!","success",1500))}):(R(u.value.ID,"Tamamlandı"),f(),h("İş Emri kapatıldı!","success",1500));break;case"İptal":if(parseInt(u.value.URETIMMIKTAR)>0){k.fire({title:"Olamaz...",confirmButtonColor:"#88efb3",text:"Üretim yapılmış iş emri İptal edilemez!",icon:"error",footer:"Ama Tamamlandı yapabilirsiniz :)"});return}R(u.value.ID,"İptal"),f(),h("Durum değiştirildi","success",1500);break;case"Sil":if(parseInt(u.value.URETIMMIKTAR)>0){k.fire({title:"Olamaz...",confirmButtonColor:"#88efb3",text:"Üretim yapılmış iş emri silinemez!",icon:"error"});return}const n=k.mixin({customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-error"},buttonsStyling:!0});n.fire({title:"Emin misiniz?",text:"Geri alınamaz!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#88efb3",cancelButtonColor:"#ed9595",reverseButtons:!0,confirmButtonText:"Evet, sil gitsin!",cancelButtonText:"Hayır, kıyamam!"}).then(g=>{g.isConfirmed?(Pe(u.value.ID),n.fire({confirmButtonColor:"#88efb3",title:"Silindi!",text:"Kayıt silindi maalesef.",icon:"success"})):g.dismiss===k.DismissReason.cancel&&n.fire({confirmButtonColor:"#88efb3",title:"Vazgeçildi",text:"Kayıt güvende merak etmeyin :)",icon:"error"})});break;case"Grid Düzenini Sıfırla":Ge(),h("Düzen Sıfırlandı","success",1500);break}}function R(e,a){console.log(e,a),b.put(`/api/isemri/durum/${e}`,{durum:a},{headers:{userID:v.value.id}}).catch(n=>{console.error("Veri güncellenirken hata oluştu: ",n)})}function Ue(e){S.value=!S.value}c(null);const ze=Kt(()=>{const e=u.value||{},a=v.value||{};return{id:e.ID||0,userId:a.id||0,miktarTemp:e.URETIMMIKTAR||0,planMiktar:e.PLANLANANMIKTAR||0,tur:" (yeni)"}});P(S,(e,a)=>{!e&&a&&f()});const Pe=e=>{b.get("/sanctum/csrf-cookie").then(()=>{b.put(`/api/datasil/${e}`,{headers:{userID:v.value.ID}}).then(a=>{f()}).catch(a=>{console.error("Veri silinirken hata oluştu: ",a)})})},Ge=()=>{I.value.instance.state(null)};return(e,a)=>(x(),Tt(Et,null,[t(Q,{class:"pa-2"},{default:i(()=>[t(l(bt),{"data-source":_e,width:200,target:"#gridContainer",onItemClick:Ve}),t(l(je),{id:"gridContainer",ref_key:"dataGridRef",ref:I,onContentReady:Me,"data-source":B.value,"show-borders":!0,"key-expr":"ID",onEditorPreparing:ce,"show-column-lines":!1,"show-row-lines":!0,"row-alternation-enabled":!0,"allow-column-reordering":!0,"focused-row-enabled":!0,onRowRemoved:fe,onRowRemoving:me,"column-width":100,"allow-column-resizing":!0,onExporting:Be,"show-indicator":!0,onRowUpdated:ge,onRowInserted:be,onInitNewRow:he,onCellPrepared:Ie,"repaint-changes-only":!0,onContextMenuPreparing:Fe},{aktifTemplate:i(({data:n})=>[n.value==="0"||n.value===0?(x(),N(L,{key:0,size:"24",icon:"tabler-x"})):(x(),N(L,{key:1,size:"24",icon:"tabler-check"}))]),durumTemplate:i(({data:n})=>[n.value==="Üretimde"?(x(),N(L,{key:0,size:"20",icon:"tabler-bolt"})):n.value==="Üretildi"?(x(),N(L,{key:1,size:"20",icon:"tabler-check"})):n.value==="Beklemede"?(x(),N(L,{key:2,size:"20",icon:"tabler-clock"})):(x(),N(L,{key:3,size:"20",icon:"tabler-x"}))]),groupingTemplate:i(()=>[t(l(W),{width:"200",items:ie,"input-attr":{"aria-label":"Group"},"display-expr":"text","value-expr":"value",value:"",onValueChanged:ue})]),collapseTemplate:i(()=>[t(l(U),{text:F.value?"Grupları Daralt":"Grupları Aç",width:"136",onClick:de},null,8,["text"])]),emirlerTemplate:i(()=>[t(l(W),{width:"140",items:oe,"input-attr":{"aria-label":"DURUMU"},"display-expr":"text","value-expr":"value",value:"0",onValueChanged:re})]),refreshTemplate:i(()=>[t(l(U),{icon:"refresh",onClick:se})]),default:i(()=>[t(l(Ye),{"allow-updating":l(K),"allow-adding":l(D),"allow-deleting":l(o),"use-icons":!0,mode:"popup"},{default:i(()=>[t(l(He),{"show-title":!0,shading:!0,width:800,height:580,title:"İş Emri"}),t(l(We),null,{default:i(()=>[t(l(r),{"col-count":2,"col-span":2,"item-type":"group"},{default:i(()=>[t(l(r),{"data-field":"URUNID",visible:!1}),t(l(r),{"data-field":"ISTASYONID"}),t(l(r),{"data-field":"OZELLIKKOD1"}),t(l(r),{"data-field":"MMLGRPKOD"}),t(l(r),{"data-field":"OZELLIKKOD2"}),t(l(r),{"data-field":"OZELLIKKOD3"}),t(l(r),{"data-field":"KOD"}),t(l(r),{"data-field":"TANIM","col-span":2}),t(l(r),{"data-field":"NOTLAR","col-span":2}),t(l(r),{"data-field":"PLANLANANMIKTAR","editor-type":"dxNumberBox","editor-options":{showSpinButtons:!0,format:"#,##0",step:1,min:0}}),t(l(r),{"data-field":"DURUM","editor-type":"dxSelectBox","editor-options":{dataSource:["Beklemede","Üretimde","Üretildi","İptal"]}})]),_:1})]),_:1})]),_:1},8,["allow-updating","allow-adding","allow-deleting"]),t(l(d),{type:"buttons",fixed:!0,width:50},{default:i(()=>[t(l(U),{name:"edit",icon:"edit"})]),_:1}),t(l(d),{"data-field":"DURUM",caption:"DURUM","data-type":"string","cell-template":"durumTemplate",width:60,alignment:"center"}),t(l(d),{"data-field":"AKTIF",caption:"AKTİF","data-type":"boolean",visible:!0,width:60,"cell-template":"aktifTemplate"}),t(l(d),{"data-field":"ID","data-type":"number",caption:"İE NO",visible:!0,"sort-order":"desc",width:80}),t(l(d),{"set-cell-value":Ee,"data-field":"ISTASYONID",caption:"İSTASYON",width:150,"data-type":"string"},{default:i(()=>[t(l(E),{"data-source":y.value,"display-expr":"TANIM","value-expr":"ID"},null,8,["data-source"])]),_:1}),t(l(d),{"data-field":"URUNID",caption:"URUN ID",visible:!1,"data-type":"number"}),t(l(d),{"set-cell-value":Ke,"data-field":"KOD",caption:"STOK KODU","data-type":"string",visible:!0,width:120},{default:i(()=>[t(l(E),{"data-source":ye,"display-expr":"KOD","value-expr":"KOD"})]),_:1}),t(l(d),{"set-cell-value":Te,"data-field":"TANIM",caption:"STOK ADI","data-type":"string",width:300},{default:i(()=>[t(l(E),{"data-source":xe,"display-expr":"TANIM","value-expr":"TANIM"})]),_:1}),t(l(d),{"set-cell-value":Ae,"data-field":"MMLGRPKOD",width:250,caption:"GRUP KODU","data-type":"string"},{default:i(()=>[t(l(E),{"data-source":De,"display-expr":"MMLGRPKOD","value-expr":"MMLGRPKOD"})]),_:1}),t(l(d),{"data-field":"PLANLANANMIKTAR",caption:"PL. MKTR","data-type":"number",visible:!0,width:110}),t(l(d),{"data-field":"URETIMMIKTAR",caption:"ÜR. MKTR","data-type":"number",width:110}),t(l(d),{"data-field":"HURDAMIKTAR",caption:"ISK MKTR","data-type":"number",width:110}),t(l(d),{"data-field":"URETIMSIRA",caption:"ÜRETİM SIRA","data-type":"number",visible:!1}),t(l(d),{"data-field":"KAYITTARIH",caption:"TARİH","data-type":"date",width:100,visible:!0,format:{formatter:n=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(n)).replace(/\//g,".")}},null,8,["format"]),t(l(d),{"data-field":"NOTLAR",caption:"NOTLAR","data-type":"string"}),t(l(d),{"data-field":"PROSESNOT",caption:"PROSES NOTU",width:"100","data-type":"string",visible:!0}),t(l(d),{"set-cell-value":Ne,"data-field":"OZELLIKKOD1",caption:"ÖZELLİK 1","data-type":"string"},{default:i(()=>[t(l(E),{"data-source":Oe,"display-expr":"OZELLIKKOD1","value-expr":"OZELLIKKOD1"})]),_:1}),t(l(d),{"set-cell-value":Ce,"data-field":"OZELLIKKOD2",caption:"ÖZELLİK 2","data-type":"string"},{default:i(()=>[t(l(E),{"data-source":Se,"display-expr":"OZELLIKKOD2","value-expr":"OZELLIKKOD2"})]),_:1}),t(l(d),{"set-cell-value":Le,"data-field":"OZELLIKKOD3",caption:"ÖZELLİK 3","data-type":"string"},{default:i(()=>[t(l(E),{"data-source":ve,"display-expr":"OZELLIKKOD3","value-expr":"OZELLIKKOD3"})]),_:1}),t(l(d),{"data-field":"ISTKOD",caption:"İSTASYON KODU","data-type":"string"}),t(l(Je),{visible:!0,emptyPanelText:"Gruplanacak sütunlar buraya..."}),t(l(Qe),{"auto-expand-all":F.value},null,8,["auto-expand-all"]),t(l(Xe),{visible:!0}),t(l(qe),{enabled:!0}),t(l(et),{mode:"virtual","column-rendering-mode":"virtual"}),t(l(tt),{visible:!0}),t(l(lt),{position:Re}),t(l(at),{visible:!0}),t(l(nt),{visible:!0,width:240,placeholder:"Ara..."}),t(l(it),{enabled:!0,"allow-export-selected-data":!0}),t(l(ot),{mode:"single"}),t(l(ut),{enabled:!0}),t(l(rt),{height:"540px",enabled:!0,title:"Sütun Seçici"},{default:i(()=>[t(l(dt),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),t(l(st),{enabled:!0,"editor-options":we}),t(l(pt),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1}),t(l(ct),null,{default:i(()=>[t(l(mt),{column:"TANIM","summary-type":"count","display-format":"{0} adet"}),t(l(ft),{"show-in-group-footer":!1,"align-by-column":!0,column:"TANIM","summary-type":"count","display-format":"{0} adet"})]),_:1}),t(l(gt),null,{default:i(()=>[t(l(r),{location:"before",template:"groupingTemplate"}),t(l(r),{location:"before",template:"collapseTemplate"}),t(l(r),{location:"before",template:"emirlerTemplate"}),t(l(r),{location:"after",template:"refreshTemplate"}),t(l(r),{name:"addRowButton"}),t(l(r),{name:"columnChooserButton"}),t(l(r),{name:"searchPanel"}),t(l(r),{name:"exportButton"})]),_:1})]),_:1},8,["data-source"])]),_:1}),t(Jt,{isDialogVisible:S.value,"onUpdate:isDialogVisible":a[0]||(a[0]=n=>S.value=n),cardDetails:ze.value},null,8,["isDialogVisible","cardDetails"])],64))}});export{Nl as default};
