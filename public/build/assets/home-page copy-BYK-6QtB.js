import{a as A}from"./axios-CCb-kr4I.js";import{u as G}from"./pageTitle-BB4Xy5Fv.js";import{H as w,G as M,_ as P}from"./Haftalik.vue_vue_type_script_setup_true_lang-FonXKeC6.js";import{d as I,r as s,g as L,f as d,o as R,b as m,a as _}from"./main-CXefX_qh.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as $}from"./VRow-qTTVFZ4i.js";import{V as b}from"./VCol-Dzvr-cnK.js";import"./VCard-pJfFDOSH.js";import"./VAvatar-a73hCTk3.js";import"./VImg-Db788kHt.js";import"./index-DT3SyRRd.js";import"./VCardText-BW9gFSa-.js";import"./vue3-apexcharts-hGYjkQ-2.js";/* empty css              */const g=G();document.title="OFT - Ana Sayfa";const x=I({components:{Hedef:w,Grafik:M,Haftalik:P},setup(){const t=s(0),u=s(0),r=s(0),o=s(0),p="DTK VERİMLİLİK",v="DTK HAFTALIK ÜRETİMLER",c=s([0]),f=s([0,0,0]),k=s([0,0,0,0,0,0,0]),h=async()=>{var a=1,i=0,l=1,n=0,H=r.value,y=o.value;try{const e=await A.get("/api/dashboards/zamanal_dtk");if(e.data){const B=new Date(e.data.zaman.BASLAMA_ZAMANI);t.value=e.data.hedef.DEGER1,u.value=e.data.hedef.DEGER1-e.data.veri.ADET,r.value=e.data.veri.ADET;const D=new Date;D.setHours(7,30,0,0);const V=parseInt(e.data.veri.TADET);n=E(D,V),o.value=e.data.veri.HATALI,a=1,i=r.value>0?r.value/n:0,l=o.value>0?1-o.value/(r.value+o.value):1,f.value=[Math.round(a*100),Math.round(i*100),Math.round(l*100)],c.value=[(a*i*l*100).toFixed(0)],(r.value!=H||o.value!=y)&&T()}}catch{}},T=async()=>{const a=await A.get("/api/weekly-data");a.data&&a.data.data&&(k.value=a.data.data.map(i=>i.ADET))},E=(a,i)=>{const l=new Date;if(l<a)return 0;const n=(l.getTime()-a.getTime())/(1e3*60);return n<0?0:Math.floor(n/i)};return{hedef:t,baslikGrafik:p,baslikHaftalik:v,kalan:u,gerceklesen:r,hatali:o,verimData:c,barVeri:f,hftVeri:k,veriAl:h,haftaAl:T,updateTextsPeriodically:()=>{setInterval(()=>{h()},3e3)}}},mounted(){g.setTitle("Ana Sayfa"),g.setToplam(" "),this.veriAl(),this.haftaAl(),this.updateTextsPeriodically()}});function C(t,u,r,o,p,v){const c=_("Grafik"),f=_("Haftalik");return R(),L($,null,{default:d(()=>[m(b,{cols:"12",lg:"6",md:"6"},{default:d(()=>[m(c,{baslik:t.baslikGrafik,barData:t.barVeri,verimData:t.verimData},null,8,["baslik","barData","verimData"])]),_:1}),m(b,{cols:"12",lg:"6",md:"6"},{default:d(()=>[m(f,{baslik:t.baslikHaftalik,hftData:t.hftVeri,height:367},null,8,["baslik","hftData"])]),_:1})]),_:1})}const ea=S(x,[["render",C]]);export{ea as default};
