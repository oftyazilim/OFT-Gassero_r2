import{_ as re}from"./AppSelect.vue_vue_type_script_setup_true_lang-UIB--c0H.js";import{_ as ie}from"./AppTextField.vue_vue_type_script_setup_true_lang-B67lS2wl.js";import{a as ne}from"./axios-CCb-kr4I.js";import{S as y}from"./sweetalert2.esm.all-D3pEHXw3.js";import{u as me}from"./useApi-BhqtdETj.js";import{$ as P}from"./api-D8QFSLsW.js";import{V as de}from"./VChip-Dx4QNr20.js";import{d as ue,E as ce,r,b5 as pe,$ as z,o as p,c as _,e as i,b as t,f as o,n as a,ai as x,t as n,v as k,F as h,i as F,g as fe,V as I,a as C}from"./main-CXefX_qh.js";import{V as K}from"./VCardText-BW9gFSa-.js";import{V as ve}from"./VSpacer-OtyVf5vj.js";import{V as _e}from"./VDivider-B8BIZrEP.js";import{V as xe}from"./VDataTableServer-jZAKkkno.js";import{V as M,b as Ve,d as we}from"./VCard-pJfFDOSH.js";import{V as Q}from"./VTextField-CN3aek7z.js";import{V as D}from"./VCol-Dzvr-cnK.js";import{V as ge}from"./VDialog-Cm1FNAkS.js";import"./form-ClP579eF.js";import"./VSelect-BSocyXX7.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-5j6JHPeN.js";import"./ssrBoot-BBXTmuIy.js";import"./index-DT3SyRRd.js";import"./VAvatar-a73hCTk3.js";import"./VImg-Db788kHt.js";import"./dialog-transition-DjZpsU5U.js";import"./easing-CjukEv2V.js";import"./VMenu-DAf6uba2.js";import"./VOverlay-E84Zkpn-.js";import"./delay-RGhQcOZ6.js";import"./lazy-CAMkS5e7.js";import"./scopeId-BgBx1Ex_.js";import"./VCheckboxBtn-CLjc42-a.js";import"./VSelectionControl-BoOcbjQs.js";import"./index-9rIf2CJL.js";import"./VSlideGroup-CNPi0L39.js";/* empty css              */import"./VDataTable-BED9s8g-.js";import"./VPagination-edzMs2Cf.js";import"./VTable-B3TJP9Kw.js";import"./filter-B7NDRcyz.js";/* empty css                   */import"./VCounter-Cxc0KNa-.js";import"./VField-CeCYSswt.js";import"./VInput-BI9uJ0Ce.js";const ye=i("div",{class:"d-flex gap-2 align-center"},null,-1),ke={class:"d-flex align-center flex-wrap gap-4"},he={class:"d-flex flex-column"},Ce={class:"text-base"},De={class:"d-flex flex-column"},Ue={class:"text-base"},be={class:"d-flex gap-2"},Ae={class:"d-flex flex-column gap-4"},Se={class:"d-flex flex-wrap gap-2"},Be=["onClick"],kt=ue({__name:"kullanicilarx",async setup(Ee){let f,U;const b={SuperAdmin:{color:"info",text:"SuperAdmin"},AclDemo:{color:"success",text:"AclDemo"},admin:{color:"success",text:"admin"},writer:{color:"warning",text:"writer"},Editor:{color:"primary",text:"Editor"},"restricted-user":{color:"error",text:"Restricted User"}},Y=async()=>{try{const s=await ne.get("/api/roles");V.value=s.data,console.log(V.value)}catch(s){console.error("Roller alınamadı:",s)}};ce(()=>{Y()}),r(""),r(""),r(""),r([]);const A=r(""),S=r(10),B=r(1),v=r(!1),j=s=>{},V=r([]),u=r([]),c=r(null),q=()=>{c.value&&!u.value.includes(c.value)&&u.value.push(c.value)},G=s=>{u.value=u.value.filter(l=>l!==s)},H=[{title:"ID",key:"id"},{title:"Name",key:"name"},{title:"Email",key:"email"},{title:"Rol",key:"rol"},{title:"Actions",key:"actions"}],m=r({id:0,name:"",email:"",role:""}),{data:E,execute:R}=([f,U]=pe(()=>me("/kullanicilar")),f=await f,U(),f),J=z(()=>E.value.users),W=z(()=>E.value.totalUsers),w=r(!1),X=()=>{w.value=!0},Z=async s=>{await P("/users",{method:"POST",body:s}),R()},ee=s=>{m.value={id:s.id,name:s.name,email:s.email,role:s.role},v.value=!0},te=()=>{console.log("Saved user data:",m.value),T()},T=()=>{v.value=!1},oe=async s=>{if((await y.fire({title:"Are you sure?",text:"Do you want to delete this user?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await P(`/users/${s}`,{method:"DELETE"}),R(),y.fire("Deleted!","The user has been deleted.","success")}catch(g){console.error("Error deleting user:",g),y.fire("Error!","There was a problem deleting the user.","error")}};return(s,l)=>{const g=ie,N=C("RouterLink"),$=C("IconBtn"),le=C("AddNewUserDrawer"),ae=re;return p(),_(h,null,[i("section",null,[t(a(M),null,{default:o(()=>[t(a(K),{class:"d-flex flex-wrap gap-4"},{default:o(()=>[ye,t(a(ve)),i("div",ke,[t(g,{modelValue:A.value,"onUpdate:modelValue":l[0]||(l[0]=e=>A.value=e),placeholder:"Search User",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),t(a(x),{color:"primary",onClick:X,class:"ml-4"},{default:o(()=>[n(" + Kullanıcı Ekle ")]),_:1})])]),_:1}),t(a(_e)),t(a(xe),{"items-per-page":S.value,"onUpdate:itemsPerPage":l[1]||(l[1]=e=>S.value=e),page:B.value,"onUpdate:page":l[2]||(l[2]=e=>B.value=e),items:J.value,"items-length":W.value,headers:H,class:"text-no-wrap","onUpdate:options":j},{"item.name":o(({item:e})=>[i("div",he,[i("h6",Ce,[t(N,{to:{name:"apps-user-view-id",params:{id:e.id}},class:"font-weight-medium text-link"},{default:o(()=>[n(k(e.name),1)]),_:2},1032,["to"])])])]),"item.rol":o(({item:e})=>[i("div",De,[i("h6",Ue,[t(N,{to:{name:"apps-user-view-id",params:{id:e.id}},class:"font-weight-medium text-link"},{default:o(()=>[i("div",be,[(p(!0),_(h,null,F(e.roles.split("|"),(d,se)=>{var L;return p(),fe(de,{key:se,label:"",size:"small",color:((L=b[d.trim()])==null?void 0:L.color)||"default",class:"font-weight-medium"},{default:o(()=>{var O;return[n(k(((O=b[d.trim()])==null?void 0:O.text)||d.trim()),1)]}),_:2},1032,["color"])}),128))])]),_:2},1032,["to"])])])]),"item.actions":o(({item:e})=>[t($,{onClick:d=>oe(e.id),style:{color:"red !important"}},{default:o(()=>[t(I,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),t($,{style:{color:"blue !important"},onClick:d=>ee(e)},{default:o(()=>[t(I,{icon:"tabler-eye"})]),_:2},1032,["onClick"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),t(le,{isDrawerOpen:w.value,"onUpdate:isDrawerOpen":l[3]||(l[3]=e=>w.value=e),onUserData:Z},null,8,["isDrawerOpen"])]),t(a(ge),{modelValue:v.value,"onUpdate:modelValue":l[7]||(l[7]=e=>v.value=e),"max-width":"600px"},{default:o(()=>[t(a(M),null,{default:o(()=>[t(a(Ve),null,{default:o(()=>[n(" Kullanıcı Bilgileri ")]),_:1}),t(a(K),null,{default:o(()=>[i("div",Ae,[t(a(Q),{label:"Kullanıcı Adı",modelValue:m.value.name,"onUpdate:modelValue":l[4]||(l[4]=e=>m.value.name=e),class:"my-2"},null,8,["modelValue"]),t(a(Q),{label:"Email",modelValue:m.value.email,"onUpdate:modelValue":l[5]||(l[5]=e=>m.value.email=e),class:"my-2"},null,8,["modelValue"]),t(a(D),{cols:"12"},{default:o(()=>[t(ae,{modelValue:c.value,"onUpdate:modelValue":l[6]||(l[6]=e=>c.value=e),label:"Rol",placeholder:"Rol Seçiniz...",items:V.value,"item-text":"name","item-value":"name"},null,8,["modelValue","items"])]),_:1}),t(a(D),{cols:"12",class:"text-center mt-3"},{default:o(()=>[t(a(x),{color:"primary",onClick:q},{default:o(()=>[n("Rol Ata")]),_:1})]),_:1}),t(a(D),{cols:"12",class:"mt-3"},{default:o(()=>[i("div",Se,[(p(!0),_(h,null,F(u.value,e=>(p(),_("div",{key:e,class:"bg-danger text-white px-3 py-2 rounded-pill cursor-pointer",onClick:d=>G(e)},k(e),9,Be))),128))])]),_:1})])]),_:1}),t(a(we),null,{default:o(()=>[t(a(x),{onClick:T},{default:o(()=>[n("Vazgeç")]),_:1}),t(a(x),{onClick:te,color:"primary"},{default:o(()=>[n("Kaydet")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{kt as default};
