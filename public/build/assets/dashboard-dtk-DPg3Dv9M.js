import{a as M}from"./axios-CCb-kr4I.js";import{u as la}from"./pageTitle-DZX-JdGE.js";import{H as na,G as sa,_ as ia}from"./Haftalik.vue_vue_type_script_setup_true_lang-B9w8cj7Y.js";import{d as ra,r as e,aj as oa,aV as ka,aX as da,c as fa,b as t,f as l,e as ua,v as R,F as ca,o as ma,H as b,t as I,a as v}from"./main-C8N3ebfR.js";import{_ as ga}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as h,a as i}from"./VRow-Z9fbV_da.js";import{V as ba,b as $}from"./VCard-BdrtuRPD.js";import"./vue3-apexcharts-DLBCJ8FW.js";import"./VCardText-ARgIvpol.js";/* empty css              */import"./VAvatar-DY8J7Y8l.js";import"./VImg-BEBs2K_P.js";const L=la();document.title="OFT - DTK Dashboard";const pa=ra({components:{Hedef:na,Grafik:sa,Haftalik:ia},setup(){const a=e(null),A=e("HEDEF"),y=e("KALAN"),T=e("UYGUN TESTLER"),H=e("HATALI"),D="VERİMLİLİK",d="HAFTALIK ÜRETİMLER",m=e(0),g=e(0),r=e(0),o=e(0),P=e(190),w=e(230),C=e(130),K=e(ka),N=e("#FF9F43"),_=e("#78db8a"),U=e("#ff6666"),Y=e(da),W=e("#ce8037"),Z=e("#336d39"),j=e("#b52b2b"),X=e("#aba7ef"),q=e("#f9d0a9"),J=e("#94d19a"),Q=e("#f2aeae"),B=e("..."),p=e("..."),F=e("..."),z=e([0]),E=e([0,0,0]),O=e([0,0,0,0,0,0,0]);oa(()=>{a.value!==null&&(clearInterval(a.value),a.value=null)});const S=async()=>{var s=1,k=0,f=1,u=0,aa=r.value,ea=o.value;try{const n=await M.get("/api/dashboards/zamanal_dtk");if(n.data){const c=new Date(n.data.zaman.BASLAMA_ZAMANI);p.value=`${c.getDate()}.${c.getMonth()+1}.${c.getFullYear()} - ${c.getHours()}:${c.getMinutes()}`,m.value=n.data.hedef.DEGER1,g.value=n.data.hedef.DEGER1-n.data.veri.ADET,r.value=n.data.veri.ADET;const G=new Date;G.setHours(7,30,0,0);const ta=parseInt(n.data.veri.TADET);u=x(G,ta),o.value=n.data.veri.HATALI,F.value=n.data.veri.URUN_ADI,B.value=n.data.veri.OPR,s=1,k=r.value>0?r.value/u:0,f=o.value>0?1-o.value/(r.value+o.value):1,E.value=[Math.round(s*100),Math.round(k*100),Math.round(f*100)],z.value=[(s*k*f*100).toFixed(0)],(r.value!=aa||o.value!=ea)&&V()}}catch{p.value="..."}},V=async()=>{const s=await M.get("/api/weekly-data");s.data&&s.data.data&&(O.value=s.data.data.map(k=>k.ADET))},x=(s,k)=>{const f=new Date;if(f<s)return 0;const u=(f.getTime()-s.getTime())/(1e3*60);return u<0?0:Math.floor(u/k)};return{intervalId:a,baslikHedef:A,baslikKalan:y,baslikGerceklesen:T,baslikHatali:H,baslikGrafik:D,baslikHaftalik:d,hedef:m,kalan:g,gerceklesen:r,hatali:o,fontHedef:P,fontGerceklesen:w,fontHatali:C,hedefRengi:K,kalanRengi:N,gerceklesenRengi:_,hataliRengi:U,hBaslikArkaRenk:Y,kBaslikArkaRenk:W,gBaslikArkaRenk:Z,xBaslikArkaRenk:j,hBaslikOnRenk:X,kBaslikOnRenk:q,gBaslikOnRenk:J,xBaslikOnRenk:Q,personel:B,formatliTarihSaat:p,model:F,verimData:z,barVeri:E,hftVeri:O,veriAl:S,haftaAl:V,updateTextsPeriodically:()=>{a.value=setInterval(()=>{S()},3e3)}}},mounted(){L.setTitle("DTK Dashboard"),L.setToplam(" "),this.veriAl(),this.haftaAl(),this.updateTextsPeriodically()}}),Ra={class:"altYazi",style:{color:"orange",fontFamily:"Montserrat"}};function va(a,A,y,T,H,D){const d=v("Hedef"),m=v("Grafik"),g=v("Haftalik");return ma(),fa(ca,null,[t(h,{class:"match-height"},{default:l(()=>[t(i,{cols:"12",lg:"7"},{default:l(()=>[t(h,null,{default:l(()=>[t(i,{cols:"12",lg:"6",md:"4",sm:"6"},{default:l(()=>[t(d,{baslik:a.baslikHedef,deger:a.hedef,yaziRengi:a.hedefRengi,gosterHedef:!0,baslikArkaRenk:a.hBaslikArkaRenk,style:b({fontSize:a.fontHedef+"px"})},null,8,["baslik","deger","yaziRengi","baslikArkaRenk","style"])]),_:1}),t(i,{cols:"12",lg:"6",md:"4",sm:"6"},{default:l(()=>[t(d,{baslik:a.baslikKalan,deger:a.kalan,yaziRengi:a.kalanRengi,gosterHedef:!0,baslikArkaRenk:a.kBaslikArkaRenk,baslikOnRenk:a.kBaslikOnRenk,style:b({fontSize:a.fontHedef+"px"})},null,8,["baslik","deger","yaziRengi","baslikArkaRenk","baslikOnRenk","style"])]),_:1}),t(i,{cols:"12",md:"6",lg:"8"},{default:l(()=>[t(d,{baslik:a.baslikGerceklesen,deger:a.gerceklesen,yaziRengi:a.gerceklesenRengi,gosterHedef:!0,baslikArkaRenk:a.gBaslikArkaRenk,baslikOnRenk:a.gBaslikOnRenk,style:b({fontSize:a.fontGerceklesen+"px"})},null,8,["baslik","deger","yaziRengi","baslikArkaRenk","baslikOnRenk","style"])]),_:1}),t(i,{cols:"12",md:"6",lg:"4"},{default:l(()=>[t(d,{baslik:a.baslikHatali,yaziRengi:a.hataliRengi,gosterHatali:!0,deger:a.hatali,baslikArkaRenk:a.xBaslikArkaRenk,baslikOnRenk:a.xBaslikOnRenk,style:b({fontSize:a.fontHatali+"px"})},null,8,["baslik","yaziRengi","deger","baslikArkaRenk","baslikOnRenk","style"])]),_:1})]),_:1})]),_:1}),t(i,{cols:"12",lg:"5",md:"4",sm:"6"},{default:l(()=>[t(h,{cols:"12"},{default:l(()=>[t(i,{cols:"12"},{default:l(()=>[t(m,{baslik:a.baslikGrafik,barData:a.barVeri,verimData:a.verimData,height:390},null,8,["baslik","barData","verimData"])]),_:1}),t(i,{cols:"12"},{default:l(()=>[t(g,{baslik:a.baslikHaftalik,hftData:a.hftVeri},null,8,["baslik","hftData"])]),_:1}),t(i,{cols:"12"},{default:l(()=>[t(ba,null,{default:l(()=>[t($,{class:"pt-5 mt-2 me-1 text-center mx-1 pb-3 rounded",style:{fontFamily:"Montserrat",color:"#FF9F43",fontWeight:"bold",fontSize:"30px"}},{default:l(()=>[I(R(a.model),1)]),_:1}),t($,{class:"pt-4 mt-1 me-1 text-center mx-1 pb-5 rounded",style:{fontFamily:"Montserrat",color:"#FF9F43",fontWeight:"bold",fontSize:"30px"}},{default:l(()=>[I(R(a.personel),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),ua("h3",Ra,"Son Test Zamanı: "+R(a.formatliTarihSaat),1)],64)}const Ga=ga(pa,[["render",va]]);export{Ga as default};
