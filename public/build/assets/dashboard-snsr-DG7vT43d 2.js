import{a as G}from"./axios-CCb-kr4I.js";import{u as W}from"./pageTitle-DZX-JdGE.js";import{H as x,G as aa,_ as ea}from"./Haftalik.vue_vue_type_script_setup_true_lang-B9w8cj7Y.js";import{d as ta,r as e,aj as la,aV as na,aX as sa,c as ia,b as t,f as l,e as ra,v as oa,F as ka,o as fa,H as h,a as p}from"./main-C8N3ebfR.js";import{_ as da}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as v,a as i}from"./VRow-Z9fbV_da.js";import"./VCard-BdrtuRPD.js";import"./VAvatar-DY8J7Y8l.js";import"./VImg-BEBs2K_P.js";import"./VCardText-ARgIvpol.js";import"./vue3-apexcharts-DLBCJ8FW.js";/* empty css              */const O=W();document.title="OFT - SENSÖR Dashboard";const ua=ta({components:{Hedef:x,Grafik:aa,Haftalik:ea},setup(){const a=e(null),A=e("HEDEF"),y=e("KALAN"),H=e("ÜRETİLEN"),T=e("HATALI"),D="VERİMLİLİK",f="HAFTALIK ÜRETİMLER",g=e(0),m=e(0),r=e(0),o=e(0),I=e(140),V=e(180),F=e(100),$=e(na),K=e("#FF9F43"),w=e("#78db8a"),P=e("#ff6666"),L=e(sa),C=e("#ce8037"),N=e("#336d39"),Y=e("#b52b2b"),_=e("#aba7ef"),j=e("#f9d0a9"),U=e("#94d19a"),X=e("#f2aeae"),b=e("..."),R=e([0]),B=e([0,0,0]),E=e([0,0,0,0,0,0,0]);la(()=>{a.value!==null&&(clearInterval(a.value),a.value=null)});const z=async()=>{var n=1,k=0,d=1,u=0,q=r.value,J=o.value;try{const s=await G.get("/api/dashboards/zamanal_snsr");if(s.data){const c=new Date(s.data.zaman.KAYITTARIH);b.value=`${c.getDate()}.${c.getMonth()+1}.${c.getFullYear()} - ${c.getHours()}:${c.getMinutes()}`,g.value=s.data.hedef.DEGER1,m.value=s.data.hedef.DEGER1-s.data.uygun.MIKTAR,r.value=Math.floor(s.data.uygun.MIKTAR);const M=new Date;M.setHours(7,30,0,0);const Q=parseInt(s.data.hedef.DEGER2);u=Z(M,Q),o.value=Math.floor(s.data.iskarta.MIKTAR),n=1,k=r.value>0?r.value/u:0,d=o.value>0?1-o.value/(r.value+o.value):1,B.value=[Math.round(n*100),Math.round(k*100),Math.round(d*100)],R.value[0]=Math.round(n*k*d*100),R.value[0]>100&&(R.value[0]=100),(r.value!=q||o.value!=J)&&S()}}catch{b.value="..."}},S=async()=>{const n=await G.get("/api/weekly-data/sensor");n.data&&n.data.data&&(E.value=n.data.data.map(k=>k.ADET))},Z=(n,k)=>{const d=new Date;if(d<n)return 0;const u=(d.getTime()-n.getTime())/(1e3*60);return u<0?0:Math.floor(u/k)};return{intervalId:a,baslikHedef:A,baslikKalan:y,baslikGerceklesen:H,baslikHatali:T,baslikGrafik:D,baslikHaftalik:f,hedef:g,kalan:m,gerceklesen:r,hatali:o,fontHedef:I,fontGerceklesen:V,fontHatali:F,hedefRengi:$,kalanRengi:K,gerceklesenRengi:w,hataliRengi:P,hBaslikArkaRenk:L,kBaslikArkaRenk:C,gBaslikArkaRenk:N,xBaslikArkaRenk:Y,hBaslikOnRenk:_,kBaslikOnRenk:j,gBaslikOnRenk:U,xBaslikOnRenk:X,formatliTarihSaat:b,verimData:R,barVeri:B,hftVeri:E,veriAl:z,haftaAl:S,updateTextsPeriodically:()=>{a.value=setInterval(()=>{z()},5e3)}}},mounted(){O.setTitle("SENSÖR Dashboard"),O.setToplam(" "),this.veriAl(),this.haftaAl(),this.updateTextsPeriodically()}}),ca={class:"altYazi",style:{color:"orange",fontFamily:"Montserrat"}};function ga(a,A,y,H,T,D){const f=p("Hedef"),g=p("Grafik"),m=p("Haftalik");return fa(),ia(ka,null,[t(v,{class:"match-height"},{default:l(()=>[t(i,{cols:"12",lg:"7"},{default:l(()=>[t(v,null,{default:l(()=>[t(i,{cols:"12",lg:"6",md:"4",sm:"6"},{default:l(()=>[t(f,{baslik:a.baslikHedef,deger:a.hedef,yaziRengi:a.hedefRengi,gosterHedef:!0,baslikArkaRenk:a.hBaslikArkaRenk,style:h({fontSize:a.fontHedef+"px"}),marginT:15,height:390},null,8,["baslik","deger","yaziRengi","baslikArkaRenk","style"])]),_:1}),t(i,{cols:"12",lg:"6",md:"4",sm:"6"},{default:l(()=>[t(f,{baslik:a.baslikKalan,deger:a.kalan,yaziRengi:a.kalanRengi,gosterHedef:!0,baslikArkaRenk:a.kBaslikArkaRenk,baslikOnRenk:a.kBaslikOnRenk,style:h({fontSize:a.fontHedef+"px"}),marginT:15},null,8,["baslik","deger","yaziRengi","baslikArkaRenk","baslikOnRenk","style"])]),_:1}),t(i,{cols:"12",md:"6",lg:"8"},{default:l(()=>[t(f,{baslik:a.baslikGerceklesen,deger:a.gerceklesen,yaziRengi:a.gerceklesenRengi,gosterHedef:!0,baslikArkaRenk:a.gBaslikArkaRenk,baslikOnRenk:a.gBaslikOnRenk,style:h({fontSize:a.fontGerceklesen+"px"}),marginT:-35,height:400},null,8,["baslik","deger","yaziRengi","baslikArkaRenk","baslikOnRenk","style"])]),_:1}),t(i,{cols:"12",md:"6",lg:"4"},{default:l(()=>[t(f,{baslik:a.baslikHatali,yaziRengi:a.hataliRengi,gosterHatali:!0,deger:a.hatali,baslikArkaRenk:a.xBaslikArkaRenk,baslikOnRenk:a.xBaslikOnRenk,style:h({fontSize:a.fontHatali+"px"})},null,8,["baslik","yaziRengi","deger","baslikArkaRenk","baslikOnRenk","style"])]),_:1})]),_:1})]),_:1}),t(i,{cols:"12",lg:"5",md:"4",sm:"6"},{default:l(()=>[t(v,{cols:"12"},{default:l(()=>[t(i,{cols:"12"},{default:l(()=>[t(g,{baslik:a.baslikGrafik,barData:a.barVeri,verimData:a.verimData,height:390},null,8,["baslik","barData","verimData"])]),_:1}),t(i,{cols:"12"},{default:l(()=>[t(m,{baslik:a.baslikHaftalik,hftData:a.hftVeri,height:400},null,8,["baslik","hftData"])]),_:1})]),_:1})]),_:1})]),_:1}),ra("h3",ca,"Son Test Zamanı: "+oa(a.formatliTarihSaat),1)],64)}const za=da(ua,[["render",ga]]);export{za as default};
