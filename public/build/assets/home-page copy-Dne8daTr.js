import{a as A}from"./axios-CCb-kr4I.js";import{u as V}from"./pageTitle-DZX-JdGE.js";import{H as w,G as M,_ as P}from"./Haftalik.vue_vue_type_script_setup_true_lang-B9w8cj7Y.js";import{d as I,r as s,g as L,f as m,o as R,b as u,a as _}from"./main-C8N3ebfR.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as $,a as b}from"./VRow-Z9fbV_da.js";import"./VCard-BdrtuRPD.js";import"./VAvatar-DY8J7Y8l.js";import"./VImg-BEBs2K_P.js";import"./VCardText-ARgIvpol.js";import"./vue3-apexcharts-DLBCJ8FW.js";/* empty css              */const g=V();document.title="OFT - Ana Sayfa";const x=I({components:{Hedef:w,Grafik:M,Haftalik:P},setup(){const t=s(0),d=s(0),r=s(0),i=s(0),p="DTK VERİMLİLİK",v="DTK HAFTALIK ÜRETİMLER",c=s([0]),f=s([0,0,0]),k=s([0,0,0,0,0,0,0]),h=async()=>{var a=1,o=0,l=1,n=0,H=r.value,y=i.value;try{const e=await A.get("/api/dashboards/zamanal_dtk");if(e.data){const B=new Date(e.data.zaman.BASLAMA_ZAMANI);t.value=e.data.hedef.DEGER1,d.value=e.data.hedef.DEGER1-e.data.veri.ADET,r.value=e.data.veri.ADET;const D=new Date;D.setHours(7,30,0,0);const G=parseInt(e.data.veri.TADET);n=E(D,G),i.value=e.data.veri.HATALI,a=1,o=r.value>0?r.value/n:0,l=i.value>0?1-i.value/(r.value+i.value):1,f.value=[Math.round(a*100),Math.round(o*100),Math.round(l*100)],c.value=[(a*o*l*100).toFixed(0)],(r.value!=H||i.value!=y)&&T()}}catch{}},T=async()=>{const a=await A.get("/api/weekly-data");a.data&&a.data.data&&(k.value=a.data.data.map(o=>o.ADET))},E=(a,o)=>{const l=new Date;if(l<a)return 0;const n=(l.getTime()-a.getTime())/(1e3*60);return n<0?0:Math.floor(n/o)};return{hedef:t,baslikGrafik:p,baslikHaftalik:v,kalan:d,gerceklesen:r,hatali:i,verimData:c,barVeri:f,hftVeri:k,veriAl:h,haftaAl:T,updateTextsPeriodically:()=>{setInterval(()=>{h()},3e3)}}},mounted(){g.setTitle("Ana Sayfa"),g.setToplam(" "),this.veriAl(),this.haftaAl(),this.updateTextsPeriodically()}});function C(t,d,r,i,p,v){const c=_("Grafik"),f=_("Haftalik");return R(),L($,null,{default:m(()=>[u(b,{cols:"12",lg:"6",md:"6"},{default:m(()=>[u(c,{baslik:t.baslikGrafik,barData:t.barVeri,verimData:t.verimData},null,8,["baslik","barData","verimData"])]),_:1}),u(b,{cols:"12",lg:"6",md:"6"},{default:m(()=>[u(f,{baslik:t.baslikHaftalik,hftData:t.hftVeri,height:367},null,8,["baslik","hftData"])]),_:1})]),_:1})}const Y=S(x,[["render",C]]);export{Y as default};
