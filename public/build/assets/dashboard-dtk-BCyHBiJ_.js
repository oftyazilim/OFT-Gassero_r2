import{a as M}from"./axios-CCb-kr4I.js";import{u as le}from"./pageTitle-BB4Xy5Fv.js";import{H as ne,G as se,_ as ie}from"./Haftalik.vue_vue_type_script_setup_true_lang-FonXKeC6.js";import{d as re,r as a,aj as oe,aV as ke,aX as de,c as fe,b as t,f as l,e as ue,v as R,F as ce,o as me,H as b,t as I,a as v}from"./main-CXefX_qh.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as h}from"./VRow-qTTVFZ4i.js";import{V as i}from"./VCol-Dzvr-cnK.js";import{V as be,b as $}from"./VCard-pJfFDOSH.js";import"./vue3-apexcharts-hGYjkQ-2.js";import"./VCardText-BW9gFSa-.js";/* empty css              */import"./VAvatar-a73hCTk3.js";import"./VImg-Db788kHt.js";import"./index-DT3SyRRd.js";const L=le();document.title="OFT - DTK Dashboard";const pe=re({components:{Hedef:ne,Grafik:se,Haftalik:ie},setup(){const e=a(null),A=a("HEDEF"),y=a("KALAN"),T=a("UYGUN TESTLER"),H=a("HATALI"),D="VERİMLİLİK",d="HAFTALIK ÜRETİMLER",m=a(0),g=a(0),r=a(0),o=a(0),P=a(190),w=a(230),C=a(130),K=a(ke),N=a("#FF9F43"),_=a("#78db8a"),U=a("#ff6666"),Y=a(de),W=a("#ce8037"),Z=a("#336d39"),j=a("#b52b2b"),X=a("#aba7ef"),q=a("#f9d0a9"),J=a("#94d19a"),Q=a("#f2aeae"),B=a("..."),p=a("..."),F=a("..."),z=a([0]),E=a([0,0,0]),V=a([0,0,0,0,0,0,0]);oe(()=>{e.value!==null&&(clearInterval(e.value),e.value=null)});const O=async()=>{var s=1,k=0,f=1,u=0,ee=r.value,ae=o.value;try{const n=await M.get("/api/dashboards/zamanal_dtk");if(n.data){const c=new Date(n.data.zaman.BASLAMA_ZAMANI);p.value=`${c.getDate()}.${c.getMonth()+1}.${c.getFullYear()} - ${c.getHours()}:${c.getMinutes()}`,m.value=n.data.hedef.DEGER1,g.value=n.data.hedef.DEGER1-n.data.veri.ADET,r.value=n.data.veri.ADET;const G=new Date;G.setHours(7,30,0,0);const te=parseInt(n.data.veri.TADET);u=x(G,te),o.value=n.data.veri.HATALI,F.value=n.data.veri.URUN_ADI,B.value=n.data.veri.OPR,s=1,k=r.value>0?r.value/u:0,f=o.value>0?1-o.value/(r.value+o.value):1,E.value=[Math.round(s*100),Math.round(k*100),Math.round(f*100)],z.value=[(s*k*f*100).toFixed(0)],(r.value!=ee||o.value!=ae)&&S()}}catch{p.value="..."}},S=async()=>{const s=await M.get("/api/weekly-data");s.data&&s.data.data&&(V.value=s.data.data.map(k=>k.ADET))},x=(s,k)=>{const f=new Date;if(f<s)return 0;const u=(f.getTime()-s.getTime())/(1e3*60);return u<0?0:Math.floor(u/k)};return{intervalId:e,baslikHedef:A,baslikKalan:y,baslikGerceklesen:T,baslikHatali:H,baslikGrafik:D,baslikHaftalik:d,hedef:m,kalan:g,gerceklesen:r,hatali:o,fontHedef:P,fontGerceklesen:w,fontHatali:C,hedefRengi:K,kalanRengi:N,gerceklesenRengi:_,hataliRengi:U,hBaslikArkaRenk:Y,kBaslikArkaRenk:W,gBaslikArkaRenk:Z,xBaslikArkaRenk:j,hBaslikOnRenk:X,kBaslikOnRenk:q,gBaslikOnRenk:J,xBaslikOnRenk:Q,personel:B,formatliTarihSaat:p,model:F,verimData:z,barVeri:E,hftVeri:V,veriAl:O,haftaAl:S,updateTextsPeriodically:()=>{e.value=setInterval(()=>{O()},3e3)}}},mounted(){L.setTitle("DTK Dashboard"),L.setToplam(" "),this.veriAl(),this.haftaAl(),this.updateTextsPeriodically()}}),Re={class:"altYazi",style:{color:"orange",fontFamily:"Montserrat"}};function ve(e,A,y,T,H,D){const d=v("Hedef"),m=v("Grafik"),g=v("Haftalik");return me(),fe(ce,null,[t(h,{class:"match-height"},{default:l(()=>[t(i,{cols:"12",lg:"7"},{default:l(()=>[t(h,null,{default:l(()=>[t(i,{cols:"12",lg:"6",md:"4",sm:"6"},{default:l(()=>[t(d,{baslik:e.baslikHedef,deger:e.hedef,yaziRengi:e.hedefRengi,gosterHedef:!0,baslikArkaRenk:e.hBaslikArkaRenk,style:b({fontSize:e.fontHedef+"px"})},null,8,["baslik","deger","yaziRengi","baslikArkaRenk","style"])]),_:1}),t(i,{cols:"12",lg:"6",md:"4",sm:"6"},{default:l(()=>[t(d,{baslik:e.baslikKalan,deger:e.kalan,yaziRengi:e.kalanRengi,gosterHedef:!0,baslikArkaRenk:e.kBaslikArkaRenk,baslikOnRenk:e.kBaslikOnRenk,style:b({fontSize:e.fontHedef+"px"})},null,8,["baslik","deger","yaziRengi","baslikArkaRenk","baslikOnRenk","style"])]),_:1}),t(i,{cols:"12",md:"6",lg:"8"},{default:l(()=>[t(d,{baslik:e.baslikGerceklesen,deger:e.gerceklesen,yaziRengi:e.gerceklesenRengi,gosterHedef:!0,baslikArkaRenk:e.gBaslikArkaRenk,baslikOnRenk:e.gBaslikOnRenk,style:b({fontSize:e.fontGerceklesen+"px"})},null,8,["baslik","deger","yaziRengi","baslikArkaRenk","baslikOnRenk","style"])]),_:1}),t(i,{cols:"12",md:"6",lg:"4"},{default:l(()=>[t(d,{baslik:e.baslikHatali,yaziRengi:e.hataliRengi,gosterHatali:!0,deger:e.hatali,baslikArkaRenk:e.xBaslikArkaRenk,baslikOnRenk:e.xBaslikOnRenk,style:b({fontSize:e.fontHatali+"px"})},null,8,["baslik","yaziRengi","deger","baslikArkaRenk","baslikOnRenk","style"])]),_:1})]),_:1})]),_:1}),t(i,{cols:"12",lg:"5",md:"4",sm:"6"},{default:l(()=>[t(h,{cols:"12"},{default:l(()=>[t(i,{cols:"12"},{default:l(()=>[t(m,{baslik:e.baslikGrafik,barData:e.barVeri,verimData:e.verimData,height:390},null,8,["baslik","barData","verimData"])]),_:1}),t(i,{cols:"12"},{default:l(()=>[t(g,{baslik:e.baslikHaftalik,hftData:e.hftVeri},null,8,["baslik","hftData"])]),_:1}),t(i,{cols:"12"},{default:l(()=>[t(be,null,{default:l(()=>[t($,{class:"pt-5 mt-2 me-1 text-center mx-1 pb-3 rounded",style:{fontFamily:"Montserrat",color:"#FF9F43",fontWeight:"bold",fontSize:"30px"}},{default:l(()=>[I(R(e.model),1)]),_:1}),t($,{class:"pt-4 mt-1 me-1 text-center mx-1 pb-5 rounded",style:{fontFamily:"Montserrat",color:"#FF9F43",fontWeight:"bold",fontSize:"30px"}},{default:l(()=>[I(R(e.personel),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),ue("h3",Re,"Son Test Zamanı: "+R(e.formatliTarihSaat),1)],64)}const Ie=ge(pe,[["render",ve]]);export{Ie as default};
