import{a as x}from"./axios-CCb-kr4I.js";import{D as G,e as N,a as M,s as U,n as b}from"./FileSaver-DOHanaSG.js";import{g as _,a as i,J as g,P,Q as O,G as K,j as F,c as L,H as V,I as Y,h as B,i as H,k as z,T as Z,U as j,l as W,m as $,n as J,o as Q,V as X,W as q,X as ee,D as te}from"./data-grid-bcHRWDWG.js";import{d as ae,r as o,b2 as ie,E as re,$ as oe,w as ne,o as le,g as se,f as s,b as e,n as t}from"./main-C8N3ebfR.js";import{u as de}from"./pageTitle-DZX-JdGE.js";import{V as ue}from"./VCard-BdrtuRPD.js";import"./extends-CF3RwP-h.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-DY8J7Y8l.js";import"./VImg-BEBs2K_P.js";import"./VCardText-ARgIvpol.js";const Te=ae({__name:"uretimgirisleri",setup(ce){const d=o(!1),c=de(),m=ie("userData"),p=o([]),f=o(null);var I="Üretim Girişleri";document.title="OFT - Üretim Girişleri",re(()=>{n()});const n=()=>{x.get("/api/dataUretim").then(a=>{p.value=a.data.data,c.setTitle(I),c.setToplam("")}).catch(a=>{console.error("Veri çekilirken hata oluştu: ",a)})},D=o(null),h=o(null),w=o(null);function y(a){const r=a.row.data;D.value=r.ID,w.value=r.ISEMRIID,h.value=r.MIKTAR,d.value=!d.value,n()}oe(()=>({id:D.value,ieId:w.value,userId:m.value.id,miktar:h.value,tur:" (düzeltme)"})),ne(d,(a,r)=>{!a&&r&&n()});const T=a=>{x.put(`/api/uretimsil/${a.key}`,a.data,{headers:{userID:m.value.id}}).then(r=>{n()}).catch(r=>{console.error("Veri silinirken hata oluştu: ",r)})},v={of:window,at:"top",my:"top",offset:{y:10}},k={placeholder:"Sütun ara"},R=a=>{a.component.option("loadPanel.enabled",!1)},S=a=>{const r=new N.Workbook,l=r.addWorksheet("UretimGirisleri");M({component:a.component,worksheet:l,autoFilterEnabled:!0}).then(()=>{r.xlsx.writeBuffer().then(u=>{U(new Blob([u],{type:"application/octet-stream"}),"UretimGirisleri.xlsx")})}),a.cancel=!0},C=[{text:"Yenile (Tam Liste)"},{text:"Grid Düzenini Sıfırla"}];function A({itemData:a}){if(!(a!=null&&a.items))switch(a==null?void 0:a.text){case"Yenile (Tam Liste)":n(),b("Veriler Yenilendi","success",1500);break;case"Grid Düzenini Sıfırla":E(),b("Düzen Sıfırlandı","success",1500);break}}const E=()=>{f.value.instance.state(null)};return(a,r)=>(le(),se(ue,null,{default:s(()=>[e(t(G),{"data-source":C,width:200,target:"#gridContainer",onItemClick:A}),e(t(te),{id:"gridContainer",ref_key:"dataGridRef",ref:f,onContentReady:R,"data-source":p.value,"show-borders":!0,"key-expr":"ID","show-column-lines":!1,"show-row-lines":!0,"column-width":100,"row-alternation-enabled":!0,"allow-column-reordering":!0,onRowRemoved:T,"allow-column-resizing":!0,onExporting:S,"show-indicator":!0,"repaint-changes-only":!0},{default:s(()=>[e(t(_),{"allow-deleting":!0,"use-icons":!0}),e(t(i),{type:"buttons",fixed:!0,width:80},{default:s(()=>[e(t(g),{name:"delete",icon:"trash"}),e(t(g),{hint:"Üretim",icon:"optionsgear",onClick:y,visible:!1})]),_:1}),e(t(i),{"data-field":"ISTTANIM",caption:"İSTASYON","data-type":"string","min-width":150}),e(t(i),{"data-field":"ID","data-type":"number",caption:"ID",visible:!1,"sort-order":"desc","min-width":80}),e(t(i),{"data-field":"ISEMRIID","data-type":"number",caption:"İŞEMRİ ID",visible:!0,"min-width":80}),e(t(i),{"data-field":"OLUSTURANID","data-type":"number",caption:"KAYIT EDEN",visible:!0,width:80}),e(t(i),{"data-field":"DUZENLEYENID","data-type":"number",caption:"DÜZENLEYEN",visible:!1,width:80}),e(t(i),{"data-field":"STOKID",caption:"URUN ID",visible:!0,"data-type":"number","min-width":80}),e(t(i),{"data-field":"KOD",caption:"STOK KODU","data-type":"string",visible:!0,"min-width":150}),e(t(i),{"data-field":"TANIM",caption:"STOK ADI","data-type":"string","min-width":600}),e(t(i),{"data-field":"MMLGRPKOD",caption:"GRUP KODU","data-type":"string","min-width":320}),e(t(i),{"data-field":"MIKTAR",caption:"MİKTAR","data-type":"number",visible:!0,width:110}),e(t(i),{"data-field":"URETIMTARIH",caption:"KYT TARİHİ","data-type":"date",width:100,visible:!0,format:{formatter:l=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(l)).replace(/\//g,".")}},null,8,["format"]),e(t(i),{"data-field":"DUZENTARIH",caption:"DZN TARİHİ","data-type":"date",width:100,visible:!1,format:{formatter:l=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(l)).replace(/\//g,".")}},null,8,["format"]),e(t(i),{"data-field":"NOTLAR",caption:"NOTLAR","data-type":"string"}),e(t(P),{visible:!0,emptyPanelText:"Gruplanacak sütunlar buraya..."}),e(t(O),{"auto-expand-all":!0}),e(t(K),{visible:!0}),e(t(F),{enabled:!0}),e(t(L),{mode:"virtual","column-rendering-mode":"virtual"}),e(t(V),{visible:!0}),e(t(Y),{position:v}),e(t(B),{visible:!0}),e(t(H),{visible:!0,width:240,placeholder:"Ara..."}),e(t(z),{enabled:!0,"allow-export-selected-data":!0}),e(t(Z),{mode:"single"}),e(t(j),{enabled:!0}),e(t(W),{height:"540px",enabled:!0,title:"Sütun Seçici"},{default:s(()=>[e(t($),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),e(t(J),{enabled:!0,"editor-options":k}),e(t(Q),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1}),e(t(X),null,{default:s(()=>[e(t(q),{column:"TANIM","summary-type":"count","display-format":"{0} adet"}),e(t(ee),{"show-in-group-footer":!1,"align-by-column":!0,column:"TANIM","summary-type":"count","display-format":"{0} adet"})]),_:1})]),_:1},8,["data-source"])]),_:1}))}});export{Te as default};
