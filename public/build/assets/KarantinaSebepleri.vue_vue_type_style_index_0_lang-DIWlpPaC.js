import{b as r,g as R,a as P,h as O,i as _,f as C,e as A,j as F,k as N,l as T,m as B,n as Y,D as z}from"./data-grid-BLmUHH6D.js";import{a as s}from"./axios-CCb-kr4I.js";import{n as M}from"./m_notify-Cb9wpp58.js";import{D as U}from"./context-menu-Cov5ypH3.js";import{e as K,a as $,s as q}from"./FileSaver-kGUWF2pl.js";import{d as j,r as m,E as G,o as L,c as V,b as t,n as a,f as c}from"./main-CXefX_qh.js";import"./index-xGAhBz7B.js";const W={class:"grid mb-2"},d="/api/karantinasebepleri",oe=j({__name:"KarantinaSebepleri",setup(H){const p=m([]),f=e=>{E(e)},g=e=>{y(e)},w=e=>{D(e)},h={allowUpdating:!0,allowAdding:!0,allowDeleting:!0,mode:"form",useIcons:!0},x={placeholder:"Sütun ara"},S=e=>{e.forEach(o=>{o.dataField==="ISTASYONID"&&(o.alignment="center")})},b={items:[{dataField:"SEBEP",editorOptions:{placeholder:"Sebep giriniz..."}},{dataField:"PROSES",editorOptions:{placeholder:"Proses giriniz..."}},{dataField:"ISTASYONID",editorOptions:{placeholder:"İstasyon seçiniz...",min:0,max:120}}]},u=m([]),l=async()=>{try{const e=await s.get(d);p.value=e.data.data,u.value=e.data.istasyonlar}catch(e){console.error("Error fetching data:",e),M("Veriler alınamadı","error",1500)}finally{}},E=e=>{e.promise=new Promise(async(o,n)=>{try{const i={...e.oldData,...e.newData};await s.put(`${d}/${e.key}`,i),await l(),e.component.cancelEditData(),o()}catch(i){console.error("Error updating data:",i),n()}})},y=e=>{e.promise=new Promise(async(o,n)=>{try{await s.post(d,e.data),await l(),e.component.cancelEditData(),o()}catch(i){console.error("Error adding data:",i),n()}})},D=e=>{e.promise=new Promise(async(o,n)=>{try{await s.delete(`${d}/${e.key}`),await l(),e.component.cancelEditData(),o()}catch(i){console.error("Error deleting data:",i),n()}})};G(l);const v=[{text:"Yenile"}];function I({itemData:e}){if(!(e!=null&&e.items))switch(e==null?void 0:e.text){case"Yenile":l();break}}const k=e=>{const o=new K.Workbook,n=o.addWorksheet("KarantinaSebepleri");$({component:e.component,worksheet:n,autoFilterEnabled:!0}).then(()=>{o.xlsx.writeBuffer().then(i=>{q(new Blob([i],{type:"application/octet-stream"}),"KarantinaSebepleri.xlsx")})}),e.cancel=!0};return(e,o)=>(L(),V("div",W,[t(a(U),{"data-source":v,width:200,target:"#grid-mydatagrid",onItemClick:I}),t(a(z),{id:"grid-mydatagrid","data-source":a(p),"key-expr":"ID","show-borders":!0,"editing-options":h,onRowUpdating:f,onRowInserting:g,onRowRemoving:w,"customize-columns":S,"form-options":b,"row-alternation-enabled":!0,onExporting:k,height:"100%"},{default:c(()=>[t(a(r),{"data-field":"ID",caption:"ID","allow-editing":!1,visible:!1}),t(a(r),{"data-field":"SEBEP",caption:"SEBEP","allow-editing":!0,visible:!0,"validation-rules":[{type:"required"}]}),t(a(r),{"data-field":"TIP",caption:"TİP","allow-editing":!1,visible:!1}),t(a(r),{"data-field":"SINIF",caption:"SINIF","allow-editing":!1,visible:!1}),t(a(r),{"data-field":"TUR",caption:"TÜR","allow-editing":!1,visible:!1}),t(a(r),{"data-field":"PERFORMANS",caption:"PERFORMANS","allow-editing":!1,visible:!1}),t(a(r),{"data-field":"PROSES",caption:"PROSES","allow-editing":!0,visible:!0,"validation-rules":[{type:"required"}]}),t(a(r),{"data-field":"ISTASYONID",caption:"İSTASYON","allow-editing":!0,visible:!0,"validation-rules":[{type:"required"}]},{default:c(()=>[t(a(R),{"data-source":a(u),"display-expr":"KISATANIM","value-expr":"ID"},null,8,["data-source"])]),_:1}),t(a(P),{"allow-updating":!0,"allow-adding":!0,"allow-deleting":!0,mode:"row","use-icons":!0}),t(a(O),{visible:!0}),t(a(_),{visible:!0,width:240,placeholder:"Ara..."}),t(a(C),{enabled:!0}),t(a(A),{mode:"virtual"}),t(a(F),{enabled:!0,"allow-export-selected-data":!1}),t(a(N),{height:"540px",enabled:!0,mode:"select",title:"Sütun Seçici"},{default:c(()=>[t(a(T),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),t(a(B),{enabled:!0,"editor-options":x}),t(a(Y),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1})]),_:1},8,["data-source"])]))}});export{oe as _};
