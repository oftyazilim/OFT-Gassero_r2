import{b as i,g as R,a as P,h as O,i as _,f as C,e as A,j as F,k as N,l as T,m as B,n as Y,D as z}from"./data-grid-BLmUHH6D.js";import{a as l}from"./axios-CCb-kr4I.js";import{n as M}from"./m_notify-Cb9wpp58.js";import{D as U}from"./context-menu-Cov5ypH3.js";import{e as $,a as q,s as j}from"./FileSaver-kGUWF2pl.js";import{d as G,r as m,E as L,o as W,c as H,b as a,n as t,f as c}from"./main-CXefX_qh.js";import"./index-xGAhBz7B.js";const K={class:"grid mb-2"},d="/api/iskartasebepleri",oe=G({__name:"IskartaSebepleri",setup(V){const p=m([]),f=e=>{E(e)},g=e=>{I(e)},w=e=>{y(e)},h={allowUpdating:!0,allowAdding:!0,allowDeleting:!0,mode:"form",useIcons:!0},x={placeholder:"Sütun ara"},S=e=>{e.forEach(o=>{o.dataField==="ISTASYONID"&&(o.alignment="center")})},b={items:[{dataField:"SEBEP",editorOptions:{placeholder:"Sebep giriniz..."}},{dataField:"PROSES",editorOptions:{placeholder:"Proses giriniz..."}},{dataField:"ISTASYONID",editorOptions:{placeholder:"İstasyon seçiniz...",min:0,max:120}}]},u=m([]),s=async()=>{try{const e=await l.get(d);p.value=e.data.data,u.value=e.data.istasyonlar}catch(e){console.error("Error fetching data:",e),M("Iskarta Sebepleri verisi alınamadı","error",1500)}finally{}},E=e=>{e.promise=new Promise(async(o,n)=>{try{const r={...e.oldData,...e.newData};await l.put(`${d}/${e.key}`,r),await s(),e.component.cancelEditData(),o()}catch(r){console.error("Error updating data:",r),n()}})},I=e=>{e.promise=new Promise(async(o,n)=>{try{await l.post(d,e.data),await s(),e.component.cancelEditData(),o()}catch(r){console.error("Error adding data:",r),n()}})},y=e=>{e.promise=new Promise(async(o,n)=>{try{await l.delete(`${d}/${e.key}`),await s(),e.component.cancelEditData(),o()}catch(r){console.error("Error deleting data:",r),n()}})};L(s);const v=[{text:"Yenile"}];function D({itemData:e}){if(!(e!=null&&e.items))switch(e==null?void 0:e.text){case"Yenile":s();break}}const k=e=>{const o=new $.Workbook,n=o.addWorksheet("IskartaSebepleri");q({component:e.component,worksheet:n,autoFilterEnabled:!0}).then(()=>{o.xlsx.writeBuffer().then(r=>{j(new Blob([r],{type:"application/octet-stream"}),"IskartaSebepleri.xlsx")})}),e.cancel=!0};return(e,o)=>(W(),H("div",K,[a(t(U),{"data-source":v,width:200,target:"#grid-mydatagrid",onItemClick:D}),a(t(z),{id:"grid-mydatagrid","data-source":t(p),"key-expr":"ID","show-borders":!0,"editing-options":h,onRowUpdating:f,onRowInserting:g,onRowRemoving:w,"customize-columns":S,"form-options":b,"row-alternation-enabled":!0,onExporting:k,height:"100%"},{default:c(()=>[a(t(i),{"data-field":"ID",caption:"ID","allow-editing":!1,visible:!1}),a(t(i),{"data-field":"SEBEP",caption:"SEBEP","allow-editing":!0,visible:!0,"validation-rules":[{type:"required"}]}),a(t(i),{"data-field":"TIP",caption:"TİP","allow-editing":!1,visible:!1}),a(t(i),{"data-field":"SINIF",caption:"SINIF","allow-editing":!1,visible:!1}),a(t(i),{"data-field":"TUR",caption:"TÜR","allow-editing":!1,visible:!1}),a(t(i),{"data-field":"PERFORMANS",caption:"PERFORMANS","allow-editing":!1,visible:!1}),a(t(i),{"data-field":"PROSES",caption:"PROSES","allow-editing":!0,visible:!0,"validation-rules":[{type:"required"}]}),a(t(i),{"data-field":"ISTASYONID",caption:"İSTASYON","allow-editing":!0,visible:!0,"validation-rules":[{type:"required"}]},{default:c(()=>[a(t(R),{"data-source":t(u),"display-expr":"KISATANIM","value-expr":"ID"},null,8,["data-source"])]),_:1}),a(t(P),{"allow-updating":!0,"allow-adding":!0,"allow-deleting":!0,mode:"row","use-icons":!0}),a(t(O),{visible:!0}),a(t(_),{visible:!0,width:240,placeholder:"Ara..."}),a(t(C),{enabled:!0}),a(t(A),{mode:"virtual"}),a(t(F),{enabled:!0,"allow-export-selected-data":!1}),a(t(N),{height:"540px",enabled:!0,mode:"select",title:"Sütun Seçici"},{default:c(()=>[a(t(T),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),a(t(B),{enabled:!0,"editor-options":x}),a(t(Y),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1})]),_:1},8,["data-source"])]))}});export{oe as _};
