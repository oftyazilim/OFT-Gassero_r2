import{a as w}from"./axios-CCb-kr4I.js";import{e as G,a as M,s as N}from"./FileSaver-kGUWF2pl.js";import{d as _,r as o,b2 as K,E as O,$ as P,w as U,o as F,g as L,f as s,b as e,n as t}from"./main-CXefX_qh.js";import"./index-xGAhBz7B.js";import{a as Y,b as r,c as b,F as B,G as V,q as H,f as z,e as Z,r as j,s as W,h as $,i as q,j as J,H as Q,I as X,k as ee,l as te,m as ae,n as re,J as ie,M as oe,K as ne,D as le}from"./data-grid-BLmUHH6D.js";import{D as se}from"./context-menu-Cov5ypH3.js";import{n as I}from"./m_notify-Cb9wpp58.js";import{u as de}from"./pageTitle-BB4Xy5Fv.js";import{V as ue}from"./VCard-pJfFDOSH.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-a73hCTk3.js";import"./VImg-Db788kHt.js";import"./index-DT3SyRRd.js";import"./VCardText-BW9gFSa-.js";const Re=_({__name:"iskartagirisleri",setup(ce){const d=o(!1),c=de(),m=K("userData"),p=o([]),f=o(null);var g="Iskarta Girişleri";document.title="OFT - Iskarta Girişleri",O(()=>{n()});const n=()=>{w.get("/api/dataIskarta").then(a=>{p.value=a.data.data,c.setTitle(g),c.setToplam("")}).catch(a=>{console.error("Veri çekilirken hata oluştu: ",a)})},D=o(null),h=o(null),x=o(null);function y(a){const i=a.row.data;D.value=i.ID,x.value=i.ISEMRIID,h.value=i.MIKTAR,d.value=!d.value,n()}P(()=>({id:D.value,ieId:x.value,userId:m.value.id,miktar:h.value,tur:" (düzeltme)"})),U(d,(a,i)=>{!a&&i&&n()});const T=a=>{w.put(`/api/iskartasil/${a.key}`,a.data,{headers:{userID:m.value.id}}).then(i=>{n()}).catch(i=>{console.error("Veri silinirken hata oluştu: ",i)})},k={of:window,at:"top",my:"top",offset:{y:10}},v={placeholder:"Sütun ara"},R=a=>{a.component.option("loadPanel.enabled",!1)},S=a=>{const i=new G.Workbook,l=i.addWorksheet("IskartaGirisleri");M({component:a.component,worksheet:l,autoFilterEnabled:!0}).then(()=>{i.xlsx.writeBuffer().then(u=>{N(new Blob([u],{type:"application/octet-stream"}),"IskartaGirisleri.xlsx")})}),a.cancel=!0},C=[{text:"Yenile (Tam Liste)"},{text:"Grid Düzenini Sıfırla"}];function A({itemData:a}){if(!(a!=null&&a.items))switch(a==null?void 0:a.text){case"Yenile (Tam Liste)":n(),I("Veriler Yenilendi","success",1500);break;case"Grid Düzenini Sıfırla":E(),I("Düzen Sıfırlandı","success",1500);break}}const E=()=>{f.value.instance.state(null)};return(a,i)=>(F(),L(ue,null,{default:s(()=>[e(t(se),{"data-source":C,width:200,target:"#gridContainer",onItemClick:A}),e(t(le),{id:"gridContainer",ref_key:"dataGridRef",ref:f,onContentReady:R,"data-source":p.value,"show-borders":!0,"key-expr":"ID","show-column-lines":!0,"show-row-lines":!1,"row-alternation-enabled":!1,"allow-column-reordering":!0,onRowRemoved:T,"allow-column-resizing":!0,onExporting:S,"show-indicator":!0,"repaint-changes-only":!0},{default:s(()=>[e(t(Y),{"allow-deleting":!0,"use-icons":!0}),e(t(r),{type:"buttons",fixed:!0,width:80},{default:s(()=>[e(t(b),{name:"delete",icon:"trash"}),e(t(b),{hint:"Üretim",icon:"optionsgear",onClick:y,visible:!1})]),_:1}),e(t(r),{"data-field":"ISTTANIM",caption:"İSTASYON","data-type":"string",width:170}),e(t(r),{"data-field":"ID","data-type":"number",caption:"ID",visible:!1,"sort-order":"desc",width:80}),e(t(r),{"data-field":"ISEMRIID","data-type":"number",caption:"İŞEMRİ ID",visible:!0,width:80}),e(t(r),{"data-field":"OLUSTURANID","data-type":"number",caption:"KAYIT EDEN",visible:!0,width:80}),e(t(r),{"data-field":"DUZENLEYENID","data-type":"number",caption:"DÜZENLEYEN",visible:!1,width:80}),e(t(r),{"data-field":"STOKID",caption:"URUN ID",visible:!0,"data-type":"number"}),e(t(r),{"data-field":"KOD",caption:"STOK KODU","data-type":"string",visible:!0,width:120}),e(t(r),{"data-field":"TANIM",caption:"STOK ADI","data-type":"string",width:300}),e(t(r),{"data-field":"MMLGRPKOD",width:250,caption:"GRUP KODU","data-type":"string"}),e(t(r),{"data-field":"MIKTAR",caption:"MİKTAR","data-type":"number",visible:!0,width:110}),e(t(r),{"data-field":"URETIMTARIH",caption:"KYT TARİHİ","data-type":"date",width:100,visible:!0,format:{formatter:l=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(l)).replace(/\//g,".")}},null,8,["format"]),e(t(r),{"data-field":"DUZENTARIH",caption:"DZN TARİHİ","data-type":"date",width:100,visible:!1,format:{formatter:l=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(l)).replace(/\//g,".")}},null,8,["format"]),e(t(r),{"data-field":"NOTLAR",caption:"NOTLAR","data-type":"string"}),e(t(B),{visible:!0,emptyPanelText:"Gruplanacak sütunlar buraya..."}),e(t(V),{"auto-expand-all":!0}),e(t(H),{visible:!0}),e(t(z),{enabled:!0}),e(t(Z),{mode:"virtual","column-rendering-mode":"virtual"}),e(t(j),{visible:!0}),e(t(W),{position:k}),e(t($),{visible:!0}),e(t(q),{visible:!0,width:240,placeholder:"Ara..."}),e(t(J),{enabled:!0,"allow-export-selected-data":!0}),e(t(Q),{mode:"single"}),e(t(X),{enabled:!0}),e(t(ee),{height:"540px",enabled:!0,title:"Sütun Seçici"},{default:s(()=>[e(t(te),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),e(t(ae),{enabled:!0,"editor-options":v}),e(t(re),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1}),e(t(ie),null,{default:s(()=>[e(t(oe),{column:"TANIM","summary-type":"count","display-format":"{0} adet"}),e(t(ne),{"show-in-group-footer":!1,"align-by-column":!0,column:"TANIM","summary-type":"count","display-format":"{0} adet"})]),_:1})]),_:1},8,["data-source"])]),_:1}))}});export{Re as default};
