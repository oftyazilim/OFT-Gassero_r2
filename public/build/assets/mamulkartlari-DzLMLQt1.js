import{a as u}from"./axios-CCb-kr4I.js";import{D as B,e as Y,a as W,s as j,n as f}from"./FileSaver-DOHanaSG.js";import{g as H,K as J,M as Q,N as o,a as r,J as K,f as d,P as X,Q as $,G as q,j as ee,c as ae,H as te,I as le,h as oe,i as re,k as ie,T as ne,U as de,l as se,m as ue,n as ce,o as pe,V as me,W as fe,X as xe,D as he}from"./data-grid-bcHRWDWG.js";import{d as De,b2 as ge,r as n,E as we,o as x,g as h,f as l,b as e,n as a,V as k}from"./main-C8N3ebfR.js";import{u as ye}from"./pageTitle-DZX-JdGE.js";import{V as ve}from"./VCard-BdrtuRPD.js";import"./extends-CF3RwP-h.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-DY8J7Y8l.js";import"./VImg-BEBs2K_P.js";import"./VCardText-ARgIvpol.js";const _e=De({__name:"mamulkartlari",setup(Ee){const D=ye(),p=ge("userData"),g=n([]),m=n([]),w=n([]),y=n([]),v=n([]),E=n([]),b=n([]),I=n(null);var O="Mamul Kartları: ";document.title="OFT - Mamul Kartları",we(()=>{T(),s()});const s=()=>{u.get("/api/dataMamuller").then(t=>{g.value=t.data.data,D.setTitle(O),D.setToplam(L(t.data.toplam).toString())}).catch(t=>{console.error("Veri çekilirken hata oluştu: ",t)})},T=()=>{u.get("/api/veriMamuller").then(t=>{E.value=t.data.istasyon,m.value=t.data.mamulGrup,b.value=t.data.mamulSinif,w.value=t.data.mamulOz1,y.value=t.data.mamulOz2,v.value=t.data.mamulOz3,m.value.push({MMLGRPKOD:"YEDEK PARÇA"})}).catch(t=>{console.error("Mamul verileri çekilirken hata oluştu: ",t)})},S=t=>{t.parentType==="dataRow"&&t.dataField==="MEVCUT"&&(t.editorOptions.disabled=!0)},G=t=>{u.put(`/api/mamulsil/${t.key}`,{headers:{userID:p.value.id}}).then(i=>{s()}).catch(i=>{console.error("Veri silinirken hata oluştu: ",i)})},R=t=>{u.post("/api/mamul",t.data,{headers:{userID:p.value.id}}).then(i=>{s()}).catch(i=>{console.error("Veri güncellenirken hata oluştu: ",i)})},M=t=>{u.post("/api/mamul",t.data,{headers:{userID:p.value.id}}).then(i=>{s()}).catch(i=>{console.error("Veri eklenirken hata oluştu: ",i)})},C=t=>{t.data.MEVCUT=0,t.data.AKTIF=!0},_=t=>{t.rowType==="data"&&t.column.dataField==="MEVCUT"&&t.data.MEVCUT>0&&(t.cellElement.style.fontWeight="bold")},L=t=>new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0}).format(t),P={of:window,at:"top",my:"top",offset:{y:10}},A={placeholder:"Sütun ara"},F=t=>{t.component.option("loadPanel.enabled",!1)},N=t=>{const i=new Y.Workbook,c=i.addWorksheet("MamulKartlari");W({component:t.component,worksheet:c,autoFilterEnabled:!0}).then(()=>{i.xlsx.writeBuffer().then(Z=>{j(new Blob([Z],{type:"application/octet-stream"}),"MamulKartlari.xlsx")})}),t.cancel=!0},V=[{text:"Yenile"},{text:"Grid Düzenini Sıfırla"},{text:"Günün Sözü"}];function z({itemData:t}){if(!(t!=null&&t.items))switch(t==null?void 0:t.text){case"Yenile":s(),f("Veriler Yenilendi","success",1500);break;case"Grid Düzenini Sıfırla":U(),f("Düzen Sıfırlandı","success",1500);break;case"Günün Sözü":f("İşini düzgün yap. Dalga geçme :)","success",1500);break}}const U=()=>{I.value.instance.state(null)};return(t,i)=>(x(),h(ve,null,{default:l(()=>[e(a(B),{"data-source":V,width:200,target:"#gridContainer",onItemClick:z}),e(a(he),{id:"gridContainer",ref_key:"dataGridRef",ref:I,onContentReady:F,"data-source":g.value,"show-borders":!0,"key-expr":"ID",onEditorPreparing:S,"show-column-lines":!1,"show-row-lines":!0,"row-alternation-enabled":!0,"allow-column-reordering":!0,onRowRemoved:G,"allow-column-resizing":!0,onExporting:N,"column-width":100,"show-indicator":!1,onRowUpdated:R,onRowInserted:M,onInitNewRow:C,onCellPrepared:_,"repaint-changes-only":!0},{aktifTemplate:l(({data:c})=>[c.value==="0"||c.value===0?(x(),h(k,{key:0,size:"24",icon:"tabler-x"})):(x(),h(k,{key:1,size:"24",icon:"tabler-check"}))]),default:l(()=>[e(a(H),{"allow-updating":!0,"allow-adding":!0,"allow-deleting":!0,"use-icons":!0,mode:"popup"},{default:l(()=>[e(a(J),{"show-title":!0,shading:!0,width:800,height:480,title:"Mamul Kartı"}),e(a(Q),null,{default:l(()=>[e(a(o),{"col-count":2,"col-span":2,"item-type":"group"},{default:l(()=>[e(a(o),{"data-field":"ID",visible:!1}),e(a(o),{"data-field":"ISTASYONID",visible:!1}),e(a(o),{"data-field":"STGRPKOD"}),e(a(o),{"data-field":"SINIF"}),e(a(o),{"data-field":"OZELLIKKOD1"}),e(a(o),{"data-field":"MMLGRPKOD"}),e(a(o),{"data-field":"OZELLIKKOD2"}),e(a(o),{"data-field":"OZELLIKKOD3"}),e(a(o),{"data-field":"KOD"}),e(a(o),{"data-field":"TANIM","col-span":2}),e(a(o),{"data-field":"MEVCUT"}),e(a(o),{"data-field":"AKTIF","editor-type":"dxCheckBox"})]),_:1})]),_:1})]),_:1}),e(a(r),{type:"buttons",fixed:!0,width:80},{default:l(()=>[e(a(K),{name:"edit",icon:"edit"}),e(a(K),{name:"delete",icon:"trash"})]),_:1}),e(a(r),{"data-field":"AKTIF",caption:"AKTİF","data-type":"boolean",visible:!1,width:60}),e(a(r),{"data-field":"ID","data-type":"number",caption:"İE NO",visible:!0,"sort-order":"desc",width:80}),e(a(r),{"data-field":"KOD",caption:"STOK KODU","data-type":"string","min-width":150}),e(a(r),{"data-field":"TANIM",caption:"STOK ADI","data-type":"string","min-width":600}),e(a(r),{"data-field":"STGRPKOD","min-width":200,caption:"İSTASYON","data-type":"string"},{default:l(()=>[e(a(d),{"data-source":E.value,"display-expr":"TANIM","value-expr":"TANIM"},null,8,["data-source"])]),_:1}),e(a(r),{"data-field":"MMLGRPKOD",width:250,caption:"GRUP KODU","data-type":"string"},{default:l(()=>[e(a(d),{"data-source":m.value,"display-expr":"DEGER","value-expr":"DEGER"},null,8,["data-source"])]),_:1}),e(a(r),{"data-field":"MEVCUT","data-type":"number",visible:!0,width:110}),e(a(r),{"data-field":"SINIF","data-type":"string"},{default:l(()=>[e(a(d),{"data-source":b.value,"display-expr":"DEGER","value-expr":"DEGER"},null,8,["data-source"])]),_:1}),e(a(r),{"data-field":"OZELLIKKOD1",caption:"ÖZELLİK 1","data-type":"string","min-width":110},{default:l(()=>[e(a(d),{"data-source":w.value,"display-expr":"DEGER","value-expr":"DEGER"},null,8,["data-source"])]),_:1}),e(a(r),{"data-field":"OZELLIKKOD2",caption:"ÖZELLİK 2","data-type":"string","min-width":110},{default:l(()=>[e(a(d),{"data-source":y.value,"display-expr":"DEGER","value-expr":"DEGER"},null,8,["data-source"])]),_:1}),e(a(r),{"data-field":"OZELLIKKOD3",caption:"ÖZELLİK 3","data-type":"string","min-width":210},{default:l(()=>[e(a(d),{"data-source":v.value,"display-expr":"DEGER","value-expr":"DEGER"},null,8,["data-source"])]),_:1}),e(a(r),{"data-field":"ISTASYONID","data-type":"number",visible:!1}),e(a(X),{visible:!0,emptyPanelText:"Gruplanacak sütunlar buraya..."}),e(a($),{"auto-expand-all":!0}),e(a(q),{visible:!0}),e(a(ee),{enabled:!0}),e(a(ae),{mode:"virtual","column-rendering-mode":"virtual"}),e(a(te),{visible:!0}),e(a(le),{position:P}),e(a(oe),{visible:!0}),e(a(re),{visible:!0,width:240,placeholder:"Ara..."}),e(a(ie),{enabled:!0,"allow-export-selected-data":!0}),e(a(ne),{mode:"single"}),e(a(de),{enabled:!0}),e(a(se),{height:"540px",enabled:!0,mode:"dragAndDrop",title:"Sütun Seçici"},{default:l(()=>[e(a(ue),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),e(a(ce),{enabled:!0,"editor-options":A}),e(a(pe),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1}),e(a(me),null,{default:l(()=>[e(a(fe),{column:"TANIM","summary-type":"count","display-format":"{0} adet"}),e(a(xe),{"show-in-group-footer":!1,"align-by-column":!0,column:"TANIM","summary-type":"count","display-format":"{0} adet"})]),_:1})]),_:1},8,["data-source"])]),_:1}))}});export{_e as default};
