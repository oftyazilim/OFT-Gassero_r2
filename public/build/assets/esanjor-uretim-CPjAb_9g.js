import{a as S}from"./axios-CCb-kr4I.js";import{D as x}from"./button-BaNt2cEz.js";import{e as T,a as N,s as O}from"./FileSaver-kGUWF2pl.js";import{d as B,b2 as b,r as i,E as j,o as F,g as M,f as n,b as e,n as t}from"./main-CXefX_qh.js";import"./index-xGAhBz7B.js";import{b as o,F as G,G as _,q as U,f as z,e as V,r as Y,s as H,h as K,i as J,j as W,H as q,I as L,k as Q,l as X,m as Z,n as $,J as ee,K as te,M as ae,N as oe,O as r,D as ne}from"./data-grid-BLmUHH6D.js";import{D as re}from"./context-menu-Cov5ypH3.js";import{n as ie}from"./m_notify-Cb9wpp58.js";import{u as le}from"./pageTitle-BB4Xy5Fv.js";import{V as se}from"./VCard-pJfFDOSH.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-a73hCTk3.js";import"./VImg-Db788kHt.js";import"./index-DT3SyRRd.js";import"./VCardText-BW9gFSa-.js";const ve=B({__name:"esanjor-uretim",setup(ue){const w=b("userAbilityRules").value||[];document.title="OFT - İş Emirleri";let d=!1,m=!1,c=!1,p=!1;w.forEach((a,s)=>{a.action==="read"&&a.subject==="Dashboard"&&(d=!0),a.action==="isemri_rea"&&(m=!0),a.action==="update"&&a.subject==="SuperAdmin"&&(c=!0),a.action==="delete"&&a.subject==="SuperAdmin"&&(p=!0)}),console.log("okuma = "+d),console.log("olusturma = "+m),console.log("guncelleme = "+c),console.log("silme = "+p),i(!1);const f=le();b("userData");const g=i([]),R=i(null);i(null);var I="Eşanjörler: ";const l=i(!1),y=()=>{l.value=!l.value},C=()=>{D(),ie("Veriler Yenilendi","success",1500)};j(()=>{D()});const D=()=>{S.get("/api/esanjoruretim").then(a=>{g.value=a.data.data,f.setTitle(I),f.setToplam(E(a.data.toplam).toString())}).catch(a=>{console.error("Veri çekilirken hata oluştu: ",a)})},v=a=>{},E=a=>new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0}).format(a),A={of:window,at:"top",my:"top",offset:{y:10}},P=a=>{a.component.option("loadPanel.enabled",!1)},k=a=>{const s=new T.Workbook,u=s.addWorksheet("Esanjorler");N({component:a.component,worksheet:u,autoFilterEnabled:!0}).then(()=>{s.xlsx.writeBuffer().then(h=>{O(new Blob([h],{type:"application/octet-stream"}),"Esanjorler.xlsx")})}),a.cancel=!0};return(a,s)=>(F(),M(se,{class:"pa-2"},{default:n(()=>[e(t(re),{"data-source":a.menuItems,width:200,target:"#gridContainer",onItemClick:a.itemClick},null,8,["data-source","onItemClick"]),e(t(ne),{id:"gridContainer",ref_key:"dataGridRef",ref:R,onContentReady:P,"data-source":g.value,"show-borders":!0,"key-expr":"ID",onEditorPreparing:a.onEditorPreparing,"show-column-lines":!1,"show-row-lines":!0,"row-alternation-enabled":!0,"allow-column-reordering":!0,"focused-row-enabled":!0,onRowRemoving:a.onRowRemoving,"allow-column-resizing":!0,onExporting:k,"show-indicator":!0,onCellPrepared:v,"repaint-changes-only":!0,onContextMenuPreparing:a.onContextMenuPreparing},{refreshTemplate:n(()=>[e(t(x),{icon:"refresh",onClick:C})]),collapseTemplate:n(()=>[e(t(x),{icon:l.value?"collapse":"expand",hint:"expandAll ? 'Daralt' : 'Genişlet'",width:"40",height:"40","styling-mode":"text",onClick:y},null,8,["icon"])]),default:n(()=>[e(t(o),{"data-field":"ID",caption:"ID","data-type":"number",width:90,alignment:"center"}),e(t(o),{"data-field":"ISEMRIID",caption:"İŞ EMRİ ID",width:120,"data-type":"number"}),e(t(o),{"data-field":"OPERASYON",caption:"OPERASYON","data-type":"string",visible:!1,width:160}),e(t(o),{"data-field":"OPERASYON_TANIMI",caption:"OPERASYON","data-type":"string",visible:!0,width:200}),e(t(o),{"data-field":"URUNID","data-type":"number",caption:"URUN ID",visible:!0,width:100}),e(t(o),{"data-field":"ESANJORID",caption:"EŞANJÖR ID","data-type":"number"}),e(t(o),{"data-field":"URETIMTARIH",caption:"ÜRT. TARİH","data-type":"date",width:200,visible:!0,alignment:"center",format:{formatter:u=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(u)).replace(/\//g,".")}},null,8,["format"]),e(t(o),{"data-field":"BARKOD",caption:"BARKOD","data-type":"string",visible:!0,width:130}),e(t(o),{"data-field":"URUNADI",caption:"ÜRÜN ADI","data-type":"string"}),e(t(G),{visible:!0}),e(t(_),{"auto-expand-all":l.value},null,8,["auto-expand-all"]),e(t(U),{visible:!0}),e(t(z),{enabled:!0}),e(t(V),{mode:"virtual","column-rendering-mode":"virtual"}),e(t(Y),{visible:!0}),e(t(H),{position:A}),e(t(K),{visible:!0}),e(t(J),{visible:!0,width:240,placeholder:"Ara..."}),e(t(W),{enabled:!0,"allow-export-selected-data":!0}),e(t(q),{mode:"single"}),e(t(L),{enabled:!0}),e(t(Q),{height:"540px",enabled:!0,title:"Sütun Seçici"},{default:n(()=>[e(t(X),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),e(t(Z),{enabled:!0,"editor-options":a.editorOptions},null,8,["editor-options"]),e(t($),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1}),e(t(ee),null,{default:n(()=>[e(t(te),{"align-by-column":!0,column:"ISEMRIID","summary-type":"count","display-format":"{0} adet",alignment:a.right},null,8,["alignment"]),e(t(ae),{column:"BARKOD","summary-type":"count","display-format":"{0}"})]),_:1}),e(t(oe),null,{default:n(()=>[e(t(r),{name:"groupPanel"}),e(t(r),{location:"before","locate-in-menu":"auto",template:"collapseTemplate"}),e(t(r),{location:"after",template:"refreshTemplate"}),e(t(r),{location:"after",name:"columnChooserButton"}),e(t(r),{location:"after",name:"exportButton"}),e(t(r),{location:"after",name:"searchPanel"})]),_:1})]),_:1},8,["data-source","onEditorPreparing","onRowRemoving","onContextMenuPreparing"])]),_:1}))}});export{ve as default};
