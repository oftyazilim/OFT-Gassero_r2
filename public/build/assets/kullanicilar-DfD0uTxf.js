import{v as A,E as k,w as oe,B as V,o as dt,P as xt,x as se,y as ae,z as le,S as re,A as de,b as v,g as ue,a as ce,h as pe,i as he,f as _e,e as me,j as ge,k as fe,l as be,m as Ce,n as ve,D as Q,t as ht}from"./data-grid-BLmUHH6D.js";import{a as B}from"./axios-CCb-kr4I.js";import{n as Se}from"./m_notify-Cb9wpp58.js";import{D as Ee}from"./context-menu-Cov5ypH3.js";import{_ as ye}from"./AddNewUserDrawer.vue_vue_type_script_setup_true_lang-CaheMLNz.js";import{e as we,a as xe,s as De}from"./FileSaver-kGUWF2pl.js";import{d1 as z,cV as L,c$ as Ie,dQ as Be,cW as C,cY as Te,df as Dt,dP as $e,dd as It,d3 as Bt,d as Oe,r as T,E as Ae,w as Pe,$ as Re,b2 as Ne,o as Z,c as Le,e as N,b as u,n as l,f as y,g as _t,t as Me,v as ke,aW as Fe,F as He,V as mt}from"./main-CXefX_qh.js";import{$ as r,O as We,p as Y,I as q,b as F,e as g,aR as J,J as lt,ac as Tt,ay as O,w as M,aH as Ve,_ as ze,x as rt,ax as $,i as Ue,X as W,ba as ut,z as tt,y as $t,j as Ke,d as Ot,F as At,l as Ge,Z as et,C as je,R as Ye,c as qe,a as P}from"./index-xGAhBz7B.js";import{u as Je}from"./pageTitle-BB4Xy5Fv.js";import{S as j}from"./sweetalert2.esm.all-D3pEHXw3.js";import{b as Xe,V as Qe}from"./VCard-pJfFDOSH.js";import"./validators-BJEf8OaU.js";import"./helpers-BGv4x_9E.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-UIB--c0H.js";import"./form-ClP579eF.js";import"./VSelect-BSocyXX7.js";import"./VTextField-CN3aek7z.js";/* empty css                   */import"./VCounter-Cxc0KNa-.js";import"./index-DT3SyRRd.js";import"./VField-CeCYSswt.js";import"./easing-CjukEv2V.js";import"./VInput-BI9uJ0Ce.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-5j6JHPeN.js";import"./ssrBoot-BBXTmuIy.js";import"./VAvatar-a73hCTk3.js";import"./VImg-Db788kHt.js";import"./VDivider-B8BIZrEP.js";import"./dialog-transition-DjZpsU5U.js";import"./VMenu-DAf6uba2.js";import"./VOverlay-E84Zkpn-.js";import"./delay-RGhQcOZ6.js";import"./lazy-CAMkS5e7.js";import"./scopeId-BgBx1Ex_.js";import"./VCheckboxBtn-CLjc42-a.js";import"./VSelectionControl-BoOcbjQs.js";import"./VChip-Dx4QNr20.js";import"./VSlideGroup-CNPi0L39.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-B67lS2wl.js";import"./VCardText-BW9gFSa-.js";import"./VForm-CD_GLPlO.js";import"./VRow-qTTVFZ4i.js";/* empty css              */import"./VCol-Dzvr-cnK.js";import"./VDialog-Cm1FNAkS.js";import"./_commonjsHelpers-BosuxZz1.js";const Pt={_menuEnabled(){return!!this._menuItems().length},_menuItems(){return this._list.option("menuItems")},_deleteEnabled(){return this._list.option("allowItemDeleting")},_fireMenuAction(t,e){this._list._itemEventHandlerByHandler(t,e,{},{excludeValidators:["disabled","readOnly"]})}},gt="dx-list-context-menu";A("menu","context",k.inherit({_init(){const t=r("<div>").addClass(gt);this._list.$element().append(t),this._menu=this._renderOverlay(t)},_renderOverlay(t){return this._list._createComponent(t,We,{shading:!1,deferRendering:!0,hideOnParentScroll:!0,hideOnOutsideClick:e=>!r(e.target).closest(`.${gt}`).length,animation:{show:{type:"slide",duration:300,from:{height:0,opacity:1},to:{height:(function(){return Y(this._$menuList)}).bind(this),opacity:1}},hide:{type:"slide",duration:0,from:{opacity:1},to:{opacity:0}}},_ignoreFunctionValueDeprecation:!0,height:(function(){return this._$menuList?Y(this._$menuList):0}).bind(this),width:(function(){return q(this._list.$element())}).bind(this),onContentReady:this._renderMenuContent.bind(this)})},_renderMenuContent(t){const e=t.component.$content(),n=this._menuItems().slice();this._deleteEnabled()&&n.push({text:z.format("dxListEditDecorator-delete"),action:this._deleteItem.bind(this)}),this._$menuList=r("<div>"),this._list._createComponent(this._$menuList,oe,{items:n,onItemClick:this._menuItemClickHandler.bind(this),height:"auto",integrationOptions:{}}),e.addClass("dx-list-context-menucontent"),e.append(this._$menuList)},_menuItemClickHandler(t){this._menu.hide(),this._fireMenuAction(this._$itemWithMenu,t.itemData.action)},_deleteItem(){this._list.deleteItem(this._$itemWithMenu)},handleContextMenu(t){return this._$itemWithMenu=t,this._menu.option({position:{my:"top",at:"bottom",of:t,collision:"flip"}}),this._menu.show(),!0},dispose(){this._menu&&this._menu.$element().remove(),this.callBase.apply(this,arguments)}}).include(Pt));const{abstract:ft}=k,Rt="dxListEditDecorator",bt=F(lt.down,Rt),Ct=F(Tt,Rt),nt="dx-list-switchable-delete-ready",Ze="dx-list-switchable-menu-shield-positioning",tn="dx-list-switchable-delete-top-shield",en="dx-list-switchable-delete-bottom-shield",vt="dx-list-switchable-menu-item-shield-positioning",nn="dx-list-switchable-delete-item-content-shield",on="dx-list-switchable-delete-button-container",Nt=k.inherit({_init(){this._$topShield=r("<div>").addClass(tn),this._$bottomShield=r("<div>").addClass(en),this._$itemContentShield=r("<div>").addClass(nn),g.on(this._$topShield,bt,this._cancelDeleteReadyItem.bind(this)),g.on(this._$bottomShield,bt,this._cancelDeleteReadyItem.bind(this)),this._list.$element().append(this._$topShield.toggle(!1)).append(this._$bottomShield.toggle(!1))},handleClick(){return this._cancelDeleteReadyItem()},_cancelDeleteReadyItem(){return this._$readyToDeleteItem?(this._cancelDelete(this._$readyToDeleteItem),!0):!1},_cancelDelete(t){this._toggleDeleteReady(t,!1)},_toggleDeleteReady(t,e){e===void 0&&(e=!this._isReadyToDelete(t)),this._toggleShields(t,e),this._toggleScrolling(e),this._cacheReadyToDeleteItem(t,e),this._animateToggleDelete(t,e)},_isReadyToDelete:t=>t.hasClass(nt),_toggleShields(t,e){this._list.$element().toggleClass(Ze,e),this._$topShield.toggle(e),this._$bottomShield.toggle(e),e&&this._updateShieldsHeight(t),this._toggleContentShield(t,e)},_updateShieldsHeight(t){const e=this._list.$element(),n=e.offset().top,i=Y(e),s=t.offset().top,d=Y(t),m=s-n,p=i-d-m;J(this._$topShield,Math.max(m,0)),J(this._$bottomShield,Math.max(p,0))},_toggleContentShield(t,e){e?t.find(".dx-list-item-content").first().append(this._$itemContentShield):this._$itemContentShield.detach()},_toggleScrolling(t){const e=this._list.$element().dxScrollView("instance");t?e.on("start",this._cancelScrolling):e.off("start",this._cancelScrolling)},_cancelScrolling(t){t.event.cancel=!0},_cacheReadyToDeleteItem(t,e){e?this._$readyToDeleteItem=t:delete this._$readyToDeleteItem},_animateToggleDelete(t,e){e?(this._enablePositioning(t),this._prepareDeleteReady(t),this._animatePrepareDeleteReady(t),g.off(t,lt.up)):(this._forgetDeleteReady(t),this._animateForgetDeleteReady(t).done(this._disablePositioning.bind(this,t)))},_enablePositioning(t){t.addClass(vt),g.on(t,Ct,L),g.one(t,lt.up,this._disablePositioning.bind(this,t))},_disablePositioning(t){t.removeClass(vt),g.off(t,Ct)},_prepareDeleteReady(t){t.addClass(nt)},_forgetDeleteReady(t){t.removeClass(nt)},_animatePrepareDeleteReady:ft,_animateForgetDeleteReady:ft,_getDeleteButtonContainer(t){return t=t||this._$readyToDeleteItem,t.children(`.${on}`)},_deleteItem(t){t=t||this._$readyToDeleteItem,this._getDeleteButtonContainer(t).detach(),!t.is(".dx-state-disabled, .dx-state-disabled *")&&this._list.deleteItem(t).always(this._cancelDelete.bind(this,t))},_isRtlEnabled(){return this._list.option("rtlEnabled")},dispose(){this._$topShield&&this._$topShield.remove(),this._$bottomShield&&this._$bottomShield.remove(),this.callBase.apply(this,arguments)}}),sn="dx-list-switchable-delete-button-container",an="dx-list-switchable-delete-button-wrapper",ln="dx-list-switchable-delete-button-inner-wrapper",rn="dx-list-switchable-delete-button",Lt=Nt.inherit({_init(){this.callBase.apply(this,arguments);const t=r("<div>").addClass(sn),e=r("<div>").addClass(an),n=r("<div>").addClass(ln),i=r("<div>").addClass(rn);this._list._createComponent(i,V,{text:z.format("dxListEditDecorator-delete"),type:"danger",stylingMode:dt()?"text":"contained",onClick:(function(s){this._deleteItem(),s.event.stopPropagation()}).bind(this),integrationOptions:{},elementAttr:{role:null,"aria-label":null},tabIndex:-1}),t.append(e),e.append(n),n.append(i),this._$buttonContainer=t},_enablePositioning(t){this.callBase.apply(this,arguments),O.stop(this._$buttonContainer,!0),this._$buttonContainer.appendTo(t)},_disablePositioning(){this.callBase.apply(this,arguments),this._$buttonContainer.detach()},_animatePrepareDeleteReady(){const t=this._isRtlEnabled(),e=M(this._list.$element()),n=this._buttonWidth(),i=t?e:-n,s=t?e-n:0;return O.animate(this._$buttonContainer,{type:"custom",duration:200,from:{right:i},to:{right:s}})},_animateForgetDeleteReady(){const t=this._isRtlEnabled(),e=M(this._list.$element()),n=this._buttonWidth(),i=t?e-n:0,s=t?e:-n;return O.animate(this._$buttonContainer,{type:"custom",duration:200,from:{right:i},to:{right:s}})},_buttonWidth(){return this._buttonContainerWidth||(this._buttonContainerWidth=q(this._$buttonContainer)),this._buttonContainerWidth},dispose(){this._$buttonContainer&&this._$buttonContainer.remove(),this.callBase.apply(this,arguments)}}),dn="dx-list-toggle-delete-switch-container",un="dx-list-toggle-delete-switch";A("delete","toggle",Lt.inherit({beforeBag(t){const{$itemElement:e}=t,{$container:n}=t,i=r("<div>").addClass(un);this._list._createComponent(i,V,{icon:"toggle-delete",onClick:(function(s){O.stop(this._$buttonContainer,!1),this._toggleDeleteReady(e),s.event.stopPropagation()}).bind(this),integrationOptions:{},elementAttr:{role:null,"aria-label":null},tabIndex:-1}),n.addClass(dn),n.append(i)}}));A("delete","slideButton",Lt.inherit({_shouldHandleSwipe:!0,_swipeEndHandler(t,e){return e.targetOffset!==0&&(O.stop(this._$buttonContainer,!1),this._toggleDeleteReady(t)),!0}}));const cn={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},pn=["shading","target","$arrow"],w={left:-1,top:-1,center:0,right:1,bottom:1},Mt={top:{my:"bottom center",at:"top center",collision:"fit flip"},bottom:{my:"top center",at:"bottom center",collision:"fit flip"},right:{my:"left center",at:"right center",collision:"flip fit"},left:{my:"right center",at:"left center",collision:"flip fit"}},hn={h:10,v:10};class _n extends Ve{constructor(e){let{shading:n,target:i,$arrow:s}=e,d=ze(e,pn);super(d),this._props=Ie({},this._props,{shading:n,target:i}),this._$arrow=s,this._positionSide=void 0,this.updatePosition(this._props.position)}positionWrapper(){this._props.shading&&this._$wrapper.css({top:0,left:0})}updateTarget(e){this._props.target=e,this.updatePosition(this._props.position)}_renderBoundaryOffset(){}_getContainerPosition(){const e=Be(this._position.offset||"");let{h:n,v:i}=e;const s=this._isVerticalSide(),d=this._isHorizontalSide();if(s||d){const p=(this._isPopoverInside()?-1:1)*w[this._positionSide],h=s?rt(this._$arrow):M(this._$arrow),f=this._getContentBorderWidth(this._positionSide),E=p*(h-f);s?i+=E:n+=E}return C({},this._position,{offset:`${n} ${i}`})}_getContentBorderWidth(e){const n=this._$content.css(cn[e]);return parseInt(n)||0}_isPopoverInside(){const e=$.setup.normalizeAlign(this._position.my),n=$.setup.normalizeAlign(this._position.at);return e.h===n.h&&e.v===n.v}_isVerticalSide(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._positionSide;return e==="top"||e==="bottom"}_isHorizontalSide(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._positionSide;return e==="left"||e==="right"}_getDisplaySide(e){const n=$.setup.normalizeAlign(e.my),i=$.setup.normalizeAlign(e.at),s=w[n.h]===w[i.h]&&w[n.v]===w[i.v]?-1:1,d=Math.abs(w[n.h]-s*w[i.h]),m=Math.abs(w[n.v]-s*w[i.v]);return d>m?i.h:i.v}_normalizePosition(e){const n={of:this._props.target,boundaryOffset:hn};let i;return Te(e)?i=C(!0,{},n,this._positionToObject(e)):i=n,this._positionSide=this._getDisplaySide(i),i}_positionToObject(e){return Dt(e)?C({},Mt[e]):e}}const St={left:"right",top:"bottom",right:"left",bottom:"top",center:"center"},kt=function(t){return It(t)?t.name:t},Ft=function(t,e){const n=t.option(e);return kt(n)},mn=function(t,e){const n=t.option(e);return It(n)&&n.delay},it=function(t,e){const{target:n,shading:i,disabled:s,hideEvent:d}=t.option(),m=Dt(n),p=i&&e==="hide",h=p?null:Ft(t,`${e}Event`);if(p&&d&&Ke.log("W1020"),!h||s)return;const f=F(h,t.NAME),E=t._createAction((function(){const b=mn(t,`${e}Event`);this._clearEventsTimeouts(),b?this._timeouts[e]=setTimeout(()=>{t[e]()},b):t[e]()}).bind(t),{validatingTargetName:"target"}),x=function(b){E({event:b,target:r(b.currentTarget)})},D=`_${e}EventHandler`;if(m)t[D]=x,g.on(Ot.getDocument(),f,n,x);else{const b=At(r(n));t[D]=void 0,g.on(b,f,x)}},ot=function(t,e,n,i){let s=i||Ft(t,`${n}Event`);if(!s)return;s=F(s,t.NAME);const d=`_${n}EventHandler`;t[d]?g.off(Ot.getDocument(),s,e,t[d]):g.off(At(r(e)),s)},Ht=xt.inherit({_getDefaultOptions(){return C(this.callBase(),{target:void 0,shading:!1,position:C({},Mt.bottom),hideOnOutsideClick:!0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",from:1,to:0}},showTitle:!1,width:"auto",height:"auto",dragEnabled:!1,resizeEnabled:!1,fullScreen:!1,hideOnParentScroll:!0,arrowPosition:"",arrowOffset:0,_fixWrapperPosition:!0})},_defaultOptionsRules:()=>[{device:{platform:"ios"},options:{arrowPosition:{boundaryOffset:{h:20,v:-10},collision:"fit"}}},{device:()=>!Ue(),options:{animation:null}},{device:()=>dt(),options:{useFlatToolbarButtons:!0}},{device:()=>se(),options:{useDefaultToolbarButtons:!0,showCloseButton:!1}}],_init(){var t;this.callBase(),this._renderArrow(),this._timeouts={},this.$element().addClass("dx-popover"),this.$wrapper().addClass("dx-popover-wrapper");const e=(t=this.option("toolbarItems"))===null||t===void 0?void 0:t.length;this.setAria("role",e?"dialog":"tooltip")},_render(){this.callBase.apply(this,arguments),this._detachEvents(this.option("target")),this._attachEvents()},_detachEvents(t){ot(this,t,"show"),ot(this,t,"hide")},_attachEvents(){it(this,"show"),it(this,"hide")},_renderArrow(){this._$arrow=r("<div>").addClass("dx-popover-arrow").prependTo(this.$overlayContent())},_documentDownHandler(t){return this._isOutsideClick(t)?this.callBase(t):!0},_isOutsideClick(t){return!r(t.target).closest(this.option("target")).length},_animate(t){t&&t.to&&typeof t.to=="object"&&C(t.to,{position:this._getContainerPosition()}),this.callBase.apply(this,arguments)},_stopAnimation(){this.callBase.apply(this,arguments)},_renderTitle(){this.$wrapper().toggleClass("dx-popover-without-title",!this.option("showTitle")),this.callBase()},_renderPosition(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.callBase(),this._renderOverlayPosition(t),this._actions.onPositioned()},_renderOverlayPosition(t){this._resetOverlayPosition(t),this._updateContentSize(t);const e=this._getContainerPosition(),n=$.setup(this.$overlayContent(),e),i=this._getSideByLocation(n);this._togglePositionClass(`dx-position-${i}`),this._toggleFlippedClass(n.h.flip,n.v.flip),(this._isHorizontalSide()||this._isVerticalSide())&&this._renderArrowPosition(i)},_resetOverlayPosition(t){this._setContentHeight(t),this._togglePositionClass(`dx-position-${this._positionController._positionSide}`),W(this.$overlayContent(),{left:0,top:0}),this._$arrow.css({top:"auto",right:"auto",bottom:"auto",left:"auto"})},_updateContentSize(t){if(!this.$content()||!t)return;const e=$.calculate(this.$overlayContent(),this._getContainerPosition());if(e.h.oversize>0&&this._isHorizontalSide()&&!e.h.fit){const n=M(this.$overlayContent())-e.h.oversize;ut(this.$overlayContent(),n)}if(e.v.oversize>0&&this._isVerticalSide()&&!e.v.fit){const n=rt(this.$overlayContent())-e.v.oversize,i=rt(this.$content())-e.v.oversize;J(this.$overlayContent(),n),J(this.$content(),i)}},_getContainerPosition(){return this._positionController._getContainerPosition()},_getHideOnParentScrollTarget(){return r(this._positionController._position.of||this.callBase())},_getSideByLocation(t){const e=t.v.flip,n=t.h.flip;return this._isVerticalSide()&&e||this._isHorizontalSide()&&n||this._isPopoverInside()?St[this._positionController._positionSide]:this._positionController._positionSide},_togglePositionClass(t){this.$wrapper().removeClass("dx-position-left dx-position-right dx-position-top dx-position-bottom").addClass(t)},_toggleFlippedClass(t,e){this.$wrapper().toggleClass("dx-popover-flipped-horizontal",t).toggleClass("dx-popover-flipped-vertical",e)},_renderArrowPosition(t){const e=tt(this._$arrow.get(0)),n=-(this._isVerticalSide(t)?e.height:e.width);this._$arrow.css(St[t],n);const i=this._isVerticalSide(t)?"left":"top",s=this._isVerticalSide(t)?"width":"height",d=r(this._positionController._position.of),m=$.offset(d)||{top:0,left:0},p=$.offset(this.$overlayContent()),h=e[s],f=p[i],E=tt(this.$overlayContent().get(0))[s],x=m[i],D=d.get(0),b=D&&!D.preventDefault?tt(D)[s]:0,U=Math.max(f,x),K=Math.min(f+E,x+b);let R;this.option("arrowPosition")==="start"?R=U-f:this.option("arrowPosition")==="end"?R=K-f-h:R=(U+K)/2-f-h/2;const S=this._positionController._getContentBorderWidth(t),X=$e(R-S+this.option("arrowOffset"),S,E-h-2*S);this._$arrow.css(i,X)},_isPopoverInside(){return this._positionController._isPopoverInside()},_setContentHeight(t){t&&this.callBase()},_getPositionControllerConfig(){const{shading:t,target:e}=this.option();return C({},this.callBase(),{target:e,shading:t,$arrow:this._$arrow})},_initPositionController(){this._positionController=new _n(this._getPositionControllerConfig())},_renderWrapperDimensions(){this.option("shading")&&this.$wrapper().css({width:"100%",height:"100%"})},_isVerticalSide(t){return this._positionController._isVerticalSide(t)},_isHorizontalSide(t){return this._positionController._isHorizontalSide(t)},_clearEventTimeout(t){clearTimeout(this._timeouts[t])},_clearEventsTimeouts(){this._clearEventTimeout("show"),this._clearEventTimeout("hide")},_clean(){this._detachEvents(this.option("target")),this.callBase.apply(this,arguments)},_optionChanged(t){switch(t.name){case"arrowPosition":case"arrowOffset":this._renderGeometry();break;case"fullScreen":t.value&&this.option("fullScreen",!1);break;case"target":t.previousValue&&this._detachEvents(t.previousValue),this._positionController.updateTarget(t.value),this._invalidate();break;case"showEvent":case"hideEvent":{const e=t.name.substring(0,4),n=kt(t.previousValue);this.hide(),ot(this,this.option("target"),e,n),it(this,e);break}case"visible":this._clearEventTimeout(t.value?"show":"hide"),this.callBase(t);break;default:this.callBase(t)}},show(t){return t&&this.option("target",t),this.callBase()}});$t("dxPopover",Ht);const H=Ge(),Wt=ae.inherit({_getDefaultOptions(){return C(this.callBase(),{usePopover:!1,target:null,title:"",showTitle:!0,showCancelButton:!0,cancelText:z.format("Cancel"),onCancelClick:null,visible:!1,noDataText:"",focusStateEnabled:!1,selectByClick:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios",tablet:!0},options:{usePopover:!0}}])},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new le((t,e)=>{const n=new V(r("<div>"),C({onClick:e&&e.click,stylingMode:e&&e.stylingMode||"outlined"},e));t.append(n.$element())},["disabled","icon","text","type","onClick","click","stylingMode"],this.option("integrationOptions.watchMethod"))})},_itemContainer(){return this._$itemContainer},_itemClass:()=>"dx-actionsheet-item",_itemDataKey:()=>"dxActionSheetItemData",_toggleVisibility:L,_renderDimensions:L,_initMarkup(){this.callBase(),this.$element().addClass("dx-actionsheet"),this._createItemContainer()},_render(){this._renderPopup()},_createItemContainer(){this._$itemContainer=r("<div>").addClass("dx-actionsheet-container"),this._renderDisabled()},_renderDisabled(){this._$itemContainer.toggleClass("dx-state-disabled",this.option("disabled"))},_renderPopup(){this._$popup=r("<div>").appendTo(this.$element()),this._isPopoverMode()?this._createPopover():this._createPopup(),this._renderPopupTitle(),this._mapPopupOption("visible")},_mapPopupOption(t){this._popup&&this._popup.option(t,this.option(t))},_isPopoverMode(){return this.option("usePopover")&&this.option("target")},_renderPopupTitle(){this._mapPopupOption("showTitle"),this._popup&&this._popup.$wrapper().toggleClass("dx-actionsheet-without-title",!this.option("showTitle"))},_clean(){this._$popup&&this._$popup.remove(),this.callBase()},_overlayConfig(){return{onInitialized:(function(t){this._popup=t.component}).bind(this),disabled:!1,showTitle:!0,title:this.option("title"),deferRendering:!0,onContentReady:this._popupContentReadyAction.bind(this),onHidden:this.hide.bind(this)}},_createPopover(){this._createComponent(this._$popup,Ht,C(this._overlayConfig(),{width:this.option("width")||200,height:this.option("height")||"auto",target:this.option("target")})),this._popup.$overlayContent().attr("role","dialog"),this._popup.$wrapper().addClass("dx-actionsheet-popover-wrapper")},_createPopup(){this._createComponent(this._$popup,xt,C(this._overlayConfig(),{dragEnabled:!1,width:this.option("width")||"100%",height:this.option("height")||"auto",showCloseButton:!1,position:{my:"bottom",at:"bottom",of:H},animation:{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom",of:H}},to:{position:{my:"bottom",at:"bottom",of:H}}},hide:{type:"slide",duration:400,from:{position:{my:"bottom",at:"bottom",of:H}},to:{position:{my:"top",at:"bottom",of:H}}}}})),this._popup.$wrapper().addClass("dx-actionsheet-popup-wrapper")},_popupContentReadyAction(){this._popup.$content().append(this._$itemContainer),this._attachClickEvent(),this._attachHoldEvent(),this._prepareContent(),this._renderContent(),this._renderCancelButton()},_renderCancelButton(){if(!this._isPopoverMode()&&(this._$cancelButton&&this._$cancelButton.remove(),this.option("showCancelButton"))){const t=this._createActionByOption("onCancelClick")||L,e=this;this._$cancelButton=r("<div>").addClass("dx-actionsheet-cancel").appendTo(this._popup&&this._popup.$content()),this._createComponent(this._$cancelButton,V,{disabled:!1,stylingMode:"outlined",text:this.option("cancelText"),onClick(n){const i={event:n,cancel:!1};t(i),i.cancel||e.hide()},integrationOptions:{}})}},_attachItemClickEvent:L,_itemClickHandler(t){this.callBase(t),r(t.target).is(".dx-state-disabled, .dx-state-disabled *")||this.hide()},_itemHoldHandler(t){this.callBase(t),r(t.target).is(".dx-state-disabled, .dx-state-disabled *")||this.hide()},_optionChanged(t){switch(t.name){case"width":case"height":case"visible":case"title":this._mapPopupOption(t.name);break;case"disabled":this._renderDisabled();break;case"showTitle":this._renderPopupTitle();break;case"showCancelButton":case"onCancelClick":case"cancelText":this._renderCancelButton();break;case"target":case"usePopover":case"items":this._invalidate();break;default:this.callBase(t)}},toggle(t){const e=this,n=Bt();return e._popup.toggle(t).done(()=>{e.option("visible",t),n.resolveWith(e)}),n.promise()},show(){return this.toggle(!0)},hide(){return this.toggle(!1)}});$t("dxActionSheet",Wt);const Vt="dxListEditDecorator",Et=F(je,Vt),gn=F(Tt,Vt),fn="dx-list-slide-menu",bn="dx-list-slide-menu-wrapper",st="dx-list-slide-menu-content",Cn="dx-list-slide-menu-buttons-container",vn="dx-list-slide-menu-buttons",yt="dx-list-slide-menu-button",Sn="dx-list-slide-menu-button-menu",En="dx-list-slide-menu-button-delete",yn="cubic-bezier(0.075, 0.82, 0.165, 1)";A("menu","slide",Nt.inherit({_shouldHandleSwipe:!0,_init(){this.callBase.apply(this,arguments),this._$buttonsContainer=r("<div>").addClass(Cn),g.on(this._$buttonsContainer,gn,L),this._$buttons=r("<div>").addClass(vn).appendTo(this._$buttonsContainer),this._renderMenu(),this._renderDeleteButton()},_renderMenu(){if(!this._menuEnabled())return;const t=this._menuItems();if(t.length===1){const e=t[0];this._renderMenuButton(e.text,n=>{n.stopPropagation(),this._fireAction(e)})}else{const e=r("<div>").addClass(fn);this._menu=this._list._createComponent(e,Wt,{showTitle:!1,items:t,onItemClick:(function(i){this._fireAction(i.itemData)}).bind(this),integrationOptions:{}}),e.appendTo(this._list.$element());const n=this._renderMenuButton(z.format("dxListEditDecorator-more"),i=>{i.stopPropagation(),this._menu.show()});this._menu.option("target",n)}},_renderMenuButton(t,e){const n=r("<div>").addClass(yt).addClass(Sn).text(t);return this._$buttons.append(n),g.on(n,Et,e),n},_renderDeleteButton(){if(!this._deleteEnabled())return;const t=r("<div>").addClass(yt).addClass(En).text(dt()?"":z.format("dxListEditDecorator-delete"));g.on(t,Et,e=>{e.stopPropagation(),this._deleteItem()}),this._$buttons.append(t)},_fireAction(t){this._fireMenuAction(r(this._cachedNode),t.action),this._cancelDeleteReadyItem()},modifyElement(t){this.callBase.apply(this,arguments);const{$itemElement:e}=t;e.addClass(bn);const n=r("<div>").addClass(st);e.wrapInner(n)},_getDeleteButtonContainer(){return this._$buttonsContainer},handleClick(t,e){return r(e.target).closest(`.${st}`).length?this.callBase.apply(this,arguments):!1},_swipeStartHandler(t){this._enablePositioning(t),this._cacheItemData(t),this._setPositions(this._getPositions(0))},_swipeUpdateHandler(t,e){const i=this._isRtlEnabled()?-1:1,s=this._isReadyToDelete(t);if(this._getCurrentPositions().content===this._getStartPositions().content&&!s&&e.offset*i>0){e.cancel=!0;return}const m=this._cachedItemWidth*e.offset,p=s?-this._cachedButtonWidth*i:0,f=(m+p)*i<0?Math.abs((m+p)/this._cachedButtonWidth):0;return this._setPositions(this._getPositions(f)),!0},_getStartPositions(){const t=this._isRtlEnabled(),e=t?-1:1;return{content:0,buttonsContainer:t?-this._cachedButtonWidth:this._cachedItemWidth,buttons:-this._cachedButtonWidth*e}},_getPositions(t){const n=this._isRtlEnabled()?-1:1,i=this._getStartPositions();return{content:i.content-t*this._cachedButtonWidth*n,buttonsContainer:i.buttonsContainer-Math.min(t,1)*this._cachedButtonWidth*n,buttons:i.buttons+Math.min(t,1)*this._cachedButtonWidth*n}},_getCurrentPositions(){return{content:et(this._$cachedContent).left,buttonsContainer:et(this._$buttonsContainer).left,buttons:et(this._$buttons).left}},_setPositions(t){W(this._$cachedContent,{left:t.content}),W(this._$buttonsContainer,{left:t.buttonsContainer}),W(this._$buttons,{left:t.buttons})},_cacheItemData(t){t[0]!==this._cachedNode&&(this._$cachedContent=t.find(`.${st}`),this._cachedItemWidth=q(t),this._cachedButtonWidth=this._cachedButtonWidth||q(this._$buttons),ut(this._$buttonsContainer,this._cachedButtonWidth),this._$cachedContent.length&&(this._cachedNode=t[0]))},_minButtonContainerLeftOffset(){return this._cachedItemWidth-this._cachedButtonWidth},_swipeEndHandler(t,e){this._cacheItemData(t);const n=this._isRtlEnabled()?1:-1,i=this._cachedItemWidth*e.offset,s=!this._isReadyToDelete(t)&&i*n>.2*this._cachedButtonWidth,d=e.targetOffset===n&&s;return this._toggleDeleteReady(t,d),!0},_enablePositioning(t){O.stop(this._$cachedContent,!0),this.callBase.apply(this,arguments),this._$buttonsContainer.appendTo(t)},_disablePositioning(){this.callBase.apply(this,arguments),this._$buttonsContainer.detach()},_animatePrepareDeleteReady(){return this._animateToPositions(this._getPositions(1))},_animateForgetDeleteReady(t){return this._cacheItemData(t),this._animateToPositions(this._getPositions(0))},_animateToPositions(t){const e=this,n=this._getCurrentPositions(),i=Math.min(Math.abs(n.content-t.content)/this._cachedButtonWidth,1);return O.animate(this._$cachedContent,{from:n,to:t,easing:yn,duration:400*i,strategy:"frame",draw(s){e._setPositions(s)}})},dispose(){this._menu&&this._menu.$element().remove(),this._$buttonsContainer&&this._$buttonsContainer.remove(),this.callBase.apply(this,arguments)}}).include(Pt));const wn="dx-list-static-delete-button-container",xn="dx-list-static-delete-button";A("delete","static",k.inherit({afterBag(t){const{$itemElement:e}=t,{$container:n}=t,i=r("<div>").addClass(xn);this._list._createComponent(i,V,{icon:"remove",onClick:(function(s){s.event.stopPropagation(),this._deleteItem(e)}).bind(this),integrationOptions:{},elementAttr:{role:null,"aria-label":null},tabIndex:-1}),n.addClass(wn).append(i)},_deleteItem(t){t.is(".dx-state-disabled, .dx-state-disabled *")||this._list.deleteItem(t)}}));A("delete","swipe",k.inherit({_shouldHandleSwipe:!0,_renderItemPosition(t,e,n){const i=Bt(),s=e*this._itemElementWidth;return n?O.animate(t,{to:{left:s},type:"slide",complete(){i.resolve(t,e)}}):(W(t,{left:s}),i.resolve()),i.promise()},_swipeStartHandler(t){return this._itemElementWidth=M(t),!0},_swipeUpdateHandler(t,e){return this._renderItemPosition(t,e.offset),!0},_swipeEndHandler(t,e){const n=e.targetOffset;return this._renderItemPosition(t,n,!0).done((i,s)=>{Math.abs(s)&&this._list.deleteItem(i).fail(()=>{this._renderItemPosition(i,0,!0)})}),!0}}));const Dn="dx-list-reorder-handle-container",wt="dx-list-reorder-handle",In="dx-list-item-ghost-reordering";A("reorder","default",k.inherit({_init(){const t=this._list;this._groupedEnabled=this._list.option("grouped"),this._lockedDrag=!1;const e=this._groupedEnabled?"> .dx-list-items > .dx-list-group > .dx-list-group-body > .dx-list-item":"> .dx-list-items > .dx-list-item";this._sortable=t._createComponent(t._scrollView.content(),re,C({component:t,contentTemplate:null,allowReordering:!1,filter:e,container:t.$element(),dragDirection:t.option("itemDragging.group")?"both":"vertical",handle:`.${wt}`,dragTemplate:this._dragTemplate,onDragStart:this._dragStartHandler.bind(this),onDragChange:this._dragChangeHandler.bind(this),onReorder:this._reorderHandler.bind(this)},t.option("itemDragging")))},afterRender(){this._sortable.update()},_dragTemplate(t){const e=r(t.itemElement).clone().addClass(In).addClass("dx-state-hover");return ut(e,M(t.itemElement)),e},_dragStartHandler(t){this._lockedDrag&&(t.cancel=!0)},_dragChangeHandler(t){this._groupedEnabled&&!this._sameParent(t.fromIndex,t.toIndex)&&(t.cancel=!0)},_sameParent(t,e){const n=this._list.getItemElementByFlatIndex(t);return this._list.getItemElementByFlatIndex(e).parent().get(0)===n.parent().get(0)},_reorderHandler(t){const e=this._list.getItemElementByFlatIndex(t.toIndex);this._list.reorderItem(r(t.itemElement),e)},afterBag(t){const e=r("<div>").addClass(wt);g.on(e,"dxpointerdown",n=>{this._lockedDrag=!Ye(n)}),g.on(e,"dxhold",{timeout:30},n=>{n.cancel=!0,this._lockedDrag=!1}),t.$container.addClass(Dn).append(e)}}));/*!
 * devextreme-vue
 * Version: 24.1.6
 * Build date: Sat Sep 14 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const Bn=qe({props:{accessKey:String,activeStateEnabled:Boolean,allowItemDeleting:Boolean,bounceEnabled:Boolean,collapsibleGroups:Boolean,dataSource:{},disabled:Boolean,displayExpr:[Function,String],elementAttr:Object,focusStateEnabled:Boolean,grouped:Boolean,groupTemplate:{},height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,indicateLoading:Boolean,itemDeleteMode:String,itemDragging:Object,itemHoldTimeout:Number,items:Array,itemTemplate:{},keyExpr:[Function,String],menuItems:Array,menuMode:String,nextButtonText:String,noDataText:String,onContentReady:Function,onDisposing:Function,onGroupRendered:Function,onInitialized:Function,onItemClick:Function,onItemContextMenu:Function,onItemDeleted:Function,onItemDeleting:Function,onItemHold:Function,onItemRendered:Function,onItemReordered:Function,onItemSwipe:Function,onOptionChanged:Function,onPageLoading:Function,onPullRefresh:Function,onScroll:Function,onSelectAllValueChanged:Function,onSelectionChanged:Function,pageLoadingText:String,pageLoadMode:String,pulledDownText:String,pullingDownText:String,pullRefreshEnabled:Boolean,refreshingText:String,repaintChangesOnly:Boolean,rtlEnabled:Boolean,scrollByContent:Boolean,scrollByThumb:Boolean,scrollingEnabled:Boolean,searchEditorOptions:Object,searchEnabled:Boolean,searchExpr:[Array,Function,String],searchMode:String,searchTimeout:Number,searchValue:String,selectAllMode:String,selectAllText:String,selectByClick:Boolean,selectedItemKeys:Array,selectedItems:Array,selectionMode:String,showScrollbar:String,showSelectionControls:Boolean,tabIndex:Number,useNativeScrolling:Boolean,visible:Boolean,width:[Function,Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:allowItemDeleting":null,"update:bounceEnabled":null,"update:collapsibleGroups":null,"update:dataSource":null,"update:disabled":null,"update:displayExpr":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:grouped":null,"update:groupTemplate":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:indicateLoading":null,"update:itemDeleteMode":null,"update:itemDragging":null,"update:itemHoldTimeout":null,"update:items":null,"update:itemTemplate":null,"update:keyExpr":null,"update:menuItems":null,"update:menuMode":null,"update:nextButtonText":null,"update:noDataText":null,"update:onContentReady":null,"update:onDisposing":null,"update:onGroupRendered":null,"update:onInitialized":null,"update:onItemClick":null,"update:onItemContextMenu":null,"update:onItemDeleted":null,"update:onItemDeleting":null,"update:onItemHold":null,"update:onItemRendered":null,"update:onItemReordered":null,"update:onItemSwipe":null,"update:onOptionChanged":null,"update:onPageLoading":null,"update:onPullRefresh":null,"update:onScroll":null,"update:onSelectAllValueChanged":null,"update:onSelectionChanged":null,"update:pageLoadingText":null,"update:pageLoadMode":null,"update:pulledDownText":null,"update:pullingDownText":null,"update:pullRefreshEnabled":null,"update:refreshingText":null,"update:repaintChangesOnly":null,"update:rtlEnabled":null,"update:scrollByContent":null,"update:scrollByThumb":null,"update:scrollingEnabled":null,"update:searchEditorOptions":null,"update:searchEnabled":null,"update:searchExpr":null,"update:searchMode":null,"update:searchTimeout":null,"update:searchValue":null,"update:selectAllMode":null,"update:selectAllText":null,"update:selectByClick":null,"update:selectedItemKeys":null,"update:selectedItems":null,"update:selectionMode":null,"update:showScrollbar":null,"update:showSelectionControls":null,"update:tabIndex":null,"update:useNativeScrolling":null,"update:visible":null,"update:width":null},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=de,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={item:{isCollectionItem:!0,optionName:"items"},itemDragging:{isCollectionItem:!1,optionName:"itemDragging"},menuItem:{isCollectionItem:!0,optionName:"menuItems"},searchEditorOptions:{isCollectionItem:!1,optionName:"searchEditorOptions"}}}}),ct=P({emits:{"update:isActive":null,"update:hoveredElement":null,"update:location":null,"update:name":null,"update:options":null},props:{location:String,name:String,options:Object}});ct.$_optionName="buttons";ct.$_isCollectionItem=!0;ct.$_expectedChildren={options:{isCollectionItem:!1,optionName:"options"}};const Tn=P({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}});Tn.$_optionName="cursorOffset";const zt=P({emits:{"update:isActive":null,"update:hoveredElement":null,"update:badge":null,"update:disabled":null,"update:html":null,"update:icon":null,"update:showChevron":null,"update:template":null,"update:text":null,"update:visible":null},props:{badge:String,disabled:Boolean,html:String,icon:String,showChevron:Boolean,template:{},text:String,visible:Boolean}});zt.$_optionName="items";zt.$_isCollectionItem=!0;const Ut=P({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowDropInsideItem":null,"update:allowReordering":null,"update:autoScroll":null,"update:bindingOptions":null,"update:boundary":null,"update:container":null,"update:cursorOffset":null,"update:data":null,"update:dragDirection":null,"update:dragTemplate":null,"update:dropFeedbackMode":null,"update:elementAttr":null,"update:filter":null,"update:group":null,"update:handle":null,"update:height":null,"update:itemOrientation":null,"update:moveItemOnDrop":null,"update:onAdd":null,"update:onDisposing":null,"update:onDragChange":null,"update:onDragEnd":null,"update:onDragMove":null,"update:onDragStart":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onRemove":null,"update:onReorder":null,"update:rtlEnabled":null,"update:scrollSensitivity":null,"update:scrollSpeed":null,"update:width":null},props:{allowDropInsideItem:Boolean,allowReordering:Boolean,autoScroll:Boolean,bindingOptions:Object,boundary:{},container:{},cursorOffset:[Object,String],data:{},dragDirection:String,dragTemplate:{},dropFeedbackMode:String,elementAttr:Object,filter:String,group:String,handle:String,height:[Function,Number,String],itemOrientation:String,moveItemOnDrop:Boolean,onAdd:Function,onDisposing:Function,onDragChange:Function,onDragEnd:Function,onDragMove:Function,onDragStart:Function,onInitialized:Function,onOptionChanged:Function,onRemove:Function,onReorder:Function,rtlEnabled:Boolean,scrollSensitivity:Number,scrollSpeed:Number,width:[Function,Number,String]}});Ut.$_optionName="itemDragging";Ut.$_expectedChildren={cursorOffset:{isCollectionItem:!1,optionName:"cursorOffset"}};const Kt=P({emits:{"update:isActive":null,"update:hoveredElement":null,"update:action":null,"update:text":null},props:{action:Function,text:String}});Kt.$_optionName="menuItems";Kt.$_isCollectionItem=!0;const $n=P({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:bindingOptions":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:icon":null,"update:onClick":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:rtlEnabled":null,"update:stylingMode":null,"update:tabIndex":null,"update:template":null,"update:text":null,"update:type":null,"update:useSubmitBehavior":null,"update:validationGroup":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,bindingOptions:Object,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Function,Number,String]}});$n.$_optionName="options";const Gt=P({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:bindingOptions":null,"update:buttons":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:inputAttr":null,"update:isDirty":null,"update:isValid":null,"update:label":null,"update:labelMode":null,"update:mask":null,"update:maskChar":null,"update:maskInvalidMessage":null,"update:maskRules":null,"update:maxLength":null,"update:mode":null,"update:name":null,"update:onChange":null,"update:onContentReady":null,"update:onCopy":null,"update:onCut":null,"update:onDisposing":null,"update:onEnterKey":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onInitialized":null,"update:onInput":null,"update:onKeyDown":null,"update:onKeyUp":null,"update:onOptionChanged":null,"update:onPaste":null,"update:onValueChanged":null,"update:placeholder":null,"update:readOnly":null,"update:rtlEnabled":null,"update:showClearButton":null,"update:showMaskMode":null,"update:spellcheck":null,"update:stylingMode":null,"update:tabIndex":null,"update:text":null,"update:useMaskedValue":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationMessagePosition":null,"update:validationStatus":null,"update:value":null,"update:valueChangeEvent":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,bindingOptions:Object,buttons:Array,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,inputAttr:{},isDirty:Boolean,isValid:Boolean,label:String,labelMode:String,mask:String,maskChar:String,maskInvalidMessage:String,maskRules:{},maxLength:[Number,String],mode:String,name:String,onChange:Function,onContentReady:Function,onCopy:Function,onCut:Function,onDisposing:Function,onEnterKey:Function,onFocusIn:Function,onFocusOut:Function,onInitialized:Function,onInput:Function,onKeyDown:Function,onKeyUp:Function,onOptionChanged:Function,onPaste:Function,onValueChanged:Function,placeholder:String,readOnly:Boolean,rtlEnabled:Boolean,showClearButton:Boolean,showMaskMode:String,spellcheck:Boolean,stylingMode:String,tabIndex:Number,text:String,useMaskedValue:Boolean,validationError:{},validationErrors:Array,validationMessageMode:String,validationMessagePosition:String,validationStatus:String,value:String,valueChangeEvent:String,visible:Boolean,width:[Function,Number,String]}});Gt.$_optionName="searchEditorOptions";Gt.$_expectedChildren={button:{isCollectionItem:!0,optionName:"buttons"}};const On={class:"grids"},An={class:"list-container"},Pn=N("hr",null,null,-1),at="/api/kullanicilar",Ii=Oe({__name:"kullanicilar",setup(t){const e=Je();e.setTitle("Kullanıcılar"),e.setToplam(""),document.title="OFT - Kullanıcılar";const n=T([]),i=T([]),s=T(!1),d=T(null);T([]);const m=T([]),p=T([]),h=T([]),f=o=>{const a=o.row.data;d.value=a;let c=[];(d.value.roles||"").split(",").forEach(G=>{c.push({name:G.trim()})}),m.value=c,E()},E=async()=>{if(!d.value)return;const{data:o}=await B.get(`/api/users/${d.value.id}/permissions`);h.value=o.assigned,p.value=o.available},x=async o=>{try{const a=o.itemData;if(!d.value||!a)return;h.value.push(a),p.value=p.value.filter(c=>c.id!==a.id),h.value=[...h.value],p.value=[...p.value],B.post(`/api/users/${d.value.id}/permissions/${a.id}`)}catch(a){console.error("İzin atama işlemi başarısız oldu:",a)}},D=async o=>{const a=o.itemData;!d.value||!a||(p.value.push(a),h.value=h.value.filter(c=>c.id!==a.id),h.value=[...h.value],p.value=[...p.value],await B.delete(`/api/users/${d.value.id}/permissions/${a.id}`))},b=()=>{s.value=!0},U=o=>{Yt(o)},K=o=>{qt(o)},R={placeholder:"Sütun ara"},S=async()=>{try{const o=await B.get(at);n.value=o.data.data,i.value=o.data.kademeler}catch(o){console.error("Error fetching data:",o),Se("Kullanıcılar verisi alınamadı","error",1500)}finally{}},X=(o,a)=>{const c=(a.data.roles||"").split(",");o.className="d-flex gap-2",c.forEach(_=>{const G=_.trim(),pt=jt[G]||{},I=document.createElement("span");I.textContent=pt.text||G,I.style.display="inline-block",I.style.padding="2px 8px",I.style.borderRadius="8px",I.style.backgroundColor=pt.color||"#ccc",I.style.color="#fff",I.style.fontSize="12px",o.appendChild(I)})},jt={SuperAdmin:{color:"red",text:"SuperAdmin"},AclDemo:{color:"#28a745",text:"AclDemo"},admin:{color:"#ffc107",text:"admin"},writer:{color:"#ffc107",text:"writer"},Dashboard:{color:"#007bff",text:"Dashboard"},all:{color:"#ac3545",text:"all"}},Yt=o=>{o.promise=new Promise(async(a,c)=>{try{const _={...o.oldData,...o.newData};await B.put(`${at}/${o.key}`,_),await S(),o.component.cancelEditData(),a()}catch(_){console.error("Error updating data:",_),c()}})},qt=o=>{o.promise=new Promise(async(a,c)=>{try{await B.delete(`${at}/${o.key}`),await S(),o.component.cancelEditData(),a()}catch(_){console.error("Error deleting data:",_),c()}})};Ae(S),Pe(s,(o,a)=>{!o&&a&&(s.value||S())});function Jt(o){d.value={id:o.row.data.id,name:o.row.data.name,email:o.row.data.email,unvan:o.row.data.unvan,proses:o.row.data.proses,tip:o.row.data.tip,roles:o.row.data.roles,aktif:o.row.data.AKTIF}}const Xt=Re(()=>{const o=d.value||{};return{id:o.id||0,name:o.name||"",email:o.email||"",unvan:o.unvan||"",proses:o.proses||"",tip:o.tip||"",roles:o.roles||""}}),Qt=[{text:"Yenile"},{text:"Kullanıcı Ekle"},{text:"Kullanıcı Düzenle"},{text:"Aktif/Pasif Yap"},{text:"Şifreyi Sıfırla"}],Zt=async o=>{console.log(o);try{const a=await B.put(`/api/sifresifirla/${o}`)}catch(a){console.error("Veri silinirken hata oluştu: ",a)}};function te({itemData:o}){if(!(o!=null&&o.items))switch(o==null?void 0:o.text){case"Yenile":S();break;case"Kullanıcı Ekle":d.value=null,b();break;case"Kullanıcı Düzenle":b();break;case"Aktif/Pasif Yap":const a=j.mixin({customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-error"},buttonsStyling:!0});a.fire({title:"Emin misiniz?",text:"İstersen sonra yine değiştirirsin :)",icon:"warning",showCancelButton:!0,confirmButtonColor:"#88efb3",cancelButtonColor:"#ed9595",reverseButtons:!0,confirmButtonText:"Evet, yap gitsin!",cancelButtonText:"Hayır, vazcaydım!"}).then(_=>{_.isConfirmed?(ne(d.value.id,d.value.aktif),a.fire({confirmButtonColor:"#88efb3",title:"Durum değiştirildi!",text:"Yoksa pişman mı oldun :)",icon:"success"})):_.dismiss===j.DismissReason.cancel&&a.fire({confirmButtonColor:"#88efb3",title:"Vazgeçildi",text:"Birşey yapmadım merak etmeyin :)",icon:"error"})});break;case"Şifreyi Sıfırla":const c=j.mixin({customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-error"},buttonsStyling:!0});c.fire({title:"Emin misiniz?",text:"Şifre sıfırlanacak!!!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#88efb3",cancelButtonColor:"#ed9595",reverseButtons:!0,confirmButtonText:"Evet, yap gitsin!",cancelButtonText:"Hayır, vazcaydım!"}).then(_=>{_.isConfirmed?(Zt(d.value.id),c.fire({confirmButtonColor:"#88efb3",title:"Şifre Sıfırlandı!",text:"pass1234",icon:"success"})):_.dismiss===j.DismissReason.cancel&&c.fire({confirmButtonColor:"#88efb3",title:"Vazgeçildi",text:"Birşey yapmadım merak etmeyin :)",icon:"error"})});break}}const ee=Ne("userData"),ne=async(o,a)=>{console.log(a);try{const c=await B.put(`/api/userdurumdegistir/${o}`,{userID:ee.value.id,aktif:parseInt(a)});S()}catch(c){console.error("Veri silinirken hata oluştu: ",c)}},ie=o=>{const a=new we.Workbook,c=a.addWorksheet("Kullanicilar");xe({component:o.component,worksheet:c,autoFilterEnabled:!0}).then(()=>{a.xlsx.writeBuffer().then(_=>{De(new Blob([_],{type:"application/octet-stream"}),"Kullanicilar.xlsx")})}),o.cancel=!0};return(o,a)=>(Z(),Le(He,null,[N("div",null,[u(l(Ee),{"data-source":Qt,width:200,target:"#grid-users",onItemClick:te}),u(l(Q),{id:"grid-users","data-source":l(n),"key-expr":"id","show-borders":!0,onRowUpdating:U,onRowRemoving:K,"focused-row-enabled":!0,"row-alternation-enabled":!0,onExporting:ie,onContextMenuPreparing:Jt,onFocusedRowChanged:f},{aktifTemplate:y(({data:c})=>[c.value==="0"||c.value===0?(Z(),_t(mt,{key:0,size:"20",icon:"tabler-x"})):(Z(),_t(mt,{key:1,size:"20",icon:"tabler-check"}))]),default:y(()=>[u(l(v),{"data-field":"AKTIF",caption:"AKTİF","data-type":"boolean",visible:!0,width:100,"cell-template":"aktifTemplate"}),u(l(v),{"data-field":"id",caption:"ID","allow-editing":!1,visible:!0,width:"70"}),u(l(v),{"data-field":"name",caption:"İSİM","allow-editing":!0,visible:!0,"validation-rules":[{type:"required"}],width:"170"}),u(l(v),{"data-field":"email",caption:"E-POSTA","allow-editing":!1,visible:!0,width:"150"}),u(l(v),{"data-field":"email_verified_at",caption:"ONAY TARİHİ","data-type":"date","allow-editing":!1,width:150,visible:!0,alignment:"center",format:{formatter:c=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(c)).replace(/\//g,".")}},null,8,["format"]),u(l(v),{"data-field":"unvan",caption:"ÜNVAN","validation-rules":[{type:"required"}],width:"150"}),u(l(v),{"data-field":"roles",caption:"ROLLER","cell-template":X}),u(l(v),{"data-field":"proses",caption:"PROSES",width:"200"}),u(l(v),{"data-field":"tip",caption:"KADEME","validation-rules":[{type:"required"}],width:"150"},{default:y(()=>[u(l(ue),{"data-source":l(i),"display-expr":"tip","value-expr":"tip",width:"150"},null,8,["data-source"])]),_:1}),u(l(ce),{"allow-updating":!1,"allow-adding":!1,"allow-deleting":!1,mode:"row","use-icons":!0}),u(l(pe),{visible:!0}),u(l(he),{visible:!0,width:240,placeholder:"Ara..."}),u(l(_e),{enabled:!0}),u(l(me),{mode:"virtual"}),u(l(ge),{enabled:!0,"allow-export-selected-data":!1}),u(l(fe),{height:"540px",enabled:!0,mode:"select",title:"Sütun Seçici"},{default:y(()=>[u(l(be),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),u(l(Ce),{enabled:!0,"editor-options":R}),u(l(ve),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1})]),_:1},8,["data-source"]),N("div",On,[N("div",An,[u(Qe,{class:"pa-2"},{default:y(()=>[u(Xe,null,{default:y(()=>[Me("Atanmış Roller")]),_:1}),Pn,u(l(Bn),{"data-source":l(m)},{item:y(({data:c})=>[N("div",null,[N("div",null,ke(c.name),1)])]),_:1},8,["data-source"])]),_:1})]),u(l(Q),{"data-source":l(p),"show-borders":!0},{default:y(()=>[u(l(ht),{group:"permissionsGroup","on-add":D}),u(l(v),{"data-field":"name",caption:"Atanmamış İzinler"})]),_:1},8,["data-source"]),u(l(Q),{"data-source":l(h),"show-borders":!0},{default:y(()=>[u(l(ht),{group:"permissionsGroup","on-add":x}),u(l(v),{"data-field":"name",caption:"Atanmış İzinler"})]),_:1},8,["data-source"])])]),u(ye,{isDrawerOpen:l(s),"onUpdate:isDrawerOpen":a[0]||(a[0]=c=>Fe(s)?s.value=c:null),userData:l(Xt)},null,8,["isDrawerOpen","userData"])],64))}});export{Ii as default};
